var Lr=Object.defineProperty;var lr=xe=>{throw TypeError(xe)};var Cr=(xe,Ae,Ne)=>Ae in xe?Lr(xe,Ae,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):xe[Ae]=Ne;var yt=(xe,Ae,Ne)=>Cr(xe,typeof Ae!="symbol"?Ae+"":Ae,Ne),bn=(xe,Ae,Ne)=>Ae.has(xe)||lr("Cannot "+Ne);var j=(xe,Ae,Ne)=>(bn(xe,Ae,"read from private field"),Ne?Ne.call(xe):Ae.get(xe)),Pe=(xe,Ae,Ne)=>Ae.has(xe)?lr("Cannot add the same private member more than once"):Ae instanceof WeakSet?Ae.add(xe):Ae.set(xe,Ne),ze=(xe,Ae,Ne,Ut)=>(bn(xe,Ae,"write to private field"),Ut?Ut.call(xe,Ne):Ae.set(xe,Ne),Ne),Bt=(xe,Ae,Ne)=>(bn(xe,Ae,"access private method"),Ne);(function(){"use strict";var on,an,Rt,me,Ye,Qe,Fe,xt,At;let xe=class _r{constructor(e){yt(this,"authorityId");yt(this,"typeId");yt(this,"versionMajor");yt(this,"versionMinor");this.authorityId=e.authorityId,this.typeId=e.typeId,this.versionMajor=e.versionMajor,this.versionMinor=e.versionMinor}toString(){return`${this.authorityId}/${this.typeId}:${this.versionMajor}.${this.versionMinor}`}static fromString(e){const[r,_]=e.split(":"),[t,w]=r.split("/"),[G,X]=_.split(".");return new _r({authorityId:t,typeId:w,versionMajor:Number(G),versionMinor:Number(X)})}sameAs(e){return this.authorityId===e.authorityId&&this.typeId===e.typeId}};var Ae,Ne=(Ae=self.location.href,function(p){var e,r,_=p||{},t=_!==void 0?_:{};t.ready=new Promise(function(s,n){e=s,r=n});const w=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,w.debugModule("globalThis.location =",globalThis.location);const G="emscripten-bug-17951";t[G]=function s(n,o){n.env.foo=function(){};const i=t.locateFile(s.uri,Ue===void 0?"":Ue);w.debugModule("instantiateWasm() uri =",i);const l=()=>fetch(i,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(l(),n).then(u=>o(u.instance,u.module)):async()=>l().then(u=>u.arrayBuffer()).then(u=>WebAssembly.instantiate(u,n)).then(u=>o(u.instance,u.module)))(),{}},t[G].uri="sqlite3.wasm";var X,he,Oe,We=Object.assign({},t),Ke="./this.program",et=typeof window=="object",He=typeof importScripts=="function",Ue="";(et||He)&&(He?Ue=self.location.href:typeof document<"u"&&document.currentScript&&(Ue=document.currentScript.src),Ae&&(Ue=Ae),Ue=Ue.indexOf("blob:")!==0?Ue.substr(0,Ue.replace(/[?#].*/,"").lastIndexOf("/")+1):"",X=s=>{var n=new XMLHttpRequest;return n.open("GET",s,!1),n.send(null),n.responseText},He&&(Oe=s=>{var n=new XMLHttpRequest;return n.open("GET",s,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),he=(s,n,o)=>{var i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?n(i.response):o()},i.onerror=o,i.send(null)});var tt,nt,ut=t.print||console.log.bind(console),rt=t.printErr||console.warn.bind(console);Object.assign(t,We),We=null,t.thisProgram&&(Ke=t.thisProgram),t.wasmBinary&&(tt=t.wasmBinary),typeof WebAssembly!="object"&&wt("no native wasm support detected");var Ve,bt,zn,be,Re,Un=!1,Qn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ht(s,n,o){for(var i=n+o,l=n;s[l]&&!(l>=i);)++l;if(l-n>16&&s.buffer&&Qn)return Qn.decode(s.subarray(n,l));for(var u="";n<l;){var I=s[n++];if(128&I){var E=63&s[n++];if((224&I)!=192){var C=63&s[n++];if((I=(240&I)==224?(15&I)<<12|E<<6|C:(7&I)<<18|E<<12|C<<6|63&s[n++])<65536)u+=String.fromCharCode(I);else{var W=I-65536;u+=String.fromCharCode(55296|W>>10,56320|1023&W)}}else u+=String.fromCharCode((31&I)<<6|E)}else u+=String.fromCharCode(I)}return u}function Dt(s,n,o,i){if(!(i>0))return 0;for(var l=o,u=o+i-1,I=0;I<s.length;++I){var E=s.charCodeAt(I);if(E>=55296&&E<=57343&&(E=65536+((1023&E)<<10)|1023&s.charCodeAt(++I)),E<=127){if(o>=u)break;n[o++]=E}else if(E<=2047){if(o+1>=u)break;n[o++]=192|E>>6,n[o++]=128|63&E}else if(E<=65535){if(o+2>=u)break;n[o++]=224|E>>12,n[o++]=128|E>>6&63,n[o++]=128|63&E}else{if(o+3>=u)break;n[o++]=240|E>>18,n[o++]=128|E>>12&63,n[o++]=128|E>>6&63,n[o++]=128|63&E}}return n[o]=0,o-l}function Wn(s,n,o){return Dt(s,bt,n,o)}function Tt(s){for(var n=0,o=0;o<s.length;++o){var i=s.charCodeAt(o);i<=127?n++:i<=2047?n+=2:i>=55296&&i<=57343?(n+=4,++o):n+=3}return n}function Gn(){var s=nt.buffer;t.HEAP8=Ve=new Int8Array(s),t.HEAP16=zn=new Int16Array(s),t.HEAP32=be=new Int32Array(s),t.HEAPU8=bt=new Uint8Array(s),t.HEAPU16=new Uint16Array(s),t.HEAPU32=Re=new Uint32Array(s),t.HEAPF32=new Float32Array(s),t.HEAPF64=new Float64Array(s),t.HEAP64=new BigInt64Array(s),t.HEAPU64=new BigUint64Array(s)}var Hn=t.INITIAL_MEMORY||16777216;nt=t.wasmMemory?t.wasmMemory:new WebAssembly.Memory({initial:Hn/65536,maximum:32768}),Gn(),Hn=nt.buffer.byteLength;var Ze,_n,we,Be,Vn=[],$n=[],Kn=[],dt=0,kt=null;function cn(s){dt++,t.monitorRunDependencies&&t.monitorRunDependencies(dt)}function Mt(s){if(dt--,t.monitorRunDependencies&&t.monitorRunDependencies(dt),dt==0&&kt){var n=kt;kt=null,n()}}function wt(s){t.onAbort&&t.onAbort(s),rt(s="Aborted("+s+")"),Un=!0,s+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(s);throw r(n),n}function Jn(s){return s.startsWith("data:application/octet-stream;base64,")}function Xn(s){try{if(s==Ze&&tt)return new Uint8Array(tt);if(Oe)return Oe(s);throw"both async and sync fetching of the wasm failed"}catch(n){wt(n)}}function un(s){for(;s.length>0;)s.shift()(t)}t.locateFile?Jn(Ze="sqlite3.wasm")||(_n=Ze,Ze=t.locateFile?t.locateFile(_n,Ue):Ue+_n):Ze=new URL("/app/assets/sqlite3-qlk9hduR.wasm",self.location.href).href;var qe={isAbs:s=>s.charAt(0)==="/",splitPath:s=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(s).slice(1),normalizeArray:(s,n)=>{for(var o=0,i=s.length-1;i>=0;i--){var l=s[i];l==="."?s.splice(i,1):l===".."?(s.splice(i,1),o++):o&&(s.splice(i,1),o--)}if(n)for(;o;o--)s.unshift("..");return s},normalize:s=>{var n=qe.isAbs(s),o=s.substr(-1)==="/";return(s=qe.normalizeArray(s.split("/").filter(i=>!!i),!n).join("/"))||n||(s="."),s&&o&&(s+="/"),(n?"/":"")+s},dirname:s=>{var n=qe.splitPath(s),o=n[0],i=n[1];return o||i?(i&&(i=i.substr(0,i.length-1)),o+i):"."},basename:s=>{if(s==="/")return"/";var n=(s=(s=qe.normalize(s)).replace(/\/$/,"")).lastIndexOf("/");return n===-1?s:s.substr(n+1)},join:function(){var s=Array.prototype.slice.call(arguments);return qe.normalize(s.join("/"))},join2:(s,n)=>qe.normalize(s+"/"+n)},st={resolve:function(){for(var s="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var i=o>=0?arguments[o]:c.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";s=i+"/"+s,n=qe.isAbs(i)}return(n?"/":"")+(s=qe.normalizeArray(s.split("/").filter(l=>!!l),!n).join("/"))||"."},relative:(s,n)=>{function o(W){for(var P=0;P<W.length&&W[P]==="";P++);for(var L=W.length-1;L>=0&&W[L]==="";L--);return P>L?[]:W.slice(P,L-P+1)}s=st.resolve(s).substr(1),n=st.resolve(n).substr(1);for(var i=o(s.split("/")),l=o(n.split("/")),u=Math.min(i.length,l.length),I=u,E=0;E<u;E++)if(i[E]!==l[E]){I=E;break}var C=[];for(E=I;E<i.length;E++)C.push("..");return(C=C.concat(l.slice(I))).join("/")}};function dn(s,n,o){var i=Tt(s)+1,l=new Array(i),u=Dt(s,l,0,l.length);return l.length=u,l}var pt={ttys:[],init:function(){},shutdown:function(){},register:function(s,n){pt.ttys[s]={input:[],output:[],ops:n},c.registerDevice(s,pt.stream_ops)},stream_ops:{open:function(s){var n=pt.ttys[s.node.rdev];if(!n)throw new c.ErrnoError(43);s.tty=n,s.seekable=!1},close:function(s){s.tty.ops.fsync(s.tty)},fsync:function(s){s.tty.ops.fsync(s.tty)},read:function(s,n,o,i,l){if(!s.tty||!s.tty.ops.get_char)throw new c.ErrnoError(60);for(var u=0,I=0;I<i;I++){var E;try{E=s.tty.ops.get_char(s.tty)}catch{throw new c.ErrnoError(29)}if(E===void 0&&u===0)throw new c.ErrnoError(6);if(E==null)break;u++,n[o+I]=E}return u&&(s.node.timestamp=Date.now()),u},write:function(s,n,o,i,l){if(!s.tty||!s.tty.ops.put_char)throw new c.ErrnoError(60);try{for(var u=0;u<i;u++)s.tty.ops.put_char(s.tty,n[o+u])}catch{throw new c.ErrnoError(29)}return i&&(s.node.timestamp=Date.now()),u}},default_tty_ops:{get_char:function(s){if(!s.input.length){var n=null;if(typeof window<"u"&&typeof window.prompt=="function"?(n=window.prompt("Input: "))!==null&&(n+=`
`):typeof readline=="function"&&(n=readline())!==null&&(n+=`
`),!n)return null;s.input=dn(n)}return s.input.shift()},put_char:function(s,n){n===null||n===10?(ut(ht(s.output,0)),s.output=[]):n!=0&&s.output.push(n)},fsync:function(s){s.output&&s.output.length>0&&(ut(ht(s.output,0)),s.output=[])}},default_tty1_ops:{put_char:function(s,n){n===null||n===10?(rt(ht(s.output,0)),s.output=[]):n!=0&&s.output.push(n)},fsync:function(s){s.output&&s.output.length>0&&(rt(ht(s.output,0)),s.output=[])}}};function Yn(s){s=function(o,i){return Math.ceil(o/i)*i}(s,65536);var n=or(65536,s);return n?function(o,i){return bt.fill(0,o,o+i),o}(n,s):0}var ge={ops_table:null,mount:function(s){return ge.createNode(null,"/",16895,0)},createNode:function(s,n,o,i){if(c.isBlkdev(o)||c.isFIFO(o))throw new c.ErrnoError(63);ge.ops_table||(ge.ops_table={dir:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr,lookup:ge.node_ops.lookup,mknod:ge.node_ops.mknod,rename:ge.node_ops.rename,unlink:ge.node_ops.unlink,rmdir:ge.node_ops.rmdir,readdir:ge.node_ops.readdir,symlink:ge.node_ops.symlink},stream:{llseek:ge.stream_ops.llseek}},file:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr},stream:{llseek:ge.stream_ops.llseek,read:ge.stream_ops.read,write:ge.stream_ops.write,allocate:ge.stream_ops.allocate,mmap:ge.stream_ops.mmap,msync:ge.stream_ops.msync}},link:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr,readlink:ge.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr},stream:c.chrdev_stream_ops}});var l=c.createNode(s,n,o,i);return c.isDir(l.mode)?(l.node_ops=ge.ops_table.dir.node,l.stream_ops=ge.ops_table.dir.stream,l.contents={}):c.isFile(l.mode)?(l.node_ops=ge.ops_table.file.node,l.stream_ops=ge.ops_table.file.stream,l.usedBytes=0,l.contents=null):c.isLink(l.mode)?(l.node_ops=ge.ops_table.link.node,l.stream_ops=ge.ops_table.link.stream):c.isChrdev(l.mode)&&(l.node_ops=ge.ops_table.chrdev.node,l.stream_ops=ge.ops_table.chrdev.stream),l.timestamp=Date.now(),s&&(s.contents[n]=l,s.timestamp=l.timestamp),l},getFileDataAsTypedArray:function(s){return s.contents?s.contents.subarray?s.contents.subarray(0,s.usedBytes):new Uint8Array(s.contents):new Uint8Array(0)},expandFileStorage:function(s,n){var o=s.contents?s.contents.length:0;if(!(o>=n)){n=Math.max(n,o*(o<1048576?2:1.125)>>>0),o!=0&&(n=Math.max(n,256));var i=s.contents;s.contents=new Uint8Array(n),s.usedBytes>0&&s.contents.set(i.subarray(0,s.usedBytes),0)}},resizeFileStorage:function(s,n){if(s.usedBytes!=n)if(n==0)s.contents=null,s.usedBytes=0;else{var o=s.contents;s.contents=new Uint8Array(n),o&&s.contents.set(o.subarray(0,Math.min(n,s.usedBytes))),s.usedBytes=n}},node_ops:{getattr:function(s){var n={};return n.dev=c.isChrdev(s.mode)?s.id:1,n.ino=s.id,n.mode=s.mode,n.nlink=1,n.uid=0,n.gid=0,n.rdev=s.rdev,c.isDir(s.mode)?n.size=4096:c.isFile(s.mode)?n.size=s.usedBytes:c.isLink(s.mode)?n.size=s.link.length:n.size=0,n.atime=new Date(s.timestamp),n.mtime=new Date(s.timestamp),n.ctime=new Date(s.timestamp),n.blksize=4096,n.blocks=Math.ceil(n.size/n.blksize),n},setattr:function(s,n){n.mode!==void 0&&(s.mode=n.mode),n.timestamp!==void 0&&(s.timestamp=n.timestamp),n.size!==void 0&&ge.resizeFileStorage(s,n.size)},lookup:function(s,n){throw c.genericErrors[44]},mknod:function(s,n,o,i){return ge.createNode(s,n,o,i)},rename:function(s,n,o){if(c.isDir(s.mode)){var i;try{i=c.lookupNode(n,o)}catch{}if(i)for(var l in i.contents)throw new c.ErrnoError(55)}delete s.parent.contents[s.name],s.parent.timestamp=Date.now(),s.name=o,n.contents[o]=s,n.timestamp=s.parent.timestamp,s.parent=n},unlink:function(s,n){delete s.contents[n],s.timestamp=Date.now()},rmdir:function(s,n){var o=c.lookupNode(s,n);for(var i in o.contents)throw new c.ErrnoError(55);delete s.contents[n],s.timestamp=Date.now()},readdir:function(s){var n=[".",".."];for(var o in s.contents)s.contents.hasOwnProperty(o)&&n.push(o);return n},symlink:function(s,n,o){var i=ge.createNode(s,n,41471,0);return i.link=o,i},readlink:function(s){if(!c.isLink(s.mode))throw new c.ErrnoError(28);return s.link}},stream_ops:{read:function(s,n,o,i,l){var u=s.node.contents;if(l>=s.node.usedBytes)return 0;var I=Math.min(s.node.usedBytes-l,i);if(I>8&&u.subarray)n.set(u.subarray(l,l+I),o);else for(var E=0;E<I;E++)n[o+E]=u[l+E];return I},write:function(s,n,o,i,l,u){if(n.buffer===Ve.buffer&&(u=!1),!i)return 0;var I=s.node;if(I.timestamp=Date.now(),n.subarray&&(!I.contents||I.contents.subarray)){if(u)return I.contents=n.subarray(o,o+i),I.usedBytes=i,i;if(I.usedBytes===0&&l===0)return I.contents=n.slice(o,o+i),I.usedBytes=i,i;if(l+i<=I.usedBytes)return I.contents.set(n.subarray(o,o+i),l),i}if(ge.expandFileStorage(I,l+i),I.contents.subarray&&n.subarray)I.contents.set(n.subarray(o,o+i),l);else for(var E=0;E<i;E++)I.contents[l+E]=n[o+E];return I.usedBytes=Math.max(I.usedBytes,l+i),i},llseek:function(s,n,o){var i=n;if(o===1?i+=s.position:o===2&&c.isFile(s.node.mode)&&(i+=s.node.usedBytes),i<0)throw new c.ErrnoError(28);return i},allocate:function(s,n,o){ge.expandFileStorage(s.node,n+o),s.node.usedBytes=Math.max(s.node.usedBytes,n+o)},mmap:function(s,n,o,i,l){if(!c.isFile(s.node.mode))throw new c.ErrnoError(43);var u,I,E=s.node.contents;if(2&l||E.buffer!==Ve.buffer){if((o>0||o+n<E.length)&&(E=E.subarray?E.subarray(o,o+n):Array.prototype.slice.call(E,o,o+n)),I=!0,!(u=Yn(n)))throw new c.ErrnoError(48);Ve.set(E,u)}else I=!1,u=E.byteOffset;return{ptr:u,allocated:I}},msync:function(s,n,o,i,l){return ge.stream_ops.write(s,n,0,i,o,!1),0}}};function kr(s,n,o,i){var l="al "+s;he(s,u=>{var I;I='Loading data file "'+s+'" failed (no arrayBuffer).',u||wt(I),n(new Uint8Array(u)),l&&Mt()},u=>{if(!o)throw'Loading data file "'+s+'" failed.';o()}),l&&cn()}var c={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(s,n={})=>{if(!(s=st.resolve(s)))return{path:"",node:null};if((n=Object.assign({follow_mount:!0,recurse_count:0},n)).recurse_count>8)throw new c.ErrnoError(32);for(var o=s.split("/").filter(W=>!!W),i=c.root,l="/",u=0;u<o.length;u++){var I=u===o.length-1;if(I&&n.parent)break;if(i=c.lookupNode(i,o[u]),l=qe.join2(l,o[u]),c.isMountpoint(i)&&(!I||I&&n.follow_mount)&&(i=i.mounted.root),!I||n.follow)for(var E=0;c.isLink(i.mode);){var C=c.readlink(l);if(l=st.resolve(qe.dirname(l),C),i=c.lookupPath(l,{recurse_count:n.recurse_count+1}).node,E++>40)throw new c.ErrnoError(32)}}return{path:l,node:i}},getPath:s=>{for(var n;;){if(c.isRoot(s)){var o=s.mount.mountpoint;return n?o[o.length-1]!=="/"?o+"/"+n:o+n:o}n=n?s.name+"/"+n:s.name,s=s.parent}},hashName:(s,n)=>{for(var o=0,i=0;i<n.length;i++)o=(o<<5)-o+n.charCodeAt(i)|0;return(s+o>>>0)%c.nameTable.length},hashAddNode:s=>{var n=c.hashName(s.parent.id,s.name);s.name_next=c.nameTable[n],c.nameTable[n]=s},hashRemoveNode:s=>{var n=c.hashName(s.parent.id,s.name);if(c.nameTable[n]===s)c.nameTable[n]=s.name_next;else for(var o=c.nameTable[n];o;){if(o.name_next===s){o.name_next=s.name_next;break}o=o.name_next}},lookupNode:(s,n)=>{var o=c.mayLookup(s);if(o)throw new c.ErrnoError(o,s);for(var i=c.hashName(s.id,n),l=c.nameTable[i];l;l=l.name_next){var u=l.name;if(l.parent.id===s.id&&u===n)return l}return c.lookup(s,n)},createNode:(s,n,o,i)=>{var l=new c.FSNode(s,n,o,i);return c.hashAddNode(l),l},destroyNode:s=>{c.hashRemoveNode(s)},isRoot:s=>s===s.parent,isMountpoint:s=>!!s.mounted,isFile:s=>(61440&s)==32768,isDir:s=>(61440&s)==16384,isLink:s=>(61440&s)==40960,isChrdev:s=>(61440&s)==8192,isBlkdev:s=>(61440&s)==24576,isFIFO:s=>(61440&s)==4096,isSocket:s=>!(49152&~s),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:s=>{var n=c.flagModes[s];if(n===void 0)throw new Error("Unknown file open mode: "+s);return n},flagsToPermissionString:s=>{var n=["r","w","rw"][3&s];return 512&s&&(n+="w"),n},nodePermissions:(s,n)=>c.ignorePermissions||(!n.includes("r")||292&s.mode)&&(!n.includes("w")||146&s.mode)&&(!n.includes("x")||73&s.mode)?0:2,mayLookup:s=>{var n=c.nodePermissions(s,"x");return n||(s.node_ops.lookup?0:2)},mayCreate:(s,n)=>{try{return c.lookupNode(s,n),20}catch{}return c.nodePermissions(s,"wx")},mayDelete:(s,n,o)=>{var i;try{i=c.lookupNode(s,n)}catch(u){return u.errno}var l=c.nodePermissions(s,"wx");if(l)return l;if(o){if(!c.isDir(i.mode))return 54;if(c.isRoot(i)||c.getPath(i)===c.cwd())return 10}else if(c.isDir(i.mode))return 31;return 0},mayOpen:(s,n)=>s?c.isLink(s.mode)?32:c.isDir(s.mode)&&(c.flagsToPermissionString(n)!=="r"||512&n)?31:c.nodePermissions(s,c.flagsToPermissionString(n)):44,MAX_OPEN_FDS:4096,nextfd:(s=0,n=c.MAX_OPEN_FDS)=>{for(var o=s;o<=n;o++)if(!c.streams[o])return o;throw new c.ErrnoError(33)},getStream:s=>c.streams[s],createStream:(s,n,o)=>{c.FSStream||(c.FSStream=function(){this.shared={}},c.FSStream.prototype={},Object.defineProperties(c.FSStream.prototype,{object:{get:function(){return this.node},set:function(l){this.node=l}},isRead:{get:function(){return(2097155&this.flags)!=1}},isWrite:{get:function(){return!!(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(l){this.shared.flags=l}},position:{get:function(){return this.shared.position},set:function(l){this.shared.position=l}}})),s=Object.assign(new c.FSStream,s);var i=c.nextfd(n,o);return s.fd=i,c.streams[i]=s,s},closeStream:s=>{c.streams[s]=null},chrdev_stream_ops:{open:s=>{var n=c.getDevice(s.node.rdev);s.stream_ops=n.stream_ops,s.stream_ops.open&&s.stream_ops.open(s)},llseek:()=>{throw new c.ErrnoError(70)}},major:s=>s>>8,minor:s=>255&s,makedev:(s,n)=>s<<8|n,registerDevice:(s,n)=>{c.devices[s]={stream_ops:n}},getDevice:s=>c.devices[s],getMounts:s=>{for(var n=[],o=[s];o.length;){var i=o.pop();n.push(i),o.push.apply(o,i.mounts)}return n},syncfs:(s,n)=>{typeof s=="function"&&(n=s,s=!1),c.syncFSRequests++,c.syncFSRequests>1&&rt("warning: "+c.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var o=c.getMounts(c.root.mount),i=0;function l(I){return c.syncFSRequests--,n(I)}function u(I){if(I)return u.errored?void 0:(u.errored=!0,l(I));++i>=o.length&&l(null)}o.forEach(I=>{if(!I.type.syncfs)return u(null);I.type.syncfs(I,s,u)})},mount:(s,n,o)=>{var i,l=o==="/",u=!o;if(l&&c.root)throw new c.ErrnoError(10);if(!l&&!u){var I=c.lookupPath(o,{follow_mount:!1});if(o=I.path,i=I.node,c.isMountpoint(i))throw new c.ErrnoError(10);if(!c.isDir(i.mode))throw new c.ErrnoError(54)}var E={type:s,opts:n,mountpoint:o,mounts:[]},C=s.mount(E);return C.mount=E,E.root=C,l?c.root=C:i&&(i.mounted=E,i.mount&&i.mount.mounts.push(E)),C},unmount:s=>{var n=c.lookupPath(s,{follow_mount:!1});if(!c.isMountpoint(n.node))throw new c.ErrnoError(28);var o=n.node,i=o.mounted,l=c.getMounts(i);Object.keys(c.nameTable).forEach(I=>{for(var E=c.nameTable[I];E;){var C=E.name_next;l.includes(E.mount)&&c.destroyNode(E),E=C}}),o.mounted=null;var u=o.mount.mounts.indexOf(i);o.mount.mounts.splice(u,1)},lookup:(s,n)=>s.node_ops.lookup(s,n),mknod:(s,n,o)=>{var i=c.lookupPath(s,{parent:!0}).node,l=qe.basename(s);if(!l||l==="."||l==="..")throw new c.ErrnoError(28);var u=c.mayCreate(i,l);if(u)throw new c.ErrnoError(u);if(!i.node_ops.mknod)throw new c.ErrnoError(63);return i.node_ops.mknod(i,l,n,o)},create:(s,n)=>(n=n!==void 0?n:438,n&=4095,n|=32768,c.mknod(s,n,0)),mkdir:(s,n)=>(n=n!==void 0?n:511,n&=1023,n|=16384,c.mknod(s,n,0)),mkdirTree:(s,n)=>{for(var o=s.split("/"),i="",l=0;l<o.length;++l)if(o[l]){i+="/"+o[l];try{c.mkdir(i,n)}catch(u){if(u.errno!=20)throw u}}},mkdev:(s,n,o)=>(o===void 0&&(o=n,n=438),n|=8192,c.mknod(s,n,o)),symlink:(s,n)=>{if(!st.resolve(s))throw new c.ErrnoError(44);var o=c.lookupPath(n,{parent:!0}).node;if(!o)throw new c.ErrnoError(44);var i=qe.basename(n),l=c.mayCreate(o,i);if(l)throw new c.ErrnoError(l);if(!o.node_ops.symlink)throw new c.ErrnoError(63);return o.node_ops.symlink(o,i,s)},rename:(s,n)=>{var o,i,l=qe.dirname(s),u=qe.dirname(n),I=qe.basename(s),E=qe.basename(n);if(o=c.lookupPath(s,{parent:!0}).node,i=c.lookupPath(n,{parent:!0}).node,!o||!i)throw new c.ErrnoError(44);if(o.mount!==i.mount)throw new c.ErrnoError(75);var C,W=c.lookupNode(o,I),P=st.relative(s,u);if(P.charAt(0)!==".")throw new c.ErrnoError(28);if((P=st.relative(n,l)).charAt(0)!==".")throw new c.ErrnoError(55);try{C=c.lookupNode(i,E)}catch{}if(W!==C){var L=c.isDir(W.mode),M=c.mayDelete(o,I,L);if(M)throw new c.ErrnoError(M);if(M=C?c.mayDelete(i,E,L):c.mayCreate(i,E))throw new c.ErrnoError(M);if(!o.node_ops.rename)throw new c.ErrnoError(63);if(c.isMountpoint(W)||C&&c.isMountpoint(C))throw new c.ErrnoError(10);if(i!==o&&(M=c.nodePermissions(o,"w")))throw new c.ErrnoError(M);c.hashRemoveNode(W);try{o.node_ops.rename(W,i,E)}catch(Q){throw Q}finally{c.hashAddNode(W)}}},rmdir:s=>{var n=c.lookupPath(s,{parent:!0}).node,o=qe.basename(s),i=c.lookupNode(n,o),l=c.mayDelete(n,o,!0);if(l)throw new c.ErrnoError(l);if(!n.node_ops.rmdir)throw new c.ErrnoError(63);if(c.isMountpoint(i))throw new c.ErrnoError(10);n.node_ops.rmdir(n,o),c.destroyNode(i)},readdir:s=>{var n=c.lookupPath(s,{follow:!0}).node;if(!n.node_ops.readdir)throw new c.ErrnoError(54);return n.node_ops.readdir(n)},unlink:s=>{var n=c.lookupPath(s,{parent:!0}).node;if(!n)throw new c.ErrnoError(44);var o=qe.basename(s),i=c.lookupNode(n,o),l=c.mayDelete(n,o,!1);if(l)throw new c.ErrnoError(l);if(!n.node_ops.unlink)throw new c.ErrnoError(63);if(c.isMountpoint(i))throw new c.ErrnoError(10);n.node_ops.unlink(n,o),c.destroyNode(i)},readlink:s=>{var n=c.lookupPath(s).node;if(!n)throw new c.ErrnoError(44);if(!n.node_ops.readlink)throw new c.ErrnoError(28);return st.resolve(c.getPath(n.parent),n.node_ops.readlink(n))},stat:(s,n)=>{var o=c.lookupPath(s,{follow:!n}).node;if(!o)throw new c.ErrnoError(44);if(!o.node_ops.getattr)throw new c.ErrnoError(63);return o.node_ops.getattr(o)},lstat:s=>c.stat(s,!0),chmod:(s,n,o)=>{var i;if(!(i=typeof s=="string"?c.lookupPath(s,{follow:!o}).node:s).node_ops.setattr)throw new c.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&n|-4096&i.mode,timestamp:Date.now()})},lchmod:(s,n)=>{c.chmod(s,n,!0)},fchmod:(s,n)=>{var o=c.getStream(s);if(!o)throw new c.ErrnoError(8);c.chmod(o.node,n)},chown:(s,n,o,i)=>{var l;if(!(l=typeof s=="string"?c.lookupPath(s,{follow:!i}).node:s).node_ops.setattr)throw new c.ErrnoError(63);l.node_ops.setattr(l,{timestamp:Date.now()})},lchown:(s,n,o)=>{c.chown(s,n,o,!0)},fchown:(s,n,o)=>{var i=c.getStream(s);if(!i)throw new c.ErrnoError(8);c.chown(i.node,n,o)},truncate:(s,n)=>{if(n<0)throw new c.ErrnoError(28);var o;if(!(o=typeof s=="string"?c.lookupPath(s,{follow:!0}).node:s).node_ops.setattr)throw new c.ErrnoError(63);if(c.isDir(o.mode))throw new c.ErrnoError(31);if(!c.isFile(o.mode))throw new c.ErrnoError(28);var i=c.nodePermissions(o,"w");if(i)throw new c.ErrnoError(i);o.node_ops.setattr(o,{size:n,timestamp:Date.now()})},ftruncate:(s,n)=>{var o=c.getStream(s);if(!o)throw new c.ErrnoError(8);if(!(2097155&o.flags))throw new c.ErrnoError(28);c.truncate(o.node,n)},utime:(s,n,o)=>{var i=c.lookupPath(s,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(n,o)})},open:(s,n,o)=>{if(s==="")throw new c.ErrnoError(44);var i;if(o=o===void 0?438:o,o=64&(n=typeof n=="string"?c.modeStringToFlags(n):n)?4095&o|32768:0,typeof s=="object")i=s;else{s=qe.normalize(s);try{i=c.lookupPath(s,{follow:!(131072&n)}).node}catch{}}var l=!1;if(64&n)if(i){if(128&n)throw new c.ErrnoError(20)}else i=c.mknod(s,o,0),l=!0;if(!i)throw new c.ErrnoError(44);if(c.isChrdev(i.mode)&&(n&=-513),65536&n&&!c.isDir(i.mode))throw new c.ErrnoError(54);if(!l){var u=c.mayOpen(i,n);if(u)throw new c.ErrnoError(u)}512&n&&!l&&c.truncate(i,0),n&=-131713;var I=c.createStream({node:i,path:c.getPath(i),flags:n,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return I.stream_ops.open&&I.stream_ops.open(I),!t.logReadFiles||1&n||(c.readFiles||(c.readFiles={}),s in c.readFiles||(c.readFiles[s]=1)),I},close:s=>{if(c.isClosed(s))throw new c.ErrnoError(8);s.getdents&&(s.getdents=null);try{s.stream_ops.close&&s.stream_ops.close(s)}catch(n){throw n}finally{c.closeStream(s.fd)}s.fd=null},isClosed:s=>s.fd===null,llseek:(s,n,o)=>{if(c.isClosed(s))throw new c.ErrnoError(8);if(!s.seekable||!s.stream_ops.llseek)throw new c.ErrnoError(70);if(o!=0&&o!=1&&o!=2)throw new c.ErrnoError(28);return s.position=s.stream_ops.llseek(s,n,o),s.ungotten=[],s.position},read:(s,n,o,i,l)=>{if(i<0||l<0)throw new c.ErrnoError(28);if(c.isClosed(s))throw new c.ErrnoError(8);if((2097155&s.flags)==1)throw new c.ErrnoError(8);if(c.isDir(s.node.mode))throw new c.ErrnoError(31);if(!s.stream_ops.read)throw new c.ErrnoError(28);var u=l!==void 0;if(u){if(!s.seekable)throw new c.ErrnoError(70)}else l=s.position;var I=s.stream_ops.read(s,n,o,i,l);return u||(s.position+=I),I},write:(s,n,o,i,l,u)=>{if(i<0||l<0)throw new c.ErrnoError(28);if(c.isClosed(s))throw new c.ErrnoError(8);if(!(2097155&s.flags))throw new c.ErrnoError(8);if(c.isDir(s.node.mode))throw new c.ErrnoError(31);if(!s.stream_ops.write)throw new c.ErrnoError(28);s.seekable&&1024&s.flags&&c.llseek(s,0,2);var I=l!==void 0;if(I){if(!s.seekable)throw new c.ErrnoError(70)}else l=s.position;var E=s.stream_ops.write(s,n,o,i,l,u);return I||(s.position+=E),E},allocate:(s,n,o)=>{if(c.isClosed(s))throw new c.ErrnoError(8);if(n<0||o<=0)throw new c.ErrnoError(28);if(!(2097155&s.flags))throw new c.ErrnoError(8);if(!c.isFile(s.node.mode)&&!c.isDir(s.node.mode))throw new c.ErrnoError(43);if(!s.stream_ops.allocate)throw new c.ErrnoError(138);s.stream_ops.allocate(s,n,o)},mmap:(s,n,o,i,l)=>{if(2&i&&!(2&l)&&(2097155&s.flags)!=2)throw new c.ErrnoError(2);if((2097155&s.flags)==1)throw new c.ErrnoError(2);if(!s.stream_ops.mmap)throw new c.ErrnoError(43);return s.stream_ops.mmap(s,n,o,i,l)},msync:(s,n,o,i,l)=>s.stream_ops.msync?s.stream_ops.msync(s,n,o,i,l):0,munmap:s=>0,ioctl:(s,n,o)=>{if(!s.stream_ops.ioctl)throw new c.ErrnoError(59);return s.stream_ops.ioctl(s,n,o)},readFile:(s,n={})=>{if(n.flags=n.flags||0,n.encoding=n.encoding||"binary",n.encoding!=="utf8"&&n.encoding!=="binary")throw new Error('Invalid encoding type "'+n.encoding+'"');var o,i=c.open(s,n.flags),l=c.stat(s).size,u=new Uint8Array(l);return c.read(i,u,0,l,0),n.encoding==="utf8"?o=ht(u,0):n.encoding==="binary"&&(o=u),c.close(i),o},writeFile:(s,n,o={})=>{o.flags=o.flags||577;var i=c.open(s,o.flags,o.mode);if(typeof n=="string"){var l=new Uint8Array(Tt(n)+1),u=Dt(n,l,0,l.length);c.write(i,l,0,u,void 0,o.canOwn)}else{if(!ArrayBuffer.isView(n))throw new Error("Unsupported data type");c.write(i,n,0,n.byteLength,void 0,o.canOwn)}c.close(i)},cwd:()=>c.currentPath,chdir:s=>{var n=c.lookupPath(s,{follow:!0});if(n.node===null)throw new c.ErrnoError(44);if(!c.isDir(n.node.mode))throw new c.ErrnoError(54);var o=c.nodePermissions(n.node,"x");if(o)throw new c.ErrnoError(o);c.currentPath=n.path},createDefaultDirectories:()=>{c.mkdir("/tmp"),c.mkdir("/home"),c.mkdir("/home/web_user")},createDefaultDevices:()=>{c.mkdir("/dev"),c.registerDevice(c.makedev(1,3),{read:()=>0,write:(n,o,i,l,u)=>l}),c.mkdev("/dev/null",c.makedev(1,3)),pt.register(c.makedev(5,0),pt.default_tty_ops),pt.register(c.makedev(6,0),pt.default_tty1_ops),c.mkdev("/dev/tty",c.makedev(5,0)),c.mkdev("/dev/tty1",c.makedev(6,0));var s=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}return()=>wt("randomDevice")}();c.createDevice("/dev","random",s),c.createDevice("/dev","urandom",s),c.mkdir("/dev/shm"),c.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{c.mkdir("/proc");var s=c.mkdir("/proc/self");c.mkdir("/proc/self/fd"),c.mount({mount:()=>{var n=c.createNode(s,"fd",16895,73);return n.node_ops={lookup:(o,i)=>{var l=+i,u=c.getStream(l);if(!u)throw new c.ErrnoError(8);var I={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>u.path}};return I.parent=I,I}},n}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?c.createDevice("/dev","stdin",t.stdin):c.symlink("/dev/tty","/dev/stdin"),t.stdout?c.createDevice("/dev","stdout",null,t.stdout):c.symlink("/dev/tty","/dev/stdout"),t.stderr?c.createDevice("/dev","stderr",null,t.stderr):c.symlink("/dev/tty1","/dev/stderr"),c.open("/dev/stdin",0),c.open("/dev/stdout",1),c.open("/dev/stderr",1)},ensureErrnoError:()=>{c.ErrnoError||(c.ErrnoError=function(s,n){this.node=n,this.setErrno=function(o){this.errno=o},this.setErrno(s),this.message="FS error"},c.ErrnoError.prototype=new Error,c.ErrnoError.prototype.constructor=c.ErrnoError,[44].forEach(s=>{c.genericErrors[s]=new c.ErrnoError(s),c.genericErrors[s].stack="<generic error, no stack>"}))},staticInit:()=>{c.ensureErrnoError(),c.nameTable=new Array(4096),c.mount(ge,{},"/"),c.createDefaultDirectories(),c.createDefaultDevices(),c.createSpecialDirectories(),c.filesystems={MEMFS:ge}},init:(s,n,o)=>{c.init.initialized=!0,c.ensureErrnoError(),t.stdin=s||t.stdin,t.stdout=n||t.stdout,t.stderr=o||t.stderr,c.createStandardStreams()},quit:()=>{c.init.initialized=!1;for(var s=0;s<c.streams.length;s++){var n=c.streams[s];n&&c.close(n)}},getMode:(s,n)=>{var o=0;return s&&(o|=365),n&&(o|=146),o},findObject:(s,n)=>{var o=c.analyzePath(s,n);return o.exists?o.object:null},analyzePath:(s,n)=>{try{s=(i=c.lookupPath(s,{follow:!n})).path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=c.lookupPath(s,{parent:!0});o.parentExists=!0,o.parentPath=i.path,o.parentObject=i.node,o.name=qe.basename(s),i=c.lookupPath(s,{follow:!n}),o.exists=!0,o.path=i.path,o.object=i.node,o.name=i.node.name,o.isRoot=i.path==="/"}catch(l){o.error=l.errno}return o},createPath:(s,n,o,i)=>{s=typeof s=="string"?s:c.getPath(s);for(var l=n.split("/").reverse();l.length;){var u=l.pop();if(u){var I=qe.join2(s,u);try{c.mkdir(I)}catch{}s=I}}return I},createFile:(s,n,o,i,l)=>{var u=qe.join2(typeof s=="string"?s:c.getPath(s),n),I=c.getMode(i,l);return c.create(u,I)},createDataFile:(s,n,o,i,l,u)=>{var I=n;s&&(s=typeof s=="string"?s:c.getPath(s),I=n?qe.join2(s,n):s);var E=c.getMode(i,l),C=c.create(I,E);if(o){if(typeof o=="string"){for(var W=new Array(o.length),P=0,L=o.length;P<L;++P)W[P]=o.charCodeAt(P);o=W}c.chmod(C,146|E);var M=c.open(C,577);c.write(M,o,0,o.length,0,u),c.close(M),c.chmod(C,E)}return C},createDevice:(s,n,o,i)=>{var l=qe.join2(typeof s=="string"?s:c.getPath(s),n),u=c.getMode(!!o,!!i);c.createDevice.major||(c.createDevice.major=64);var I=c.makedev(c.createDevice.major++,0);return c.registerDevice(I,{open:E=>{E.seekable=!1},close:E=>{i&&i.buffer&&i.buffer.length&&i(10)},read:(E,C,W,P,L)=>{for(var M=0,Q=0;Q<P;Q++){var $;try{$=o()}catch{throw new c.ErrnoError(29)}if($===void 0&&M===0)throw new c.ErrnoError(6);if($==null)break;M++,C[W+Q]=$}return M&&(E.node.timestamp=Date.now()),M},write:(E,C,W,P,L)=>{for(var M=0;M<P;M++)try{i(C[W+M])}catch{throw new c.ErrnoError(29)}return P&&(E.node.timestamp=Date.now()),M}}),c.mkdev(l,u,I)},forceLoadFile:s=>{if(s.isDevice||s.isFolder||s.link||s.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!X)throw new Error("Cannot load without read() or XMLHttpRequest.");try{s.contents=dn(X(s.url)),s.usedBytes=s.contents.length}catch{throw new c.ErrnoError(29)}},createLazyFile:(s,n,o,i,l)=>{function u(){this.lengthKnown=!1,this.chunks=[]}if(u.prototype.get=function(L){if(!(L>this.length-1||L<0)){var M=L%this.chunkSize,Q=L/this.chunkSize|0;return this.getter(Q)[M]}},u.prototype.setDataGetter=function(L){this.getter=L},u.prototype.cacheLength=function(){var L=new XMLHttpRequest;if(L.open("HEAD",o,!1),L.send(null),!(L.status>=200&&L.status<300||L.status===304))throw new Error("Couldn't load "+o+". Status: "+L.status);var M,Q=Number(L.getResponseHeader("Content-length")),$=(M=L.getResponseHeader("Accept-Ranges"))&&M==="bytes",k=(M=L.getResponseHeader("Content-Encoding"))&&M==="gzip",T=1048576;$||(T=Q);var z=this;z.setDataGetter(R=>{var U=R*T,A=(R+1)*T-1;if(A=Math.min(A,Q-1),z.chunks[R]===void 0&&(z.chunks[R]=((K,g)=>{if(K>g)throw new Error("invalid range ("+K+", "+g+") or no bytes requested!");if(g>Q-1)throw new Error("only "+Q+" bytes available! programmer error!");var h=new XMLHttpRequest;if(h.open("GET",o,!1),Q!==T&&h.setRequestHeader("Range","bytes="+K+"-"+g),h.responseType="arraybuffer",h.overrideMimeType&&h.overrideMimeType("text/plain; charset=x-user-defined"),h.send(null),!(h.status>=200&&h.status<300||h.status===304))throw new Error("Couldn't load "+o+". Status: "+h.status);return h.response!==void 0?new Uint8Array(h.response||[]):dn(h.responseText||"")})(U,A)),z.chunks[R]===void 0)throw new Error("doXHR failed!");return z.chunks[R]}),!k&&Q||(T=Q=1,Q=this.getter(0).length,T=Q,ut("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Q,this._chunkSize=T,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!He)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var I=new u;Object.defineProperties(I,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var E={isDevice:!1,contents:I}}else E={isDevice:!1,url:o};var C=c.createFile(s,n,E,i,l);E.contents?C.contents=E.contents:E.url&&(C.contents=null,C.url=E.url),Object.defineProperties(C,{usedBytes:{get:function(){return this.contents.length}}});var W={};function P(L,M,Q,$,k){var T=L.node.contents;if(k>=T.length)return 0;var z=Math.min(T.length-k,$);if(T.slice)for(var R=0;R<z;R++)M[Q+R]=T[k+R];else for(R=0;R<z;R++)M[Q+R]=T.get(k+R);return z}return Object.keys(C.stream_ops).forEach(L=>{var M=C.stream_ops[L];W[L]=function(){return c.forceLoadFile(C),M.apply(null,arguments)}}),W.read=(L,M,Q,$,k)=>(c.forceLoadFile(C),P(L,M,Q,$,k)),W.mmap=(L,M,Q,$,k)=>{c.forceLoadFile(C);var T=Yn(M);if(!T)throw new c.ErrnoError(48);return P(L,Ve,T,M,Q),{ptr:T,allocated:!0}},C.stream_ops=W,C},createPreloadedFile:(s,n,o,i,l,u,I,E,C,W)=>{var P=n?st.resolve(qe.join2(s,n)):s;function L(M){function Q($){W&&W(),E||c.createDataFile(s,n,$,i,l,C),u&&u(),Mt()}Browser.handledByPreloadPlugin(M,P,Q,()=>{I&&I(),Mt()})||Q(M)}cn(),typeof o=="string"?kr(o,M=>L(M),I):L(o)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(s,n,o)=>{n=n||(()=>{}),o=o||(()=>{});var i=c.indexedDB();try{var l=i.open(c.DB_NAME(),c.DB_VERSION)}catch(u){return o(u)}l.onupgradeneeded=()=>{ut("creating db"),l.result.createObjectStore(c.DB_STORE_NAME)},l.onsuccess=()=>{var u=l.result.transaction([c.DB_STORE_NAME],"readwrite"),I=u.objectStore(c.DB_STORE_NAME),E=0,C=0,W=s.length;function P(){C==0?n():o()}s.forEach(L=>{var M=I.put(c.analyzePath(L).object.contents,L);M.onsuccess=()=>{++E+C==W&&P()},M.onerror=()=>{C++,E+C==W&&P()}}),u.onerror=o},l.onerror=o},loadFilesFromDB:(s,n,o)=>{n=n||(()=>{}),o=o||(()=>{});var i=c.indexedDB();try{var l=i.open(c.DB_NAME(),c.DB_VERSION)}catch(u){return o(u)}l.onupgradeneeded=o,l.onsuccess=()=>{var u=l.result;try{var I=u.transaction([c.DB_STORE_NAME],"readonly")}catch(M){return void o(M)}var E=I.objectStore(c.DB_STORE_NAME),C=0,W=0,P=s.length;function L(){W==0?n():o()}s.forEach(M=>{var Q=E.get(M);Q.onsuccess=()=>{c.analyzePath(M).exists&&c.unlink(M),c.createDataFile(qe.dirname(M),qe.basename(M),Q.result,!0,!0,!0),++C+W==P&&L()},Q.onerror=()=>{W++,C+W==P&&L()}}),I.onerror=o},l.onerror=o}},ue={DEFAULT_POLLMASK:5,calculateAt:function(s,n,o){if(qe.isAbs(n))return n;var i;if(i=s===-100?c.cwd():ue.getStreamFromFD(s).path,n.length==0){if(!o)throw new c.ErrnoError(44);return i}return qe.join2(i,n)},doStat:function(s,n,o){try{var i=s(n)}catch(E){if(E&&E.node&&qe.normalize(n)!==qe.normalize(c.getPath(E.node)))return-54;throw E}be[o>>2]=i.dev,be[o+8>>2]=i.ino,be[o+12>>2]=i.mode,Re[o+16>>2]=i.nlink,be[o+20>>2]=i.uid,be[o+24>>2]=i.gid,be[o+28>>2]=i.rdev,Be=[i.size>>>0,(we=i.size,+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],be[o+40>>2]=Be[0],be[o+44>>2]=Be[1],be[o+48>>2]=4096,be[o+52>>2]=i.blocks;var l=i.atime.getTime(),u=i.mtime.getTime(),I=i.ctime.getTime();return Be=[Math.floor(l/1e3)>>>0,(we=Math.floor(l/1e3),+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],be[o+56>>2]=Be[0],be[o+60>>2]=Be[1],Re[o+64>>2]=l%1e3*1e3,Be=[Math.floor(u/1e3)>>>0,(we=Math.floor(u/1e3),+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],be[o+72>>2]=Be[0],be[o+76>>2]=Be[1],Re[o+80>>2]=u%1e3*1e3,Be=[Math.floor(I/1e3)>>>0,(we=Math.floor(I/1e3),+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],be[o+88>>2]=Be[0],be[o+92>>2]=Be[1],Re[o+96>>2]=I%1e3*1e3,Be=[i.ino>>>0,(we=i.ino,+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],be[o+104>>2]=Be[0],be[o+108>>2]=Be[1],0},doMsync:function(s,n,o,i,l){if(!c.isFile(n.node.mode))throw new c.ErrnoError(43);if(2&i)return 0;var u=bt.slice(s,s+o);c.msync(n,u,l,o,i)},varargs:void 0,get:function(){return ue.varargs+=4,be[ue.varargs-4>>2]},getStr:function(s){var n=function(o,i){return o?ht(bt,o,i):""}(s);return n},getStreamFromFD:function(s){var n=c.getStream(s);if(!n)throw new c.ErrnoError(8);return n}};function Zn(s){return s<-9007199254740992||s>9007199254740992?NaN:Number(s)}function pn(s){return Re[s>>2]+4294967296*be[s+4>>2]}var er,Fr=[0,31,60,91,121,152,182,213,244,274,305,335],Or=[0,31,59,90,120,151,181,212,243,273,304,334];function tr(s){var n=Tt(s)+1,o=ir(n);return o&&Dt(s,Ve,o,n),o}function Pr(s){var n=nt.buffer;try{return nt.grow(s-n.byteLength+65535>>>16),Gn(),1}catch{}}er=()=>performance.now();var fn={};function Ft(){if(!Ft.strings){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Ke||"./this.program"};for(var n in fn)fn[n]===void 0?delete s[n]:s[n]=fn[n];var o=[];for(var n in s)o.push(n+"="+s[n]);Ft.strings=o}return Ft.strings}var nr=function(s,n,o,i){s||(s=this),this.parent=s,this.mount=s.mount,this.mounted=null,this.id=c.nextInode++,this.name=n,this.mode=o,this.node_ops={},this.stream_ops={},this.rdev=i},gn=365,mn=146;Object.defineProperties(nr.prototype,{read:{get:function(){return(this.mode&gn)===gn},set:function(s){s?this.mode|=gn:this.mode&=-366}},write:{get:function(){return(this.mode&mn)===mn},set:function(s){s?this.mode|=mn:this.mode&=-147}},isFolder:{get:function(){return c.isDir(this.mode)}},isDevice:{get:function(){return c.isChrdev(this.mode)}}}),c.FSNode=nr,c.staticInit();var rr={__syscall_chmod:function(s,n){try{return s=ue.getStr(s),c.chmod(s,n),0}catch(o){if(c===void 0||!(o instanceof c.ErrnoError))throw o;return-o.errno}},__syscall_faccessat:function(s,n,o,i){try{if(n=ue.getStr(n),n=ue.calculateAt(s,n),-8&o)return-28;var l=c.lookupPath(n,{follow:!0}).node;if(!l)return-44;var u="";return 4&o&&(u+="r"),2&o&&(u+="w"),1&o&&(u+="x"),u&&c.nodePermissions(l,u)?-2:0}catch(I){if(c===void 0||!(I instanceof c.ErrnoError))throw I;return-I.errno}},__syscall_fchmod:function(s,n){try{return c.fchmod(s,n),0}catch(o){if(c===void 0||!(o instanceof c.ErrnoError))throw o;return-o.errno}},__syscall_fchown32:function(s,n,o){try{return c.fchown(s,n,o),0}catch(i){if(c===void 0||!(i instanceof c.ErrnoError))throw i;return-i.errno}},__syscall_fcntl64:function(s,n,o){ue.varargs=o;try{var i=ue.getStreamFromFD(s);switch(n){case 0:return(l=ue.get())<0?-28:c.createStream(i,l).fd;case 1:case 2:case 6:case 7:return 0;case 3:return i.flags;case 4:var l=ue.get();return i.flags|=l,0;case 5:return l=ue.get(),zn[l+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return u=28,be[sr()>>2]=u,-1}}catch(I){if(c===void 0||!(I instanceof c.ErrnoError))throw I;return-I.errno}var u},__syscall_fstat64:function(s,n){try{var o=ue.getStreamFromFD(s);return ue.doStat(c.stat,o.path,n)}catch(i){if(c===void 0||!(i instanceof c.ErrnoError))throw i;return-i.errno}},__syscall_ftruncate64:function(s,n){try{return n=Zn(n),isNaN(n)?-61:(c.ftruncate(s,n),0)}catch(o){if(c===void 0||!(o instanceof c.ErrnoError))throw o;return-o.errno}},__syscall_getcwd:function(s,n){try{if(n===0)return-28;var o=c.cwd(),i=Tt(o)+1;return n<i?-68:(Wn(o,s,n),i)}catch(l){if(c===void 0||!(l instanceof c.ErrnoError))throw l;return-l.errno}},__syscall_ioctl:function(s,n,o){ue.varargs=o;try{var i=ue.getStreamFromFD(s);switch(n){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return i.tty?0:-59;case 21519:if(!i.tty)return-59;var l=ue.get();return be[l>>2]=0,0;case 21520:return i.tty?-28:-59;case 21531:return l=ue.get(),c.ioctl(i,n,l);default:return-28}}catch(u){if(c===void 0||!(u instanceof c.ErrnoError))throw u;return-u.errno}},__syscall_lstat64:function(s,n){try{return s=ue.getStr(s),ue.doStat(c.lstat,s,n)}catch(o){if(c===void 0||!(o instanceof c.ErrnoError))throw o;return-o.errno}},__syscall_mkdirat:function(s,n,o){try{return n=ue.getStr(n),n=ue.calculateAt(s,n),(n=qe.normalize(n))[n.length-1]==="/"&&(n=n.substr(0,n.length-1)),c.mkdir(n,o,0),0}catch(i){if(c===void 0||!(i instanceof c.ErrnoError))throw i;return-i.errno}},__syscall_newfstatat:function(s,n,o,i){try{n=ue.getStr(n);var l=256&i,u=4096&i;return i&=-6401,n=ue.calculateAt(s,n,u),ue.doStat(l?c.lstat:c.stat,n,o)}catch(I){if(c===void 0||!(I instanceof c.ErrnoError))throw I;return-I.errno}},__syscall_openat:function(s,n,o,i){ue.varargs=i;try{n=ue.getStr(n),n=ue.calculateAt(s,n);var l=i?ue.get():0;return c.open(n,o,l).fd}catch(u){if(c===void 0||!(u instanceof c.ErrnoError))throw u;return-u.errno}},__syscall_readlinkat:function(s,n,o,i){try{if(n=ue.getStr(n),n=ue.calculateAt(s,n),i<=0)return-28;var l=c.readlink(n),u=Math.min(i,Tt(l)),I=Ve[o+u];return Wn(l,o,i+1),Ve[o+u]=I,u}catch(E){if(c===void 0||!(E instanceof c.ErrnoError))throw E;return-E.errno}},__syscall_rmdir:function(s){try{return s=ue.getStr(s),c.rmdir(s),0}catch(n){if(c===void 0||!(n instanceof c.ErrnoError))throw n;return-n.errno}},__syscall_stat64:function(s,n){try{return s=ue.getStr(s),ue.doStat(c.stat,s,n)}catch(o){if(c===void 0||!(o instanceof c.ErrnoError))throw o;return-o.errno}},__syscall_unlinkat:function(s,n,o){try{return n=ue.getStr(n),n=ue.calculateAt(s,n),o===0?c.unlink(n):o===512?c.rmdir(n):wt("Invalid flags passed to unlinkat"),0}catch(i){if(c===void 0||!(i instanceof c.ErrnoError))throw i;return-i.errno}},__syscall_utimensat:function(s,n,o,i){try{if(n=ue.getStr(n),n=ue.calculateAt(s,n,!0),o){var l=pn(o),u=be[o+8>>2];I=1e3*l+u/1e6,E=1e3*(l=pn(o+=16))+(u=be[o+8>>2])/1e6}else var I=Date.now(),E=I;return c.utime(n,I,E),0}catch(C){if(c===void 0||!(C instanceof c.ErrnoError))throw C;return-C.errno}},_emscripten_get_now_is_monotonic:function(){return!0},_localtime_js:function(s,n){var o=new Date(1e3*pn(s));be[n>>2]=o.getSeconds(),be[n+4>>2]=o.getMinutes(),be[n+8>>2]=o.getHours(),be[n+12>>2]=o.getDate(),be[n+16>>2]=o.getMonth(),be[n+20>>2]=o.getFullYear()-1900,be[n+24>>2]=o.getDay();var i=0|function(C){var W;return((W=C.getFullYear())%4!=0||W%100==0&&W%400!=0?Or:Fr)[C.getMonth()]+C.getDate()-1}(o);be[n+28>>2]=i,be[n+36>>2]=-60*o.getTimezoneOffset();var l=new Date(o.getFullYear(),0,1),u=new Date(o.getFullYear(),6,1).getTimezoneOffset(),I=l.getTimezoneOffset(),E=0|(u!=I&&o.getTimezoneOffset()==Math.min(I,u));be[n+32>>2]=E},_mmap_js:function(s,n,o,i,l,u,I){try{var E=ue.getStreamFromFD(i),C=c.mmap(E,s,l,n,o),W=C.ptr;return be[u>>2]=C.allocated,Re[I>>2]=W,0}catch(P){if(c===void 0||!(P instanceof c.ErrnoError))throw P;return-P.errno}},_munmap_js:function(s,n,o,i,l,u){try{var I=ue.getStreamFromFD(l);2&o&&ue.doMsync(s,I,n,i,u)}catch(E){if(c===void 0||!(E instanceof c.ErrnoError))throw E;return-E.errno}},_tzset_js:function(s,n,o){var i=new Date().getFullYear(),l=new Date(i,0,1),u=new Date(i,6,1),I=l.getTimezoneOffset(),E=u.getTimezoneOffset(),C=Math.max(I,E);function W($){var k=$.toTimeString().match(/\(([A-Za-z ]+)\)$/);return k?k[1]:"GMT"}Re[s>>2]=60*C,be[n>>2]=+(I!=E);var P=W(l),L=W(u),M=tr(P),Q=tr(L);E<I?(Re[o>>2]=M,Re[o+4>>2]=Q):(Re[o>>2]=Q,Re[o+4>>2]=M)},emscripten_date_now:function(){return Date.now()},emscripten_get_now:er,emscripten_resize_heap:function(s){var n,o,i=bt.length,l=2147483648;if((s>>>=0)>l)return!1;for(var u=1;u<=4;u*=2){var I=i*(1+.2/u);if(I=Math.min(I,s+100663296),Pr(Math.min(l,(n=Math.max(s,I))+((o=65536)-n%o)%o)))return!0}return!1},environ_get:function(s,n){var o=0;return Ft().forEach(function(i,l){var u=n+o;Re[s+4*l>>2]=u,function(I,E){for(var C=0;C<I.length;++C)Ve[0|E++]=I.charCodeAt(C);Ve[0|E]=0}(i,u),o+=i.length+1}),0},environ_sizes_get:function(s,n){var o=Ft();Re[s>>2]=o.length;var i=0;return o.forEach(function(l){i+=l.length+1}),Re[n>>2]=i,0},fd_close:function(s){try{var n=ue.getStreamFromFD(s);return c.close(n),0}catch(o){if(c===void 0||!(o instanceof c.ErrnoError))throw o;return o.errno}},fd_fdstat_get:function(s,n){try{var o=ue.getStreamFromFD(s),i=o.tty?2:c.isDir(o.mode)?3:c.isLink(o.mode)?7:4;return Ve[0|n]=i,0}catch(l){if(c===void 0||!(l instanceof c.ErrnoError))throw l;return l.errno}},fd_read:function(s,n,o,i){try{var l=function(u,I,E,C){for(var W=0,P=0;P<E;P++){var L=Re[I>>2],M=Re[I+4>>2];I+=8;var Q=c.read(u,Ve,L,M,C);if(Q<0)return-1;if(W+=Q,Q<M)break}return W}(ue.getStreamFromFD(s),n,o);return Re[i>>2]=l,0}catch(u){if(c===void 0||!(u instanceof c.ErrnoError))throw u;return u.errno}},fd_seek:function(s,n,o,i){try{if(n=Zn(n),isNaN(n))return 61;var l=ue.getStreamFromFD(s);return c.llseek(l,n,o),Be=[l.position>>>0,(we=l.position,+Math.abs(we)>=1?we>0?(0|Math.min(+Math.floor(we/4294967296),4294967295))>>>0:~~+Math.ceil((we-+(~~we>>>0))/4294967296)>>>0:0)],be[i>>2]=Be[0],be[i+4>>2]=Be[1],l.getdents&&n===0&&o===0&&(l.getdents=null),0}catch(u){if(c===void 0||!(u instanceof c.ErrnoError))throw u;return u.errno}},fd_sync:function(s){try{var n=ue.getStreamFromFD(s);return n.stream_ops&&n.stream_ops.fsync?n.stream_ops.fsync(n):0}catch(o){if(c===void 0||!(o instanceof c.ErrnoError))throw o;return o.errno}},fd_write:function(s,n,o,i){try{var l=function(u,I,E,C){for(var W=0,P=0;P<E;P++){var L=Re[I>>2],M=Re[I+4>>2];I+=8;var Q=c.write(u,Ve,L,M,C);if(Q<0)return-1;W+=Q}return W}(ue.getStreamFromFD(s),n,o);return Re[i>>2]=l,0}catch(u){if(c===void 0||!(u instanceof c.ErrnoError))throw u;return u.errno}},memory:nt};(function(){var s={env:rr,wasi_snapshot_preview1:rr};function n(l,u){var I,E=l.exports;t.asm=E,I=t.asm.__wasm_call_ctors,$n.unshift(I),Mt()}function o(l){n(l.instance)}function i(l){return(tt||!et&&!He||typeof fetch!="function"?Promise.resolve().then(function(){return Xn(Ze)}):fetch(Ze,{credentials:"same-origin"}).then(function(u){if(!u.ok)throw"failed to load wasm binary file at '"+Ze+"'";return u.arrayBuffer()}).catch(function(){return Xn(Ze)})).then(function(u){return WebAssembly.instantiate(u,s)}).then(function(u){return u}).then(l,function(u){rt("failed to asynchronously prepare wasm: "+u),wt(u)})}if(cn(),t.instantiateWasm)try{return t.instantiateWasm(s,n)}catch(l){rt("Module.instantiateWasm callback failed with error: "+l),r(l)}(tt||typeof WebAssembly.instantiateStreaming!="function"||Jn(Ze)||typeof fetch!="function"?i(o):fetch(Ze,{credentials:"same-origin"}).then(function(l){return WebAssembly.instantiateStreaming(l,s).then(o,function(u){return rt("wasm streaming compile failed: "+u),rt("falling back to ArrayBuffer instantiation"),i(o)})})).catch(r)})(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},t._sqlite3_status64=function(){return(t._sqlite3_status64=t.asm.sqlite3_status64).apply(null,arguments)},t._sqlite3_status=function(){return(t._sqlite3_status=t.asm.sqlite3_status).apply(null,arguments)},t._sqlite3_db_status=function(){return(t._sqlite3_db_status=t.asm.sqlite3_db_status).apply(null,arguments)},t._sqlite3_msize=function(){return(t._sqlite3_msize=t.asm.sqlite3_msize).apply(null,arguments)},t._sqlite3_vfs_find=function(){return(t._sqlite3_vfs_find=t.asm.sqlite3_vfs_find).apply(null,arguments)},t._sqlite3_initialize=function(){return(t._sqlite3_initialize=t.asm.sqlite3_initialize).apply(null,arguments)},t._sqlite3_malloc=function(){return(t._sqlite3_malloc=t.asm.sqlite3_malloc).apply(null,arguments)},t._sqlite3_free=function(){return(t._sqlite3_free=t.asm.sqlite3_free).apply(null,arguments)},t._sqlite3_vfs_register=function(){return(t._sqlite3_vfs_register=t.asm.sqlite3_vfs_register).apply(null,arguments)},t._sqlite3_vfs_unregister=function(){return(t._sqlite3_vfs_unregister=t.asm.sqlite3_vfs_unregister).apply(null,arguments)},t._sqlite3_malloc64=function(){return(t._sqlite3_malloc64=t.asm.sqlite3_malloc64).apply(null,arguments)},t._sqlite3_realloc=function(){return(t._sqlite3_realloc=t.asm.sqlite3_realloc).apply(null,arguments)},t._sqlite3_realloc64=function(){return(t._sqlite3_realloc64=t.asm.sqlite3_realloc64).apply(null,arguments)},t._sqlite3_value_text=function(){return(t._sqlite3_value_text=t.asm.sqlite3_value_text).apply(null,arguments)},t._sqlite3_randomness=function(){return(t._sqlite3_randomness=t.asm.sqlite3_randomness).apply(null,arguments)},t._sqlite3_stricmp=function(){return(t._sqlite3_stricmp=t.asm.sqlite3_stricmp).apply(null,arguments)},t._sqlite3_strnicmp=function(){return(t._sqlite3_strnicmp=t.asm.sqlite3_strnicmp).apply(null,arguments)},t._sqlite3_uri_parameter=function(){return(t._sqlite3_uri_parameter=t.asm.sqlite3_uri_parameter).apply(null,arguments)};var sr=t.___errno_location=function(){return(sr=t.___errno_location=t.asm.__errno_location).apply(null,arguments)};t._sqlite3_uri_boolean=function(){return(t._sqlite3_uri_boolean=t.asm.sqlite3_uri_boolean).apply(null,arguments)},t._sqlite3_serialize=function(){return(t._sqlite3_serialize=t.asm.sqlite3_serialize).apply(null,arguments)},t._sqlite3_prepare_v2=function(){return(t._sqlite3_prepare_v2=t.asm.sqlite3_prepare_v2).apply(null,arguments)},t._sqlite3_step=function(){return(t._sqlite3_step=t.asm.sqlite3_step).apply(null,arguments)},t._sqlite3_column_int64=function(){return(t._sqlite3_column_int64=t.asm.sqlite3_column_int64).apply(null,arguments)},t._sqlite3_reset=function(){return(t._sqlite3_reset=t.asm.sqlite3_reset).apply(null,arguments)},t._sqlite3_exec=function(){return(t._sqlite3_exec=t.asm.sqlite3_exec).apply(null,arguments)},t._sqlite3_column_int=function(){return(t._sqlite3_column_int=t.asm.sqlite3_column_int).apply(null,arguments)},t._sqlite3_finalize=function(){return(t._sqlite3_finalize=t.asm.sqlite3_finalize).apply(null,arguments)},t._sqlite3_file_control=function(){return(t._sqlite3_file_control=t.asm.sqlite3_file_control).apply(null,arguments)},t._sqlite3_column_name=function(){return(t._sqlite3_column_name=t.asm.sqlite3_column_name).apply(null,arguments)},t._sqlite3_column_text=function(){return(t._sqlite3_column_text=t.asm.sqlite3_column_text).apply(null,arguments)},t._sqlite3_column_type=function(){return(t._sqlite3_column_type=t.asm.sqlite3_column_type).apply(null,arguments)},t._sqlite3_errmsg=function(){return(t._sqlite3_errmsg=t.asm.sqlite3_errmsg).apply(null,arguments)},t._sqlite3_deserialize=function(){return(t._sqlite3_deserialize=t.asm.sqlite3_deserialize).apply(null,arguments)},t._sqlite3_clear_bindings=function(){return(t._sqlite3_clear_bindings=t.asm.sqlite3_clear_bindings).apply(null,arguments)},t._sqlite3_value_blob=function(){return(t._sqlite3_value_blob=t.asm.sqlite3_value_blob).apply(null,arguments)},t._sqlite3_value_bytes=function(){return(t._sqlite3_value_bytes=t.asm.sqlite3_value_bytes).apply(null,arguments)},t._sqlite3_value_double=function(){return(t._sqlite3_value_double=t.asm.sqlite3_value_double).apply(null,arguments)},t._sqlite3_value_int=function(){return(t._sqlite3_value_int=t.asm.sqlite3_value_int).apply(null,arguments)},t._sqlite3_value_int64=function(){return(t._sqlite3_value_int64=t.asm.sqlite3_value_int64).apply(null,arguments)},t._sqlite3_value_subtype=function(){return(t._sqlite3_value_subtype=t.asm.sqlite3_value_subtype).apply(null,arguments)},t._sqlite3_value_pointer=function(){return(t._sqlite3_value_pointer=t.asm.sqlite3_value_pointer).apply(null,arguments)},t._sqlite3_value_type=function(){return(t._sqlite3_value_type=t.asm.sqlite3_value_type).apply(null,arguments)},t._sqlite3_value_nochange=function(){return(t._sqlite3_value_nochange=t.asm.sqlite3_value_nochange).apply(null,arguments)},t._sqlite3_value_frombind=function(){return(t._sqlite3_value_frombind=t.asm.sqlite3_value_frombind).apply(null,arguments)},t._sqlite3_value_dup=function(){return(t._sqlite3_value_dup=t.asm.sqlite3_value_dup).apply(null,arguments)},t._sqlite3_value_free=function(){return(t._sqlite3_value_free=t.asm.sqlite3_value_free).apply(null,arguments)},t._sqlite3_result_blob=function(){return(t._sqlite3_result_blob=t.asm.sqlite3_result_blob).apply(null,arguments)},t._sqlite3_result_error_toobig=function(){return(t._sqlite3_result_error_toobig=t.asm.sqlite3_result_error_toobig).apply(null,arguments)},t._sqlite3_result_error_nomem=function(){return(t._sqlite3_result_error_nomem=t.asm.sqlite3_result_error_nomem).apply(null,arguments)},t._sqlite3_result_double=function(){return(t._sqlite3_result_double=t.asm.sqlite3_result_double).apply(null,arguments)},t._sqlite3_result_error=function(){return(t._sqlite3_result_error=t.asm.sqlite3_result_error).apply(null,arguments)},t._sqlite3_result_int=function(){return(t._sqlite3_result_int=t.asm.sqlite3_result_int).apply(null,arguments)},t._sqlite3_result_int64=function(){return(t._sqlite3_result_int64=t.asm.sqlite3_result_int64).apply(null,arguments)},t._sqlite3_result_null=function(){return(t._sqlite3_result_null=t.asm.sqlite3_result_null).apply(null,arguments)},t._sqlite3_result_pointer=function(){return(t._sqlite3_result_pointer=t.asm.sqlite3_result_pointer).apply(null,arguments)},t._sqlite3_result_subtype=function(){return(t._sqlite3_result_subtype=t.asm.sqlite3_result_subtype).apply(null,arguments)},t._sqlite3_result_text=function(){return(t._sqlite3_result_text=t.asm.sqlite3_result_text).apply(null,arguments)},t._sqlite3_result_zeroblob=function(){return(t._sqlite3_result_zeroblob=t.asm.sqlite3_result_zeroblob).apply(null,arguments)},t._sqlite3_result_zeroblob64=function(){return(t._sqlite3_result_zeroblob64=t.asm.sqlite3_result_zeroblob64).apply(null,arguments)},t._sqlite3_result_error_code=function(){return(t._sqlite3_result_error_code=t.asm.sqlite3_result_error_code).apply(null,arguments)},t._sqlite3_user_data=function(){return(t._sqlite3_user_data=t.asm.sqlite3_user_data).apply(null,arguments)},t._sqlite3_context_db_handle=function(){return(t._sqlite3_context_db_handle=t.asm.sqlite3_context_db_handle).apply(null,arguments)},t._sqlite3_vtab_nochange=function(){return(t._sqlite3_vtab_nochange=t.asm.sqlite3_vtab_nochange).apply(null,arguments)},t._sqlite3_vtab_in_first=function(){return(t._sqlite3_vtab_in_first=t.asm.sqlite3_vtab_in_first).apply(null,arguments)},t._sqlite3_vtab_in_next=function(){return(t._sqlite3_vtab_in_next=t.asm.sqlite3_vtab_in_next).apply(null,arguments)},t._sqlite3_aggregate_context=function(){return(t._sqlite3_aggregate_context=t.asm.sqlite3_aggregate_context).apply(null,arguments)},t._sqlite3_get_auxdata=function(){return(t._sqlite3_get_auxdata=t.asm.sqlite3_get_auxdata).apply(null,arguments)},t._sqlite3_set_auxdata=function(){return(t._sqlite3_set_auxdata=t.asm.sqlite3_set_auxdata).apply(null,arguments)},t._sqlite3_column_count=function(){return(t._sqlite3_column_count=t.asm.sqlite3_column_count).apply(null,arguments)},t._sqlite3_data_count=function(){return(t._sqlite3_data_count=t.asm.sqlite3_data_count).apply(null,arguments)},t._sqlite3_column_blob=function(){return(t._sqlite3_column_blob=t.asm.sqlite3_column_blob).apply(null,arguments)},t._sqlite3_column_bytes=function(){return(t._sqlite3_column_bytes=t.asm.sqlite3_column_bytes).apply(null,arguments)},t._sqlite3_column_double=function(){return(t._sqlite3_column_double=t.asm.sqlite3_column_double).apply(null,arguments)},t._sqlite3_column_value=function(){return(t._sqlite3_column_value=t.asm.sqlite3_column_value).apply(null,arguments)},t._sqlite3_bind_blob=function(){return(t._sqlite3_bind_blob=t.asm.sqlite3_bind_blob).apply(null,arguments)},t._sqlite3_bind_double=function(){return(t._sqlite3_bind_double=t.asm.sqlite3_bind_double).apply(null,arguments)},t._sqlite3_bind_int=function(){return(t._sqlite3_bind_int=t.asm.sqlite3_bind_int).apply(null,arguments)},t._sqlite3_bind_int64=function(){return(t._sqlite3_bind_int64=t.asm.sqlite3_bind_int64).apply(null,arguments)},t._sqlite3_bind_null=function(){return(t._sqlite3_bind_null=t.asm.sqlite3_bind_null).apply(null,arguments)},t._sqlite3_bind_pointer=function(){return(t._sqlite3_bind_pointer=t.asm.sqlite3_bind_pointer).apply(null,arguments)},t._sqlite3_bind_text=function(){return(t._sqlite3_bind_text=t.asm.sqlite3_bind_text).apply(null,arguments)},t._sqlite3_bind_parameter_count=function(){return(t._sqlite3_bind_parameter_count=t.asm.sqlite3_bind_parameter_count).apply(null,arguments)},t._sqlite3_bind_parameter_index=function(){return(t._sqlite3_bind_parameter_index=t.asm.sqlite3_bind_parameter_index).apply(null,arguments)},t._sqlite3_db_handle=function(){return(t._sqlite3_db_handle=t.asm.sqlite3_db_handle).apply(null,arguments)},t._sqlite3_stmt_readonly=function(){return(t._sqlite3_stmt_readonly=t.asm.sqlite3_stmt_readonly).apply(null,arguments)},t._sqlite3_stmt_isexplain=function(){return(t._sqlite3_stmt_isexplain=t.asm.sqlite3_stmt_isexplain).apply(null,arguments)},t._sqlite3_stmt_status=function(){return(t._sqlite3_stmt_status=t.asm.sqlite3_stmt_status).apply(null,arguments)},t._sqlite3_sql=function(){return(t._sqlite3_sql=t.asm.sqlite3_sql).apply(null,arguments)},t._sqlite3_expanded_sql=function(){return(t._sqlite3_expanded_sql=t.asm.sqlite3_expanded_sql).apply(null,arguments)},t._sqlite3_preupdate_old=function(){return(t._sqlite3_preupdate_old=t.asm.sqlite3_preupdate_old).apply(null,arguments)},t._sqlite3_preupdate_count=function(){return(t._sqlite3_preupdate_count=t.asm.sqlite3_preupdate_count).apply(null,arguments)},t._sqlite3_preupdate_depth=function(){return(t._sqlite3_preupdate_depth=t.asm.sqlite3_preupdate_depth).apply(null,arguments)},t._sqlite3_preupdate_blobwrite=function(){return(t._sqlite3_preupdate_blobwrite=t.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},t._sqlite3_preupdate_new=function(){return(t._sqlite3_preupdate_new=t.asm.sqlite3_preupdate_new).apply(null,arguments)},t._sqlite3_value_numeric_type=function(){return(t._sqlite3_value_numeric_type=t.asm.sqlite3_value_numeric_type).apply(null,arguments)},t._sqlite3_set_authorizer=function(){return(t._sqlite3_set_authorizer=t.asm.sqlite3_set_authorizer).apply(null,arguments)},t._sqlite3_strglob=function(){return(t._sqlite3_strglob=t.asm.sqlite3_strglob).apply(null,arguments)},t._sqlite3_strlike=function(){return(t._sqlite3_strlike=t.asm.sqlite3_strlike).apply(null,arguments)},t._sqlite3_auto_extension=function(){return(t._sqlite3_auto_extension=t.asm.sqlite3_auto_extension).apply(null,arguments)},t._sqlite3_cancel_auto_extension=function(){return(t._sqlite3_cancel_auto_extension=t.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},t._sqlite3_reset_auto_extension=function(){return(t._sqlite3_reset_auto_extension=t.asm.sqlite3_reset_auto_extension).apply(null,arguments)},t._sqlite3_prepare_v3=function(){return(t._sqlite3_prepare_v3=t.asm.sqlite3_prepare_v3).apply(null,arguments)},t._sqlite3_create_module=function(){return(t._sqlite3_create_module=t.asm.sqlite3_create_module).apply(null,arguments)},t._sqlite3_create_module_v2=function(){return(t._sqlite3_create_module_v2=t.asm.sqlite3_create_module_v2).apply(null,arguments)},t._sqlite3_drop_modules=function(){return(t._sqlite3_drop_modules=t.asm.sqlite3_drop_modules).apply(null,arguments)},t._sqlite3_declare_vtab=function(){return(t._sqlite3_declare_vtab=t.asm.sqlite3_declare_vtab).apply(null,arguments)},t._sqlite3_vtab_on_conflict=function(){return(t._sqlite3_vtab_on_conflict=t.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},t._sqlite3_vtab_collation=function(){return(t._sqlite3_vtab_collation=t.asm.sqlite3_vtab_collation).apply(null,arguments)},t._sqlite3_vtab_in=function(){return(t._sqlite3_vtab_in=t.asm.sqlite3_vtab_in).apply(null,arguments)},t._sqlite3_vtab_rhs_value=function(){return(t._sqlite3_vtab_rhs_value=t.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},t._sqlite3_vtab_distinct=function(){return(t._sqlite3_vtab_distinct=t.asm.sqlite3_vtab_distinct).apply(null,arguments)},t._sqlite3_keyword_name=function(){return(t._sqlite3_keyword_name=t.asm.sqlite3_keyword_name).apply(null,arguments)},t._sqlite3_keyword_count=function(){return(t._sqlite3_keyword_count=t.asm.sqlite3_keyword_count).apply(null,arguments)},t._sqlite3_keyword_check=function(){return(t._sqlite3_keyword_check=t.asm.sqlite3_keyword_check).apply(null,arguments)},t._sqlite3_complete=function(){return(t._sqlite3_complete=t.asm.sqlite3_complete).apply(null,arguments)},t._sqlite3_libversion=function(){return(t._sqlite3_libversion=t.asm.sqlite3_libversion).apply(null,arguments)},t._sqlite3_libversion_number=function(){return(t._sqlite3_libversion_number=t.asm.sqlite3_libversion_number).apply(null,arguments)},t._sqlite3_shutdown=function(){return(t._sqlite3_shutdown=t.asm.sqlite3_shutdown).apply(null,arguments)},t._sqlite3_last_insert_rowid=function(){return(t._sqlite3_last_insert_rowid=t.asm.sqlite3_last_insert_rowid).apply(null,arguments)},t._sqlite3_set_last_insert_rowid=function(){return(t._sqlite3_set_last_insert_rowid=t.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},t._sqlite3_changes64=function(){return(t._sqlite3_changes64=t.asm.sqlite3_changes64).apply(null,arguments)},t._sqlite3_changes=function(){return(t._sqlite3_changes=t.asm.sqlite3_changes).apply(null,arguments)},t._sqlite3_total_changes64=function(){return(t._sqlite3_total_changes64=t.asm.sqlite3_total_changes64).apply(null,arguments)},t._sqlite3_total_changes=function(){return(t._sqlite3_total_changes=t.asm.sqlite3_total_changes).apply(null,arguments)},t._sqlite3_txn_state=function(){return(t._sqlite3_txn_state=t.asm.sqlite3_txn_state).apply(null,arguments)},t._sqlite3_close_v2=function(){return(t._sqlite3_close_v2=t.asm.sqlite3_close_v2).apply(null,arguments)},t._sqlite3_busy_handler=function(){return(t._sqlite3_busy_handler=t.asm.sqlite3_busy_handler).apply(null,arguments)},t._sqlite3_progress_handler=function(){return(t._sqlite3_progress_handler=t.asm.sqlite3_progress_handler).apply(null,arguments)},t._sqlite3_busy_timeout=function(){return(t._sqlite3_busy_timeout=t.asm.sqlite3_busy_timeout).apply(null,arguments)},t._sqlite3_create_function=function(){return(t._sqlite3_create_function=t.asm.sqlite3_create_function).apply(null,arguments)},t._sqlite3_create_function_v2=function(){return(t._sqlite3_create_function_v2=t.asm.sqlite3_create_function_v2).apply(null,arguments)},t._sqlite3_create_window_function=function(){return(t._sqlite3_create_window_function=t.asm.sqlite3_create_window_function).apply(null,arguments)},t._sqlite3_overload_function=function(){return(t._sqlite3_overload_function=t.asm.sqlite3_overload_function).apply(null,arguments)},t._sqlite3_trace_v2=function(){return(t._sqlite3_trace_v2=t.asm.sqlite3_trace_v2).apply(null,arguments)},t._sqlite3_commit_hook=function(){return(t._sqlite3_commit_hook=t.asm.sqlite3_commit_hook).apply(null,arguments)},t._sqlite3_update_hook=function(){return(t._sqlite3_update_hook=t.asm.sqlite3_update_hook).apply(null,arguments)},t._sqlite3_rollback_hook=function(){return(t._sqlite3_rollback_hook=t.asm.sqlite3_rollback_hook).apply(null,arguments)},t._sqlite3_preupdate_hook=function(){return(t._sqlite3_preupdate_hook=t.asm.sqlite3_preupdate_hook).apply(null,arguments)},t._sqlite3_error_offset=function(){return(t._sqlite3_error_offset=t.asm.sqlite3_error_offset).apply(null,arguments)},t._sqlite3_errcode=function(){return(t._sqlite3_errcode=t.asm.sqlite3_errcode).apply(null,arguments)},t._sqlite3_extended_errcode=function(){return(t._sqlite3_extended_errcode=t.asm.sqlite3_extended_errcode).apply(null,arguments)},t._sqlite3_errstr=function(){return(t._sqlite3_errstr=t.asm.sqlite3_errstr).apply(null,arguments)},t._sqlite3_limit=function(){return(t._sqlite3_limit=t.asm.sqlite3_limit).apply(null,arguments)},t._sqlite3_open=function(){return(t._sqlite3_open=t.asm.sqlite3_open).apply(null,arguments)},t._sqlite3_open_v2=function(){return(t._sqlite3_open_v2=t.asm.sqlite3_open_v2).apply(null,arguments)},t._sqlite3_create_collation=function(){return(t._sqlite3_create_collation=t.asm.sqlite3_create_collation).apply(null,arguments)},t._sqlite3_create_collation_v2=function(){return(t._sqlite3_create_collation_v2=t.asm.sqlite3_create_collation_v2).apply(null,arguments)},t._sqlite3_collation_needed=function(){return(t._sqlite3_collation_needed=t.asm.sqlite3_collation_needed).apply(null,arguments)},t._sqlite3_get_autocommit=function(){return(t._sqlite3_get_autocommit=t.asm.sqlite3_get_autocommit).apply(null,arguments)},t._sqlite3_table_column_metadata=function(){return(t._sqlite3_table_column_metadata=t.asm.sqlite3_table_column_metadata).apply(null,arguments)},t._sqlite3_extended_result_codes=function(){return(t._sqlite3_extended_result_codes=t.asm.sqlite3_extended_result_codes).apply(null,arguments)},t._sqlite3_uri_key=function(){return(t._sqlite3_uri_key=t.asm.sqlite3_uri_key).apply(null,arguments)},t._sqlite3_uri_int64=function(){return(t._sqlite3_uri_int64=t.asm.sqlite3_uri_int64).apply(null,arguments)},t._sqlite3_db_name=function(){return(t._sqlite3_db_name=t.asm.sqlite3_db_name).apply(null,arguments)},t._sqlite3_db_filename=function(){return(t._sqlite3_db_filename=t.asm.sqlite3_db_filename).apply(null,arguments)},t._sqlite3_compileoption_used=function(){return(t._sqlite3_compileoption_used=t.asm.sqlite3_compileoption_used).apply(null,arguments)},t._sqlite3_compileoption_get=function(){return(t._sqlite3_compileoption_get=t.asm.sqlite3_compileoption_get).apply(null,arguments)},t._sqlite3session_diff=function(){return(t._sqlite3session_diff=t.asm.sqlite3session_diff).apply(null,arguments)},t._sqlite3session_attach=function(){return(t._sqlite3session_attach=t.asm.sqlite3session_attach).apply(null,arguments)},t._sqlite3session_create=function(){return(t._sqlite3session_create=t.asm.sqlite3session_create).apply(null,arguments)},t._sqlite3session_delete=function(){return(t._sqlite3session_delete=t.asm.sqlite3session_delete).apply(null,arguments)},t._sqlite3session_table_filter=function(){return(t._sqlite3session_table_filter=t.asm.sqlite3session_table_filter).apply(null,arguments)},t._sqlite3session_changeset=function(){return(t._sqlite3session_changeset=t.asm.sqlite3session_changeset).apply(null,arguments)},t._sqlite3session_changeset_strm=function(){return(t._sqlite3session_changeset_strm=t.asm.sqlite3session_changeset_strm).apply(null,arguments)},t._sqlite3session_patchset_strm=function(){return(t._sqlite3session_patchset_strm=t.asm.sqlite3session_patchset_strm).apply(null,arguments)},t._sqlite3session_patchset=function(){return(t._sqlite3session_patchset=t.asm.sqlite3session_patchset).apply(null,arguments)},t._sqlite3session_enable=function(){return(t._sqlite3session_enable=t.asm.sqlite3session_enable).apply(null,arguments)},t._sqlite3session_indirect=function(){return(t._sqlite3session_indirect=t.asm.sqlite3session_indirect).apply(null,arguments)},t._sqlite3session_isempty=function(){return(t._sqlite3session_isempty=t.asm.sqlite3session_isempty).apply(null,arguments)},t._sqlite3session_memory_used=function(){return(t._sqlite3session_memory_used=t.asm.sqlite3session_memory_used).apply(null,arguments)},t._sqlite3session_object_config=function(){return(t._sqlite3session_object_config=t.asm.sqlite3session_object_config).apply(null,arguments)},t._sqlite3session_changeset_size=function(){return(t._sqlite3session_changeset_size=t.asm.sqlite3session_changeset_size).apply(null,arguments)},t._sqlite3changeset_start=function(){return(t._sqlite3changeset_start=t.asm.sqlite3changeset_start).apply(null,arguments)},t._sqlite3changeset_start_v2=function(){return(t._sqlite3changeset_start_v2=t.asm.sqlite3changeset_start_v2).apply(null,arguments)},t._sqlite3changeset_start_strm=function(){return(t._sqlite3changeset_start_strm=t.asm.sqlite3changeset_start_strm).apply(null,arguments)},t._sqlite3changeset_start_v2_strm=function(){return(t._sqlite3changeset_start_v2_strm=t.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},t._sqlite3changeset_next=function(){return(t._sqlite3changeset_next=t.asm.sqlite3changeset_next).apply(null,arguments)},t._sqlite3changeset_op=function(){return(t._sqlite3changeset_op=t.asm.sqlite3changeset_op).apply(null,arguments)},t._sqlite3changeset_pk=function(){return(t._sqlite3changeset_pk=t.asm.sqlite3changeset_pk).apply(null,arguments)},t._sqlite3changeset_old=function(){return(t._sqlite3changeset_old=t.asm.sqlite3changeset_old).apply(null,arguments)},t._sqlite3changeset_new=function(){return(t._sqlite3changeset_new=t.asm.sqlite3changeset_new).apply(null,arguments)},t._sqlite3changeset_conflict=function(){return(t._sqlite3changeset_conflict=t.asm.sqlite3changeset_conflict).apply(null,arguments)},t._sqlite3changeset_fk_conflicts=function(){return(t._sqlite3changeset_fk_conflicts=t.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},t._sqlite3changeset_finalize=function(){return(t._sqlite3changeset_finalize=t.asm.sqlite3changeset_finalize).apply(null,arguments)},t._sqlite3changeset_invert=function(){return(t._sqlite3changeset_invert=t.asm.sqlite3changeset_invert).apply(null,arguments)},t._sqlite3changeset_invert_strm=function(){return(t._sqlite3changeset_invert_strm=t.asm.sqlite3changeset_invert_strm).apply(null,arguments)},t._sqlite3changeset_apply_v2=function(){return(t._sqlite3changeset_apply_v2=t.asm.sqlite3changeset_apply_v2).apply(null,arguments)},t._sqlite3changeset_apply=function(){return(t._sqlite3changeset_apply=t.asm.sqlite3changeset_apply).apply(null,arguments)},t._sqlite3changeset_apply_v2_strm=function(){return(t._sqlite3changeset_apply_v2_strm=t.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},t._sqlite3changeset_apply_strm=function(){return(t._sqlite3changeset_apply_strm=t.asm.sqlite3changeset_apply_strm).apply(null,arguments)},t._sqlite3changegroup_new=function(){return(t._sqlite3changegroup_new=t.asm.sqlite3changegroup_new).apply(null,arguments)},t._sqlite3changegroup_add=function(){return(t._sqlite3changegroup_add=t.asm.sqlite3changegroup_add).apply(null,arguments)},t._sqlite3changegroup_output=function(){return(t._sqlite3changegroup_output=t.asm.sqlite3changegroup_output).apply(null,arguments)},t._sqlite3changegroup_add_strm=function(){return(t._sqlite3changegroup_add_strm=t.asm.sqlite3changegroup_add_strm).apply(null,arguments)},t._sqlite3changegroup_output_strm=function(){return(t._sqlite3changegroup_output_strm=t.asm.sqlite3changegroup_output_strm).apply(null,arguments)},t._sqlite3changegroup_delete=function(){return(t._sqlite3changegroup_delete=t.asm.sqlite3changegroup_delete).apply(null,arguments)},t._sqlite3changeset_concat=function(){return(t._sqlite3changeset_concat=t.asm.sqlite3changeset_concat).apply(null,arguments)},t._sqlite3changeset_concat_strm=function(){return(t._sqlite3changeset_concat_strm=t.asm.sqlite3changeset_concat_strm).apply(null,arguments)},t._sqlite3session_config=function(){return(t._sqlite3session_config=t.asm.sqlite3session_config).apply(null,arguments)},t._sqlite3_sourceid=function(){return(t._sqlite3_sourceid=t.asm.sqlite3_sourceid).apply(null,arguments)},t._sqlite3__wasm_pstack_ptr=function(){return(t._sqlite3__wasm_pstack_ptr=t.asm.sqlite3__wasm_pstack_ptr).apply(null,arguments)},t._sqlite3__wasm_pstack_restore=function(){return(t._sqlite3__wasm_pstack_restore=t.asm.sqlite3__wasm_pstack_restore).apply(null,arguments)},t._sqlite3__wasm_pstack_alloc=function(){return(t._sqlite3__wasm_pstack_alloc=t.asm.sqlite3__wasm_pstack_alloc).apply(null,arguments)},t._sqlite3__wasm_pstack_remaining=function(){return(t._sqlite3__wasm_pstack_remaining=t.asm.sqlite3__wasm_pstack_remaining).apply(null,arguments)},t._sqlite3__wasm_pstack_quota=function(){return(t._sqlite3__wasm_pstack_quota=t.asm.sqlite3__wasm_pstack_quota).apply(null,arguments)},t._sqlite3__wasm_db_error=function(){return(t._sqlite3__wasm_db_error=t.asm.sqlite3__wasm_db_error).apply(null,arguments)},t._sqlite3__wasm_test_struct=function(){return(t._sqlite3__wasm_test_struct=t.asm.sqlite3__wasm_test_struct).apply(null,arguments)},t._sqlite3__wasm_enum_json=function(){return(t._sqlite3__wasm_enum_json=t.asm.sqlite3__wasm_enum_json).apply(null,arguments)},t._sqlite3__wasm_vfs_unlink=function(){return(t._sqlite3__wasm_vfs_unlink=t.asm.sqlite3__wasm_vfs_unlink).apply(null,arguments)},t._sqlite3__wasm_db_vfs=function(){return(t._sqlite3__wasm_db_vfs=t.asm.sqlite3__wasm_db_vfs).apply(null,arguments)},t._sqlite3__wasm_db_reset=function(){return(t._sqlite3__wasm_db_reset=t.asm.sqlite3__wasm_db_reset).apply(null,arguments)},t._sqlite3__wasm_db_export_chunked=function(){return(t._sqlite3__wasm_db_export_chunked=t.asm.sqlite3__wasm_db_export_chunked).apply(null,arguments)},t._sqlite3__wasm_db_serialize=function(){return(t._sqlite3__wasm_db_serialize=t.asm.sqlite3__wasm_db_serialize).apply(null,arguments)},t._sqlite3__wasm_vfs_create_file=function(){return(t._sqlite3__wasm_vfs_create_file=t.asm.sqlite3__wasm_vfs_create_file).apply(null,arguments)},t._sqlite3__wasm_posix_create_file=function(){return(t._sqlite3__wasm_posix_create_file=t.asm.sqlite3__wasm_posix_create_file).apply(null,arguments)},t._sqlite3__wasm_kvvfsMakeKeyOnPstack=function(){return(t._sqlite3__wasm_kvvfsMakeKeyOnPstack=t.asm.sqlite3__wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},t._sqlite3__wasm_kvvfs_methods=function(){return(t._sqlite3__wasm_kvvfs_methods=t.asm.sqlite3__wasm_kvvfs_methods).apply(null,arguments)},t._sqlite3__wasm_vtab_config=function(){return(t._sqlite3__wasm_vtab_config=t.asm.sqlite3__wasm_vtab_config).apply(null,arguments)},t._sqlite3__wasm_db_config_ip=function(){return(t._sqlite3__wasm_db_config_ip=t.asm.sqlite3__wasm_db_config_ip).apply(null,arguments)},t._sqlite3__wasm_db_config_pii=function(){return(t._sqlite3__wasm_db_config_pii=t.asm.sqlite3__wasm_db_config_pii).apply(null,arguments)},t._sqlite3__wasm_db_config_s=function(){return(t._sqlite3__wasm_db_config_s=t.asm.sqlite3__wasm_db_config_s).apply(null,arguments)},t._sqlite3__wasm_config_i=function(){return(t._sqlite3__wasm_config_i=t.asm.sqlite3__wasm_config_i).apply(null,arguments)},t._sqlite3__wasm_config_ii=function(){return(t._sqlite3__wasm_config_ii=t.asm.sqlite3__wasm_config_ii).apply(null,arguments)},t._sqlite3__wasm_config_j=function(){return(t._sqlite3__wasm_config_j=t.asm.sqlite3__wasm_config_j).apply(null,arguments)},t._sqlite3__wasm_qfmt_token=function(){return(t._sqlite3__wasm_qfmt_token=t.asm.sqlite3__wasm_qfmt_token).apply(null,arguments)},t._sqlite3__wasm_init_wasmfs=function(){return(t._sqlite3__wasm_init_wasmfs=t.asm.sqlite3__wasm_init_wasmfs).apply(null,arguments)},t._sqlite3__wasm_test_intptr=function(){return(t._sqlite3__wasm_test_intptr=t.asm.sqlite3__wasm_test_intptr).apply(null,arguments)},t._sqlite3__wasm_test_voidptr=function(){return(t._sqlite3__wasm_test_voidptr=t.asm.sqlite3__wasm_test_voidptr).apply(null,arguments)},t._sqlite3__wasm_test_int64_max=function(){return(t._sqlite3__wasm_test_int64_max=t.asm.sqlite3__wasm_test_int64_max).apply(null,arguments)},t._sqlite3__wasm_test_int64_min=function(){return(t._sqlite3__wasm_test_int64_min=t.asm.sqlite3__wasm_test_int64_min).apply(null,arguments)},t._sqlite3__wasm_test_int64_times2=function(){return(t._sqlite3__wasm_test_int64_times2=t.asm.sqlite3__wasm_test_int64_times2).apply(null,arguments)},t._sqlite3__wasm_test_int64_minmax=function(){return(t._sqlite3__wasm_test_int64_minmax=t.asm.sqlite3__wasm_test_int64_minmax).apply(null,arguments)},t._sqlite3__wasm_test_int64ptr=function(){return(t._sqlite3__wasm_test_int64ptr=t.asm.sqlite3__wasm_test_int64ptr).apply(null,arguments)},t._sqlite3__wasm_test_stack_overflow=function(){return(t._sqlite3__wasm_test_stack_overflow=t.asm.sqlite3__wasm_test_stack_overflow).apply(null,arguments)},t._sqlite3__wasm_test_str_hello=function(){return(t._sqlite3__wasm_test_str_hello=t.asm.sqlite3__wasm_test_str_hello).apply(null,arguments)},t._sqlite3__wasm_SQLTester_strglob=function(){return(t._sqlite3__wasm_SQLTester_strglob=t.asm.sqlite3__wasm_SQLTester_strglob).apply(null,arguments)};var ir=t._malloc=function(){return(ir=t._malloc=t.asm.malloc).apply(null,arguments)};t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._realloc=function(){return(t._realloc=t.asm.realloc).apply(null,arguments)};var jt,or=t._emscripten_builtin_memalign=function(){return(or=t._emscripten_builtin_memalign=t.asm.emscripten_builtin_memalign).apply(null,arguments)};function ar(s){function n(){jt||(jt=!0,t.calledRun=!0,Un||(t.noFSInit||c.init.initialized||c.init(),c.ignorePermissions=!1,un($n),e(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)o=t.postRun.shift(),Kn.unshift(o);var o;un(Kn)}()))}dt>0||(function(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)o=t.preRun.shift(),Vn.unshift(o);var o;un(Vn)}(),dt>0||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()))}if(t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)},t.wasmMemory=nt,kt=function s(){jt||ar(),jt||(kt=s)},t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return ar(),t.postRun||(t.postRun=[]),t.postRun.push(function(s){if(globalThis.sqlite3ApiBootstrap=function n(o=globalThis.sqlite3ApiConfig||n.defaultConfig){if(n.sqlite3)return(n.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),n.sqlite3;const i=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:!(s===void 0||!s.HEAPU64)||!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},o||{});Object.assign(i,{allocExportName:i.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:i.useStdAlloc?"free":"sqlite3_free",reallocExportName:i.useStdAlloc?"realloc":"sqlite3_realloc"},i),["exports","memory","wasmfsOpfsDir"].forEach(a=>{typeof i[a]=="function"&&(i[a]=i[a]())}),delete globalThis.sqlite3ApiConfig,delete n.defaultConfig;const l=Object.create(null),u=Object.create(null),I=a=>l.sqlite3_js_rc_str&&l.sqlite3_js_rc_str(a)||"Unknown result code #"+a;class E extends Error{constructor(...f){let m;if(f.length)if(typeof(y=f[0])=="number"&&y===(0|y))if(m=f[0],f.length===1)super(I(f[0]));else{const F=I(m);typeof f[1]=="object"?super(F,f[1]):(f[0]=F+":",super(f.join(" ")))}else f.length===2&&typeof f[1]=="object"?super(...f):super(f.join(" "));var y;this.resultCode=m||l.SQLITE_ERROR,this.name="SQLite3Error"}}E.toss=(...a)=>{throw new E(...a)};const C=E.toss;i.wasmfsOpfsDir&&!/^\/[^/]+$/.test(i.wasmfsOpfsDir)&&C("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const W=a=>typeof a!="bigint"&&a===(0|a)&&a<=2147483647&&a>=-2147483648,P=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,L=a=>a.buffer instanceof P,M=(a,f,m)=>L(a)?a.slice(f,m):a.subarray(f,m),Q=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),$=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),k=a=>Q(a)||C("Value is not of a supported TypedArray type."),T=new TextDecoder("utf-8"),z=function(a,f,m){return T.decode(M(a,f,m))},R=function(a){return $(a)?z(a instanceof ArrayBuffer?new Uint8Array(a):a):Array.isArray(a)?a.join(""):(u.isPtr(a)&&(a=u.cstrToJs(a)),a)};class U extends Error{constructor(...f){f.length===2&&typeof f[1]=="object"?super(...f):f.length?super(f.join(" ")):super("Allocation failed."),this.resultCode=l.SQLITE_NOMEM,this.name="WasmAllocError"}}U.toss=(...a)=>{throw new U(...a)},Object.assign(l,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(a,f,m,y,F,V,J,N,te)=>{},sqlite3_create_function:(a,f,m,y,F,V,J,N)=>{},sqlite3_create_window_function:(a,f,m,y,F,V,J,N,te,ae)=>{},sqlite3_prepare_v3:(a,f,m,y,F,V)=>{},sqlite3_prepare_v2:(a,f,m,y,F)=>{},sqlite3_exec:(a,f,m,y,F)=>{},sqlite3_randomness:(a,f)=>{}});const A={affirmBindableTypedArray:k,flexibleString:R,bigIntFits32:a=>a>=-2147483648n&&a<=0x7fffffffn,bigIntFits64:function a(f){return a._max||(a._max=BigInt("0x7fffffffffffffff"),a._min=~a._max),f>=a._min&&f<=a._max},bigIntFitsDouble:function a(f){return a._min||(a._min=Number.MIN_SAFE_INTEGER,a._max=Number.MAX_SAFE_INTEGER),f>=a._min&&f<=a._max},isBindableTypedArray:Q,isInt32:W,isSQLableTypedArray:$,isTypedArray:a=>!!(a&&a.constructor&&W(a.constructor.BYTES_PER_ELEMENT))&&a,typedArrayToString:z,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:L,toss:function(...a){throw new Error(a.join(" "))},toss3:C,typedArrayPart:M,affirmDbHeader:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const f="SQLite format 3";15>a.byteLength&&C("Input does not contain an SQLite3 database header.");for(let m=0;m<15;++m)f.charCodeAt(m)!==a[m]&&C("Input does not contain an SQLite3 database header.")},affirmIsDb:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const f=a.byteLength;(f<512||f%512!=0)&&C("Byte array size",f,"is invalid for an SQLite3 db."),A.affirmDbHeader(a)}};Object.assign(u,{ptrSizeof:i.wasmPtrSizeof||4,ptrIR:i.wasmPtrIR||"i32",bigIntEnabled:!!i.bigIntEnabled,exports:i.exports||C("Missing API config.exports (WASM module exports)."),memory:i.memory||i.exports.memory||C("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),u.allocFromTypedArray=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a)),k(a);const f=u.alloc(a.byteLength||1);return u.heapForSize(a.constructor).set(a.byteLength?a:[0],f),f};{const a=i.allocExportName,f=i.deallocExportName,m=i.reallocExportName;for(const y of[a,f,m])u.exports[y]instanceof Function||C("Missing required exports[",y,"] function.");u.alloc=function y(F){return y.impl(F)||U.toss("Failed to allocate",F," bytes.")},u.alloc.impl=u.exports[a],u.realloc=function y(F,V){const J=y.impl(F,V);return V?J||U.toss("Failed to reallocate",V," bytes."):0},u.realloc.impl=u.exports[m],u.dealloc=u.exports[f]}let K;if(u.compileOptionUsed=function a(f){if(!arguments.length){if(a._result)return a._result;a._opt||(a._rx=/^([^=]+)=(.+)/,a._rxInt=/^-?\d+$/,a._opt=function(J,N){const te=a._rx.exec(J);N[0]=te?te[1]:J,N[1]=!te||(a._rxInt.test(te[2])?+te[2]:te[2])});const m={},y=[0,0];let F,V=0;for(;F=l.sqlite3_compileoption_get(V++);)a._opt(F,y),m[y[0]]=y[1];return a._result=m}if(Array.isArray(f)){const m={};return f.forEach(y=>{m[y]=l.sqlite3_compileoption_used(y)}),m}return typeof f=="object"?(Object.keys(f).forEach(m=>{f[m]=l.sqlite3_compileoption_used(m)}),f):typeof f=="string"&&!!l.sqlite3_compileoption_used(f)},u.pstack=Object.assign(Object.create(null),{restore:u.exports.sqlite3__wasm_pstack_restore,alloc:function(a){return typeof a!="string"||(a=u.sizeofIR(a))||U.toss("Invalid value for pstack.alloc(",arguments[0],")"),u.exports.sqlite3__wasm_pstack_alloc(a)||U.toss("Could not allocate",a,"bytes from the pstack.")},allocChunks:function(a,f){typeof f!="string"||(f=u.sizeofIR(f))||U.toss("Invalid size value for allocChunks(",arguments[1],")");const m=u.pstack.alloc(a*f),y=[];let F=0,V=0;for(;F<a;++F,V+=f)y.push(m+V);return y},allocPtr:(a=1,f=!0)=>a===1?u.pstack.alloc(f?8:u.ptrSizeof):u.pstack.allocChunks(a,f?8:u.ptrSizeof),call:function(a){const f=u.pstack.pointer;try{return a(h)}finally{u.pstack.restore(f)}}}),Object.defineProperties(u.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:u.exports.sqlite3__wasm_pstack_remaining}}),l.sqlite3_randomness=(...a)=>{if(a.length===1&&A.isTypedArray(a[0])&&a[0].BYTES_PER_ELEMENT===1){const f=a[0];if(f.byteLength===0)return u.exports.sqlite3_randomness(0,0),f;const m=u.pstack.pointer;try{let y=f.byteLength,F=0;const V=u.exports.sqlite3_randomness,J=u.heap8u(),N=y<512?y:512,te=u.pstack.alloc(N);do{const ae=y>N?N:y;V(ae,te),f.set(M(J,te,te+ae),F),y-=ae,F+=ae}while(y>0)}catch(y){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",y)}finally{u.pstack.restore(m)}return f}u.exports.sqlite3_randomness(...a)},l.sqlite3_wasmfs_opfs_dir=function(){if(K!==void 0)return K;const a=i.wasmfsOpfsDir;if(!(a&&globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle))return K="";try{return K=a&&u.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],a)===0?a:""}catch{return K=""}},l.sqlite3_wasmfs_filename_is_persistent=function(a){const f=l.sqlite3_wasmfs_opfs_dir();return!(!f||!a)&&a.startsWith(f+"/")},l.sqlite3_js_db_uses_vfs=function(a,f,m=0){try{const y=l.sqlite3_vfs_find(f);return!!y&&(a?y===l.sqlite3_js_db_vfs(a,m)&&y:y===l.sqlite3_vfs_find(0)&&y)}catch{return!1}},l.sqlite3_js_vfs_list=function(){const a=[];let f=l.sqlite3_vfs_find(0);for(;f;){const m=new l.sqlite3_vfs(f);a.push(u.cstrToJs(m.$zName)),f=m.$pNext,m.dispose()}return a},l.sqlite3_js_db_export=function(a,f=0){(a=u.xWrap.testConvertArg("sqlite3*",a))||C("Invalid sqlite3* argument."),u.bigIntEnabled||C("BigInt64 support is not enabled.");const m=u.scopedAllocPush();let y;try{const F=u.scopedAlloc(8+u.ptrSizeof),V=F+8,J=f?u.isPtr(f)?f:u.scopedAllocCString(""+f):0;let N=u.exports.sqlite3__wasm_db_serialize(a,J,V,F,0);N&&C("Database serialization failed with code",h.capi.sqlite3_js_rc_str(N)),y=u.peekPtr(V);const te=u.peek(F,"i64");return N=te?u.heap8u().slice(y,y+Number(te)):new Uint8Array,N}finally{y&&u.exports.sqlite3_free(y),u.scopedAllocPop(m)}},l.sqlite3_js_db_vfs=(a,f=0)=>A.sqlite3__wasm_db_vfs(a,f),l.sqlite3_js_aggregate_context=(a,f)=>l.sqlite3_aggregate_context(a,f)||(f?U.toss("Cannot allocate",f,"bytes for sqlite3_aggregate_context()"):0),l.sqlite3_js_posix_create_file=function(a,f,m){let y;f&&u.isPtr(f)?y=f:f instanceof ArrayBuffer||f instanceof Uint8Array?(y=u.allocFromTypedArray(f),(arguments.length<3||!A.isInt32(m)||m<0)&&(m=f.byteLength)):E.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!A.isInt32(m)||m<0)&&E.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const F=A.sqlite3__wasm_posix_create_file(a,y,m);F&&E.toss("Creation of file failed with sqlite3 result code",l.sqlite3_js_rc_str(F))}finally{u.dealloc(y)}},l.sqlite3_js_vfs_create_file=function(a,f,m,y){let F;i.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options."),m?(u.isPtr(m)?F=m:m instanceof ArrayBuffer&&(m=new Uint8Array(m)),m instanceof Uint8Array?(F=u.allocFromTypedArray(m),(arguments.length<4||!A.isInt32(y)||y<0)&&(y=m.byteLength)):E.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):F=0,(!A.isInt32(y)||y<0)&&(u.dealloc(F),E.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const V=A.sqlite3__wasm_vfs_create_file(a,f,F,y);V&&E.toss("Creation of file failed with sqlite3 result code",l.sqlite3_js_rc_str(V))}finally{u.dealloc(F)}},l.sqlite3_js_sql_to_string=a=>{if(typeof a=="string")return a;const f=R(v);return f===v?void 0:f},A.isUIThread()){const a=function(f){const m=Object.create(null);return m.prefix="kvvfs-"+f,m.stores=[],f!=="session"&&f!==""||m.stores.push(globalThis.sessionStorage),f!=="local"&&f!==""||m.stores.push(globalThis.localStorage),m};l.sqlite3_js_kvvfs_clear=function(f=""){let m=0;const y=a(f);return y.stores.forEach(F=>{const V=[];let J;for(J=0;J<F.length;++J){const N=F.key(J);N.startsWith(y.prefix)&&V.push(N)}V.forEach(N=>F.removeItem(N)),m+=V.length}),m},l.sqlite3_js_kvvfs_size=function(f=""){let m=0;const y=a(f);return y.stores.forEach(F=>{let V;for(V=0;V<F.length;++V){const J=F.key(V);J.startsWith(y.prefix)&&(m+=J.length,m+=F.getItem(J).length)}}),2*m}}l.sqlite3_db_config=(function(a,f,...m){switch(this.s||(this.s=u.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=u.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=u.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),f){case l.SQLITE_DBCONFIG_ENABLE_FKEY:case l.SQLITE_DBCONFIG_ENABLE_TRIGGER:case l.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case l.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case l.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case l.SQLITE_DBCONFIG_ENABLE_QPSG:case l.SQLITE_DBCONFIG_TRIGGER_EQP:case l.SQLITE_DBCONFIG_RESET_DATABASE:case l.SQLITE_DBCONFIG_DEFENSIVE:case l.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case l.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case l.SQLITE_DBCONFIG_DQS_DML:case l.SQLITE_DBCONFIG_DQS_DDL:case l.SQLITE_DBCONFIG_ENABLE_VIEW:case l.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case l.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case l.SQLITE_DBCONFIG_STMT_SCANSTATUS:case l.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(a,f,m[0],m[1]||0);case l.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(a,f,m[0],m[1],m[2]);case l.SQLITE_DBCONFIG_MAINDBNAME:return this.s(a,f,m[0]);default:return l.SQLITE_MISUSE}}).bind(Object.create(null)),l.sqlite3_value_to_js=function(a,f=!0){let m;const y=l.sqlite3_value_type(a);switch(y){case l.SQLITE_INTEGER:u.bigIntEnabled?(m=l.sqlite3_value_int64(a),A.bigIntFitsDouble(m)&&(m=Number(m))):m=l.sqlite3_value_double(a);break;case l.SQLITE_FLOAT:m=l.sqlite3_value_double(a);break;case l.SQLITE_TEXT:m=l.sqlite3_value_text(a);break;case l.SQLITE_BLOB:{const F=l.sqlite3_value_bytes(a),V=l.sqlite3_value_blob(a);F&&!V&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",F,"byte(s)"),m=F?u.heap8u().slice(V,V+Number(F)):null;break}case l.SQLITE_NULL:m=null;break;default:f&&C(l.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",y),m=void 0}return m},l.sqlite3_values_to_js=function(a,f,m=!0){let y;const F=[];for(y=0;y<a;++y)F.push(l.sqlite3_value_to_js(u.peekPtr(f+u.ptrSizeof*y),m));return F},l.sqlite3_result_error_js=function(a,f){f instanceof U?l.sqlite3_result_error_nomem(a):l.sqlite3_result_error(a,""+f,-1)},l.sqlite3_result_js=function(a,f){if(f instanceof Error)l.sqlite3_result_error_js(a,f);else try{switch(typeof f){case"undefined":break;case"boolean":l.sqlite3_result_int(a,f?1:0);break;case"bigint":A.bigIntFits32(f)?l.sqlite3_result_int(a,Number(f)):A.bigIntFitsDouble(f)?l.sqlite3_result_double(a,Number(f)):u.bigIntEnabled?A.bigIntFits64(f)?l.sqlite3_result_int64(a,f):C("BigInt value",f.toString(),"is too BigInt for int64."):C("BigInt value",f.toString(),"is too BigInt.");break;case"number":{let m;m=A.isInt32(f)?l.sqlite3_result_int:u.bigIntEnabled&&Number.isInteger(f)&&A.bigIntFits64(BigInt(f))?l.sqlite3_result_int64:l.sqlite3_result_double,m(a,f);break}case"string":{const[m,y]=u.allocCString(f,!0);l.sqlite3_result_text(a,m,y,l.SQLITE_WASM_DEALLOC);break}case"object":if(f===null){l.sqlite3_result_null(a);break}if(A.isBindableTypedArray(f)){const m=u.allocFromTypedArray(f);l.sqlite3_result_blob(a,m,f.byteLength,l.SQLITE_WASM_DEALLOC);break}default:C("Don't not how to handle this UDF result value:",typeof f,f)}}catch(m){l.sqlite3_result_error_js(a,m)}},l.sqlite3_column_js=function(a,f,m=!0){const y=l.sqlite3_column_value(a,f);return y===0?void 0:l.sqlite3_value_to_js(y,m)};const g=(function(a,f,m){m=l[m],this.ptr?u.pokePtr(this.ptr,0):this.ptr=u.allocPtr();const y=m(a,f,this.ptr);if(y)return E.toss(y,arguments[2]+"() failed with code "+y);const F=u.peekPtr(this.ptr);return F?l.sqlite3_value_to_js(F,!0):void 0}).bind(Object.create(null));l.sqlite3_preupdate_new_js=(a,f)=>g(a,f,"sqlite3_preupdate_new"),l.sqlite3_preupdate_old_js=(a,f)=>g(a,f,"sqlite3_preupdate_old"),l.sqlite3changeset_new_js=(a,f)=>g(a,f,"sqlite3changeset_new"),l.sqlite3changeset_old_js=(a,f)=>g(a,f,"sqlite3changeset_old");const h={WasmAllocError:U,SQLite3Error:E,capi:l,util:A,wasm:u,config:i,version:Object.create(null),client:void 0,asyncPostInit:async function a(){if(a.isReady instanceof Promise)return a.isReady;let f=n.initializersAsync;delete n.initializersAsync;const m=async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),y=V=>{throw i.error("an async sqlite3 initializer failed:",V),V};if(!f||!f.length)return a.isReady=m().catch(y);f=f.map(V=>V instanceof Function?async J=>V(h):V),f.push(m);let F=Promise.resolve(h);for(;f.length;)F=F.then(f.shift());return a.isReady=F.catch(y)},scriptInfo:void 0};try{n.initializers.forEach(a=>{a(h)})}catch(a){throw console.error("sqlite3 bootstrap initializer threw:",a),a}return delete n.initializers,n.sqlite3=h,h},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(n){n.bigIntEnabled===void 0&&(n.bigIntEnabled=!!globalThis.BigInt64Array);const o=(...g)=>{throw new Error(g.join(" "))};n.exports||Object.defineProperty(n,"exports",{enumerable:!0,configurable:!0,get:()=>n.instance&&n.instance.exports});const i=n.pointerIR||"i32",l=n.ptrSizeof=i==="i32"?4:i==="i64"?8:o("Unhandled ptrSizeof:",i),u=Object.create(null);u.heapSize=0,u.memory=null,u.freeFuncIndexes=[],u.scopedAlloc=[],u.utf8Decoder=new TextDecoder,u.utf8Encoder=new TextEncoder("utf-8"),n.sizeofIR=g=>{switch(g){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return l;default:return(""+g).endsWith("*")?l:void 0}};const I=function(){if(u.memory){if(u.heapSize===u.memory.buffer.byteLength)return u}else u.memory=n.memory instanceof WebAssembly.Memory?n.memory:n.exports.memory;const g=u.memory.buffer;return u.HEAP8=new Int8Array(g),u.HEAP8U=new Uint8Array(g),u.HEAP16=new Int16Array(g),u.HEAP16U=new Uint16Array(g),u.HEAP32=new Int32Array(g),u.HEAP32U=new Uint32Array(g),n.bigIntEnabled&&(u.HEAP64=new BigInt64Array(g),u.HEAP64U=new BigUint64Array(g)),u.HEAP32F=new Float32Array(g),u.HEAP64F=new Float64Array(g),u.heapSize=g.byteLength,u};n.heap8=()=>I().HEAP8,n.heap8u=()=>I().HEAP8U,n.heap16=()=>I().HEAP16,n.heap16u=()=>I().HEAP16U,n.heap32=()=>I().HEAP32,n.heap32u=()=>I().HEAP32U,n.heapForSize=function(g,h=!0){const a=u.memory&&u.heapSize===u.memory.buffer.byteLength?u:I();switch(g){case Int8Array:return a.HEAP8;case Uint8Array:return a.HEAP8U;case Int16Array:return a.HEAP16;case Uint16Array:return a.HEAP16U;case Int32Array:return a.HEAP32;case Uint32Array:return a.HEAP32U;case 8:return h?a.HEAP8U:a.HEAP8;case 16:return h?a.HEAP16U:a.HEAP16;case 32:return h?a.HEAP32U:a.HEAP32;case 64:if(a.HEAP64)return h?a.HEAP64U:a.HEAP64;break;default:if(n.bigIntEnabled){if(g===globalThis.BigUint64Array)return a.HEAP64U;if(g===globalThis.BigInt64Array)return a.HEAP64;break}}o("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},n.functionTable=function(){return n.exports.__indirect_function_table},n.functionEntry=function(g){const h=n.functionTable();return g<h.length?h.get(g):void 0},n.jsFuncToWasm=function g(h,a){if(g._||(g._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(y,F,V){V<128?y[F](V):y[F](V%128|128,V>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(y){const F=g._.rxJSig.exec(y);return F?F[2]:y.substr(1)},letterType:y=>g._.sigTypes[y]||o("Invalid signature letter:",y),pushSigType:(y,F)=>y.push(g._.typeCodes[g._.letterType(F)])}),typeof h=="string"){const y=a;a=h,h=y}const f=g._.sigParams(a),m=[1,96];g._.uleb128Encode(m,"push",f.length);for(const y of f)g._.pushSigType(m,y);return a[0]==="v"?m.push(0):(m.push(1),g._.pushSigType(m,a[0])),g._.uleb128Encode(m,"unshift",m.length),m.unshift(0,97,115,109,1,0,0,0,1),m.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(m)),{e:{f:h}}).exports.f};const E=function(g,h,a){if(a&&!u.scopedAlloc.length&&o("No scopedAllocPush() scope is active."),typeof g=="string"){const F=h;h=g,g=F}typeof h=="string"&&g instanceof Function||o("Invalid arguments: expecting (function,signature) or (signature,function).");const f=n.functionTable(),m=f.length;let y;for(;u.freeFuncIndexes.length&&(y=u.freeFuncIndexes.pop(),f.get(y));)y=null;y||(y=m,f.grow(1));try{return f.set(y,g),a&&u.scopedAlloc[u.scopedAlloc.length-1].push(y),y}catch(F){if(!(F instanceof TypeError))throw y===m&&u.freeFuncIndexes.push(m),F}try{const F=n.jsFuncToWasm(g,h);f.set(y,F),a&&u.scopedAlloc[u.scopedAlloc.length-1].push(y)}catch(F){throw y===m&&u.freeFuncIndexes.push(m),F}return y};n.installFunction=(g,h)=>E(g,h,!1),n.scopedInstallFunction=(g,h)=>E(g,h,!0),n.uninstallFunction=function(g){if(!g&&g!==0)return;const h=u.freeFuncIndexes,a=n.functionTable();h.push(g);const f=a.get(g);return a.set(g,null),f},n.peek=function(g,h="i8"){h.endsWith("*")&&(h=i);const a=u.memory&&u.heapSize===u.memory.buffer.byteLength?u:I(),f=Array.isArray(g)?[]:void 0;let m;do{switch(f&&(g=arguments[0].shift()),h){case"i1":case"i8":m=a.HEAP8[0|g];break;case"i16":m=a.HEAP16[g>>1];break;case"i32":m=a.HEAP32[g>>2];break;case"float":case"f32":m=a.HEAP32F[g>>2];break;case"double":case"f64":m=Number(a.HEAP64F[g>>3]);break;case"i64":if(n.bigIntEnabled){m=BigInt(a.HEAP64[g>>3]);break}default:o("Invalid type for peek():",h)}f&&f.push(m)}while(f&&arguments[0].length);return f||m},n.poke=function(g,h,a="i8"){a.endsWith("*")&&(a=i);const f=u.memory&&u.heapSize===u.memory.buffer.byteLength?u:I();for(const m of Array.isArray(g)?g:[g])switch(a){case"i1":case"i8":f.HEAP8[0|m]=h;continue;case"i16":f.HEAP16[m>>1]=h;continue;case"i32":f.HEAP32[m>>2]=h;continue;case"float":case"f32":f.HEAP32F[m>>2]=h;continue;case"double":case"f64":f.HEAP64F[m>>3]=h;continue;case"i64":if(f.HEAP64){f.HEAP64[m>>3]=BigInt(h);continue}default:o("Invalid type for poke(): "+a)}return this},n.peekPtr=(...g)=>n.peek(g.length===1?g[0]:g,i),n.pokePtr=(g,h=0)=>n.poke(g,h,i),n.peek8=(...g)=>n.peek(g.length===1?g[0]:g,"i8"),n.poke8=(g,h)=>n.poke(g,h,"i8"),n.peek16=(...g)=>n.peek(g.length===1?g[0]:g,"i16"),n.poke16=(g,h)=>n.poke(g,h,"i16"),n.peek32=(...g)=>n.peek(g.length===1?g[0]:g,"i32"),n.poke32=(g,h)=>n.poke(g,h,"i32"),n.peek64=(...g)=>n.peek(g.length===1?g[0]:g,"i64"),n.poke64=(g,h)=>n.poke(g,h,"i64"),n.peek32f=(...g)=>n.peek(g.length===1?g[0]:g,"f32"),n.poke32f=(g,h)=>n.poke(g,h,"f32"),n.peek64f=(...g)=>n.peek(g.length===1?g[0]:g,"f64"),n.poke64f=(g,h)=>n.poke(g,h,"f64"),n.getMemValue=n.peek,n.getPtrValue=n.peekPtr,n.setMemValue=n.poke,n.setPtrValue=n.pokePtr,n.isPtr32=g=>typeof g=="number"&&g===(0|g)&&g>=0,n.isPtr=n.isPtr32,n.cstrlen=function(g){if(!g||!n.isPtr(g))return null;const h=I().HEAP8U;let a=g;for(;h[a]!==0;++a);return a-g};const C=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer;n.cstrToJs=function(g){const h=n.cstrlen(g);return h?(a=I().HEAP8U,f=g,m=g+h,u.utf8Decoder.decode(a.buffer instanceof C?a.slice(f,m):a.subarray(f,m))):h===null?h:"";var a,f,m},n.jstrlen=function(g){if(typeof g!="string")return null;const h=g.length;let a=0;for(let f=0;f<h;++f){let m=g.charCodeAt(f);m>=55296&&m<=57343&&(m=65536+((1023&m)<<10)|1023&g.charCodeAt(++f)),m<=127?++a:a+=m<=2047?2:m<=65535?3:4}return a},n.jstrcpy=function(g,h,a=0,f=-1,m=!0){if(h&&(h instanceof Int8Array||h instanceof Uint8Array)||o("jstrcpy() target must be an Int8Array or Uint8Array."),f<0&&(f=h.length-a),!(f>0&&a>=0))return 0;let y=0,F=g.length;const V=a,J=a+f-(m?1:0);for(;y<F&&a<J;++y){let N=g.charCodeAt(y);if(N>=55296&&N<=57343&&(N=65536+((1023&N)<<10)|1023&g.charCodeAt(++y)),N<=127){if(a>=J)break;h[a++]=N}else if(N<=2047){if(a+1>=J)break;h[a++]=192|N>>6,h[a++]=128|63&N}else if(N<=65535){if(a+2>=J)break;h[a++]=224|N>>12,h[a++]=128|N>>6&63,h[a++]=128|63&N}else{if(a+3>=J)break;h[a++]=240|N>>18,h[a++]=128|N>>12&63,h[a++]=128|N>>6&63,h[a++]=128|63&N}}return m&&(h[a++]=0),a-V},n.cstrncpy=function(g,h,a){if(g&&h||o("cstrncpy() does not accept NULL strings."),a<0)a=n.cstrlen(strPtr)+1;else if(!(a>0))return 0;const f=n.heap8u();let m,y=0;for(;y<a&&(m=f[h+y]);++y)f[g+y]=m;return y<a&&(f[g+y++]=0),y},n.jstrToUintArray=(g,h=!1)=>u.utf8Encoder.encode(h?g+"\0":g);const W=(g,h)=>{g.alloc instanceof Function&&g.dealloc instanceof Function||o("Object is missing alloc() and/or dealloc() function(s)","required by",h+"().")},P=function(g,h,a,f){if(W(n,f),typeof g!="string")return null;{const m=u.utf8Encoder.encode(g),y=a(m.length+1),F=I().HEAP8U;return F.set(m,y),F[y+m.length]=0,h?[y,m.length]:y}};n.allocCString=(g,h=!1)=>P(g,h,n.alloc,"allocCString()"),n.scopedAllocPush=function(){W(n,"scopedAllocPush");const g=[];return u.scopedAlloc.push(g),g},n.scopedAllocPop=function(g){W(n,"scopedAllocPop");const h=arguments.length?u.scopedAlloc.indexOf(g):u.scopedAlloc.length-1;h<0&&o("Invalid state object for scopedAllocPop()."),arguments.length===0&&(g=u.scopedAlloc[h]),u.scopedAlloc.splice(h,1);for(let a;a=g.pop();)n.functionEntry(a)?n.uninstallFunction(a):n.dealloc(a)},n.scopedAlloc=function(g){u.scopedAlloc.length||o("No scopedAllocPush() scope is active.");const h=n.alloc(g);return u.scopedAlloc[u.scopedAlloc.length-1].push(h),h},Object.defineProperty(n.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>u.scopedAlloc.length,set:()=>o("The 'active' property is read-only.")}),n.scopedAllocCString=(g,h=!1)=>P(g,h,n.scopedAlloc,"scopedAllocCString()");const L=function(g,h){const a=n[g?"scopedAlloc":"alloc"]((h.length+1)*n.ptrSizeof);let f=0;return h.forEach(m=>{n.pokePtr(a+n.ptrSizeof*f++,n[g?"scopedAllocCString":"allocCString"](""+m))}),n.pokePtr(a+n.ptrSizeof*f,0),a};n.scopedAllocMainArgv=g=>L(!0,g),n.allocMainArgv=g=>L(!1,g),n.cArgvToJs=(g,h)=>{const a=[];for(let f=0;f<g;++f){const m=n.peekPtr(h+n.ptrSizeof*f);a.push(m?n.cstrToJs(m):null)}return a},n.scopedAllocCall=function(g){n.scopedAllocPush();try{return g()}finally{n.scopedAllocPop()}};const M=function(g,h,a){W(n,a);const f=h?"i64":i;let m=n[a](g*(h?8:l));if(n.poke(m,0,f),g===1)return m;const y=[m];for(let F=1;F<g;++F)m+=h?8:l,y[F]=m,n.poke(m,0,f);return y};n.allocPtr=(g=1,h=!0)=>M(g,h,"alloc"),n.scopedAllocPtr=(g=1,h=!0)=>M(g,h,"scopedAlloc"),n.xGet=function(g){return n.exports[g]||o("Cannot find exported symbol:",g)};const Q=(g,h)=>o(g+"() requires",h,"argument(s).");n.xCall=function(g,...h){const a=g instanceof Function?g:n.xGet(g);return a instanceof Function||o("Exported symbol",g,"is not a function."),a.length!==h.length&&Q(a===g?a.name:g,a.length),arguments.length===2&&Array.isArray(arguments[1])?a.apply(null,arguments[1]):a.apply(null,h)},u.xWrap=Object.create(null),u.xWrap.convert=Object.create(null),u.xWrap.convert.arg=new Map,u.xWrap.convert.result=new Map;const $=u.xWrap.convert.arg,k=u.xWrap.convert.result;n.bigIntEnabled&&$.set("i64",g=>BigInt(g));const T=i==="i32"?g=>0|g:g=>BigInt(g)|BigInt(0);$.set("i32",T).set("i16",g=>65535&g).set("i8",g=>255&g).set("f32",g=>Number(g).valueOf()).set("float",$.get("f32")).set("f64",$.get("f32")).set("double",$.get("f64")).set("int",$.get("i32")).set("null",g=>g).set(null,$.get("null")).set("**",T).set("*",T),k.set("*",T).set("pointer",T).set("number",g=>Number(g)).set("void",g=>{}).set("null",g=>g).set(null,k.get("null"));{const g=["i8","i16","i32","int","f32","float","f64","double"];n.bigIntEnabled&&g.push("i64");const h=$.get(i);for(const a of g)$.set(a+"*",h),k.set(a+"*",h),k.set(a,$.get(a)||o("Missing arg converter:",a))}const z=function(g){return typeof g=="string"?n.scopedAllocCString(g):g?T(g):null};$.set("string",z).set("utf8",z).set("pointer",z),k.set("string",g=>n.cstrToJs(g)).set("utf8",k.get("string")).set("string:dealloc",g=>{try{return g?n.cstrToJs(g):null}finally{n.dealloc(g)}}).set("utf8:dealloc",k.get("string:dealloc")).set("json",g=>JSON.parse(n.cstrToJs(g))).set("json:dealloc",g=>{try{return g?JSON.parse(n.cstrToJs(g)):null}finally{n.dealloc(g)}});const R=class{constructor(g){this.name=g.name||"unnamed adapter"}convertArg(g,h,a){o("AbstractArgAdapter must be subclassed.")}};$.FuncPtrAdapter=class ot extends R{constructor(h){super(h),$.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",h),this.name=h.name||"unnamed",this.signature=h.signature,h.contextKey instanceof Function&&(this.contextKey=h.contextKey,h.bindScope||(h.bindScope="context")),this.bindScope=h.bindScope||o("FuncPtrAdapter options requires a bindScope (explicit or implied)."),ot.bindScopes.indexOf(h.bindScope)<0&&o("Invalid options.bindScope ("+h.bindMod+") for FuncPtrAdapter. Expecting one of: ("+ot.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=h.callProxy instanceof Function?h.callProxy:void 0}contextKey(h,a){return this}contextMap(h){const a=this.__cmap||(this.__cmap=new Map);let f=a.get(h);return f===void 0&&a.set(h,f=[]),f}convertArg(h,a,f){let m=this.singleton;if(!m&&this.isContext&&(m=this.contextMap(this.contextKey(a,f))),m&&m[0]===h)return m[1];if(h instanceof Function){this.callProxy&&(h=this.callProxy(h));const y=E(h,this.signature,this.isTransient);if(ot.debugFuncInstall&&ot.debugOut("FuncPtrAdapter installed",this,this.contextKey(a,f),"@"+y,h),m){if(m[1]){ot.debugFuncInstall&&ot.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(a,f),"@"+m[1],h);try{u.scopedAlloc[u.scopedAlloc.length-1].push(m[1])}catch{}}m[0]=h,m[1]=y}return y}if(n.isPtr(h)||h==null){if(m&&m[1]&&m[1]!==h){ot.debugFuncInstall&&ot.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(a,f),"@"+m[1],h);try{u.scopedAlloc[u.scopedAlloc.length-1].push(m[1])}catch{}m[0]=m[1]=0|h}return h||0}throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},$.FuncPtrAdapter.warnOnUse=!1,$.FuncPtrAdapter.debugFuncInstall=!1,$.FuncPtrAdapter.debugOut=console.debug.bind(console),$.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const U=g=>$.get(g)||o("Argument adapter not found:",g),A=g=>k.get(g)||o("Result adapter not found:",g);u.xWrap.convertArg=(g,...h)=>U(g)(...h),u.xWrap.convertArgNoCheck=(g,...h)=>$.get(g)(...h),u.xWrap.convertResult=(g,h)=>g===null?h:g?A(g)(h):void 0,u.xWrap.convertResultNoCheck=(g,h)=>g===null?h:g?k.get(g)(h):void 0,n.xWrap=function(g,h,...a){arguments.length===3&&Array.isArray(arguments[2])&&(a=arguments[2]),n.isPtr(g)&&(g=n.functionEntry(g)||o("Function pointer not found in WASM function table."));const f=g instanceof Function,m=f?g:n.xGet(g);if(f&&(g=m.name||"unnamed function"),a.length!==m.length&&Q(g,m.length),h===null&&m.length===0)return m;h!=null&&A(h);for(const F of a)F instanceof R?$.set(F,(...V)=>F.convertArg(...V)):U(F);const y=u.xWrap;return m.length===0?(...F)=>F.length?Q(g,m.length):y.convertResult(h,m.call(null)):function(...F){F.length!==m.length&&Q(g,m.length);const V=n.scopedAllocPush();try{let J=0;for(;J<F.length;++J)F[J]=y.convertArgNoCheck(a[J],F[J],F,J);return y.convertResultNoCheck(h,m.apply(null,F))}finally{n.scopedAllocPop(V)}}};const K=function(g,h,a,f,m,y){if(typeof a=="string"){if(h===1)return y.get(a);if(h===2)return f?(f instanceof Function||o(m,"requires a function argument."),y.set(a,f),g):(y.get(a),g)}o("Invalid arguments to",m)};return n.xWrap.resultAdapter=function g(h,a){return K(g,arguments.length,h,a,"resultAdapter()",k)},n.xWrap.argAdapter=function g(h,a){return K(g,arguments.length,h,a,"argAdapter()",$)},n.xWrap.FuncPtrAdapter=$.FuncPtrAdapter,n.xCallWrapped=function(g,h,a,...f){return Array.isArray(arguments[3])&&(f=arguments[3]),n.xWrap(g,h,a||[]).apply(null,f||[])},n.xWrap.testConvertArg=u.xWrap.convertArg,n.xWrap.testConvertResult=u.xWrap.convertResult,n},globalThis.WhWasmUtilInstaller.yawl=(function(n){const o=()=>fetch(n.uri,{credentials:"same-origin"}),i=this,l=function(u){if(n.wasmUtilTarget){const I=(...C)=>{throw new Error(C.join(" "))},E=n.wasmUtilTarget;if(E.module=u.module,E.instance=u.instance,E.instance.exports.memory||(E.memory=n.imports&&n.imports.env&&n.imports.env.memory||I("Missing 'memory' object!")),!E.alloc&&u.instance.exports.malloc){const C=u.instance.exports;E.alloc=function(W){return C.malloc(W)||I("Allocation of",W,"bytes failed.")},E.dealloc=function(W){C.free(W)}}i(E)}return n.onload&&n.onload(u,n),u};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(o(),n.imports||{}).then(l)}:function(){return o().then(u=>u.arrayBuffer()).then(u=>WebAssembly.instantiate(u,n.imports||{})).then(l)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function n(o){const i=(...S)=>{throw new Error(S.join(" "))};o.heap instanceof WebAssembly.Memory||o.heap instanceof Function||i("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(S){o[S]instanceof Function||i("Config option '"+S+"' must be a function.")});const l=n,u=o.heap instanceof Function?o.heap:()=>new Uint8Array(o.heap.buffer),I=o.alloc,E=o.dealloc,C=o.log||console.log.bind(console),W=o.memberPrefix||"",P=o.memberSuffix||"",L=o.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!o.bigIntEnabled,M=globalThis.BigInt,Q=globalThis.BigInt64Array,$=o.ptrSizeof||4,k=o.ptrIR||"i32";l.debugFlags||(l.__makeDebugFlags=function(S=null){S&&S.__flags&&(S=S.__flags);const x=function b(q){return arguments.length===0?b.__flags:(q<0?(delete b.__flags.getter,delete b.__flags.setter,delete b.__flags.alloc,delete b.__flags.dealloc):(b.__flags.getter=!!(1&q),b.__flags.setter=!!(2&q),b.__flags.alloc=!!(4&q),b.__flags.dealloc=!!(8&q)),b._flags)};return Object.defineProperty(x,"__flags",{iterable:!1,writable:!1,value:Object.create(S)}),S||x(0),x},l.debugFlags=l.__makeDebugFlags());const T=function(){const S=new ArrayBuffer(2);return new DataView(S).setInt16(0,256,!0),new Int16Array(S)[0]===256}(),z=S=>(x=>x[1]==="(")(S)?"p":S[0],R=function(S){switch(z(S)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return k;case"j":return"i64";case"f":return"float";case"d":return"double"}i("Unhandled signature IR:",S)},U=Q?()=>!0:()=>i("BigInt64Array is not available."),A=(S,x)=>S+"::"+x,K=new WeakMap,g="(pointer-is-external)",h=function(S,x,b){if(b||(b=K.get(x)),b){if(K.delete(x),Array.isArray(x.ondispose)){let q;for(;q=x.ondispose.shift();)try{q instanceof Function?q.call(x):q instanceof pe?q.dispose():typeof q=="number"&&E(q)}catch(O){console.warn("ondispose() for",S.structName,"@",b,"threw. NOT propagating it.",O)}}else if(x.ondispose instanceof Function)try{x.ondispose()}catch(q){console.warn("ondispose() for",S.structName,"@",b,"threw. NOT propagating it.",q)}delete x.ondispose,S.debugFlags.__flags.dealloc&&C("debug.dealloc:",x[g]?"EXTERNAL":"",S.structName,"instance:",S.structInfo.sizeof,"bytes @"+b),x[g]||E(b)}},a=S=>({configurable:!1,writable:!1,iterable:!1,value:S}),f=function(S,x,b){let q=!b;b?Object.defineProperty(x,g,a(b)):(b=I(S.structInfo.sizeof))||i("Allocation of",S.structName,"structure failed.");try{S.debugFlags.__flags.alloc&&C("debug.alloc:",q?"":"EXTERNAL",S.structName,"instance:",S.structInfo.sizeof,"bytes @"+b),q&&u().fill(0,b,b+S.structInfo.sizeof),K.set(x,b)}catch(O){throw h(S,x,b),O}},m=a(S=>W+S+P),y=function(S,x,b=!0){let q=S.members[x];if(!q&&(W||P)){for(const O of Object.values(S.members))if(O.key===x){q=O;break}!q&&b&&i(A(S.name,x),"is not a mapped struct member.")}return q},F=function S(x,b,q=!1){S._||(S._=D=>D.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const O=y(x.structInfo,b,!0);return q?S._(O.signature):O.signature},V={configurable:!1,enumerable:!1,get:function(){return K.get(this)},set:()=>i("Cannot assign the 'pointer' property of a struct.")},J=a(function(){const S=[];for(const x of Object.keys(this.structInfo.members))S.push(this.memberKey(x));return S}),N=new TextDecoder("utf-8"),te=new TextEncoder,ae=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,de=function(S){S.signature!=="s"&&i("Invalid member type signature for C-string value:",JSON.stringify(S))},ie=function(S,x){const b=y(S.structInfo,x,!0);de(b);const q=S[b.key];if(!q)return null;let O=q;const D=u();for(;D[O]!==0;++O);return q===O?"":(H=D,ee=q,Z=O,N.decode(H.buffer instanceof ae?H.slice(ee,Z):H.subarray(ee,Z)));var H,ee,Z},se=function(S,...x){S.ondispose?Array.isArray(S.ondispose)||(S.ondispose=[S.ondispose]):S.ondispose=[],S.ondispose.push(...x)},ce=function(S){const x=te.encode(S),b=I(x.length+1);b||i("Allocation error while duplicating string:",S);const q=u();return q.set(x,b),q[b+x.length]=0,b},pe=function(S,x){arguments[2]!==a&&i("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:a(S),structInfo:a(x)})};pe.prototype=Object.create(null,{dispose:a(function(){h(this.constructor,this)}),lookupMember:a(function(S,x=!0){return y(this.structInfo,S,x)}),memberToJsString:a(function(S){return ie(this,S)}),memberIsString:a(function(S,x=!0){return function(b,q,O=!1){const D=y(b.structInfo,q,O);return!(!D||D.signature.length!==1||D.signature[0]!=="s")&&D}(this,S,x)}),memberKey:m,memberKeys:J,memberSignature:a(function(S,x=!1){return F(this,S,x)}),memoryDump:a(function(){const S=this.pointer;return S?new Uint8Array(u().slice(S,S+this.structInfo.sizeof)):null}),pointer:V,setMemberCString:a(function(S,x){return function(b,q,O){const D=y(b.structInfo,q,!0);de(D);const H=ce(O);return b[D.key]=H,se(b,H),b}(this,S,x)})}),Object.assign(pe.prototype,{addOnDispose:function(...S){return se(this,...S),this}}),Object.defineProperties(pe,{allocCString:a(ce),isA:a(S=>S instanceof pe),hasExternalPointer:a(S=>S instanceof pe&&!!S[g]),memberKey:m});const Ie=S=>Number.isFinite(S)||S instanceof(M||Number),Se=function S(x,b,q){if(!S._){S._={getters:{},setters:{},sw:{}};const fe=["i","c","C","p","P","s","f","d","v()"];L&&fe.push("j"),fe.forEach(function(Me){S._.getters[Me]=function(je){switch(z(je)){case"p":case"P":case"s":switch($){case 4:return"getInt32";case 8:return U()&&"getBigInt64"}break;case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return U()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}i("Unhandled DataView getter for signature:",je)}(Me),S._.setters[Me]=function(je){switch(z(je)){case"p":case"P":case"s":switch($){case 4:return"setInt32";case 8:return U()&&"setBigInt64"}break;case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return U()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}i("Unhandled DataView setter for signature:",je)}(Me),S._.sw[Me]=function(je){switch(z(je)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return U()&&M;case"p":case"P":case"s":switch($){case 4:return Number;case 8:return U()&&M}}i("Unhandled DataView set wrapper for signature:",je)}(Me)});const Ce=/^[ipPsjfdcC]$/,De=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;S.sigCheck=function(Me,je,Je,ft){Object.prototype.hasOwnProperty.call(Me,Je)&&i(Me.structName,"already has a property named",Je+"."),Ce.test(ft)||De.test(ft)||i("Malformed signature for",A(Me.structName,je)+":",ft)}}const O=x.memberKey(b);S.sigCheck(x.prototype,b,O,q.signature),q.key=O,q.name=b;const D=z(q.signature),H=A(x.prototype.structName,O),ee=x.prototype.debugFlags.__flags,Z=Object.create(null);var Le,ke;Z.configurable=!1,Z.enumerable=!1,Z.get=function(){ee.getter&&C("debug.getter:",S._.getters[D],"for",R(D),H,"@",this.pointer,"+",q.offset,"sz",q.sizeof);let fe=new DataView(u().buffer,this.pointer+q.offset,q.sizeof)[S._.getters[D]](0,T);return ee.getter&&C("debug.getter:",H,"result =",fe),fe},q.readOnly?Z.set=(Le=x.prototype.structName,ke=O,()=>i(A(Le,ke),"is read-only.")):Z.set=function(fe){if(ee.setter&&C("debug.setter:",S._.setters[D],"for",R(D),H,"@",this.pointer,"+",q.offset,"sz",q.sizeof,fe),this.pointer||i("Cannot set struct property on disposed instance."),fe===null)fe=0;else for(;!Ie(fe);){if(q.signature==="P"&&fe instanceof pe){fe=fe.pointer||0,ee.setter&&C("debug.setter:",H,"resolved to",fe);break}i("Invalid value for pointer-type",H+".")}new DataView(u().buffer,this.pointer+q.offset,q.sizeof)[S._.setters[D]](0,S._.sw[D](fe),T)},Object.defineProperty(x.prototype,O,Z)},B=function S(x,b){arguments.length===1?x=(b=x).name:b.name||(b.name=x),x||i("Struct name is required.");let q=!1;Object.keys(b.members).forEach(H=>{const ee=b.members[H];ee.sizeof?ee.sizeof===1?ee.signature==="c"||ee.signature==="C"||i("Unexpected sizeof==1 member",A(b.name,H),"with signature",ee.signature):(ee.sizeof%4!=0&&(console.warn("Invalid struct member description =",ee,"from",b),i(x,"member",H,"sizeof is not aligned. sizeof="+ee.sizeof)),ee.offset%4!=0&&(console.warn("Invalid struct member description =",ee,"from",b),i(x,"member",H,"offset is not aligned. offset="+ee.offset))):i(x,"member",H,"is missing sizeof."),(!q||q.offset<ee.offset)&&(q=ee)}),q?b.sizeof<q.offset+q.sizeof&&i("Invalid struct config:",x,"max member offset ("+q.offset+") ","extends past end of struct (sizeof="+b.sizeof+")."):i("No member property descriptions found.");const O=a(l.__makeDebugFlags(S.debugFlags)),D=function H(ee){this instanceof H?arguments.length?((ee!==(0|ee)||ee<=0)&&i("Invalid pointer value for",x,"constructor."),f(H,this,ee)):f(H,this):i("The",x,"constructor may only be called via 'new'.")};return Object.defineProperties(D,{debugFlags:O,isA:a(H=>H instanceof D),memberKey:m,memberKeys:J,methodInfoForKey:a(function(H){}),structInfo:a(b),structName:a(x)}),D.prototype=new pe(x,b,a),Object.defineProperties(D.prototype,{debugFlags:O,constructor:a(D)}),Object.keys(b.members).forEach(H=>Se(D,H,b.members[H])),D};return B.StructType=pe,B.config=o,B.allocCString=ce,B.debugFlags||(B.debugFlags=l.__makeDebugFlags(l.debugFlags)),B},globalThis.sqlite3ApiBootstrap.initializers.push(function(n){const o=(...k)=>{throw new Error(k.join(" "))},i=n.capi,l=n.wasm,u=n.util;if(globalThis.WhWasmUtilInstaller(l),delete globalThis.WhWasmUtilInstaller,l.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new l.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(k,T)=>k[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new l.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:k=>k[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new l.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:k=>{let T;return(z,R,U,A)=>{try{const K=l.cArgvToJs(R,U);return T||(T=l.cArgvToJs(R,A)),0|k(K,T)}catch(K){return K.resultCode||i.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new l.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(k,T)=>k[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new l.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:k=>k[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new l.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(k,T)=>k[0],callProxy:k=>(T,z,R,U,A,K)=>{try{return R=R&&l.cstrToJs(R),U=U&&l.cstrToJs(U),A=A&&l.cstrToJs(A),K=K&&l.cstrToJs(K),k(T,z,R,U,A,K)||0}catch(g){return g.resultCode||i.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new l.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(k,T)=>k[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new l.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(k,T)=>k[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],l.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new l.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:k=>k[0],callProxy:k=>(T,z,R,U,A,K,g)=>{k(T,z,R,l.cstrToJs(U),l.cstrToJs(A),K,g)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new l.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:k=>k[0],callProxy:k=>(T,z,R,U,A)=>{k(T,z,l.cstrToJs(R),l.cstrToJs(U),A)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],l.bigIntEnabled&&l.exports.sqlite3changegroup_add){const k={signature:"i(ps)",callProxy:T=>(z,R)=>{try{return 0|T(z,l.cstrToJs(R))}catch(U){return U.resultCode||i.SQLITE_ERROR}}};l.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new l.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new l.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new l.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new l.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new l.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new l.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new l.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new l.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new l.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new l.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new l.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...k}),new l.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new l.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new l.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new l.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new l.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new l.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new l.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new l.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new l.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new l.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new l.xWrap.FuncPtrAdapter({name:"xFilter",...k,contextKey:(T,z)=>T[0]}),"*"]])}l.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],n.StructBinder=globalThis.Jaccwabyt({heap:l.heap8u,alloc:l.alloc,dealloc:l.dealloc,bigIntEnabled:l.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const k=l.xWrap.argAdapter("string");l.xWrap.argAdapter("string:flexible",A=>k(u.flexibleString(A))),l.xWrap.argAdapter("string:static",(function(A){return l.isPtr(A)?A:this[A=""+A]||(this[A]=l.allocCString(A))}).bind(Object.create(null)));const T=l.xWrap.argAdapter("*"),z=function(){};l.xWrap.argAdapter("sqlite3_filename",T)("sqlite3_context*",T)("sqlite3_value*",T)("void*",T)("sqlite3_changegroup*",T)("sqlite3_changeset_iter*",T)("sqlite3_session*",T)("sqlite3_stmt*",A=>{var K;return T(A instanceof(((K=n==null?void 0:n.oo1)==null?void 0:K.Stmt)||z)?A.pointer:A)})("sqlite3*",A=>{var K;return T(A instanceof(((K=n==null?void 0:n.oo1)==null?void 0:K.DB)||z)?A.pointer:A)})("sqlite3_index_info*",A=>T(A instanceof(i.sqlite3_index_info||z)?A.pointer:A))("sqlite3_module*",A=>T(A instanceof(i.sqlite3_module||z)?A.pointer:A))("sqlite3_vfs*",A=>typeof A=="string"?i.sqlite3_vfs_find(A)||n.SQLite3Error.toss(i.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",A):T(A instanceof(i.sqlite3_vfs||z)?A.pointer:A));const R=l.xWrap.resultAdapter("*");l.xWrap.resultAdapter("sqlite3*",R)("sqlite3_context*",R)("sqlite3_stmt*",R)("sqlite3_value*",R)("sqlite3_vfs*",R)("void*",R),l.exports.sqlite3_step.length===0&&(l.xWrap.doArgcCheck=!1,n.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const A of l.bindingSignatures)i[A[0]]=l.xWrap.apply(null,A);for(const A of l.bindingSignatures.wasmInternal)u[A[0]]=l.xWrap.apply(null,A);const U=function(A){return()=>o(A+"() is unavailable due to lack","of BigInt support in this build.")};for(const A of l.bindingSignatures.int64)i[A[0]]=l.bigIntEnabled?l.xWrap.apply(null,A):U(A[0]);if(delete l.bindingSignatures,l.exports.sqlite3__wasm_db_error){const A=l.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");u.sqlite3__wasm_db_error=function(K,g,h){return g instanceof n.WasmAllocError?(g=i.SQLITE_NOMEM,h=0):g instanceof Error&&(h=h||""+g,g=g.resultCode||i.SQLITE_ERROR),K?A(K,g,h):g}}else u.sqlite3__wasm_db_error=function(A,K,g){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),K}}{const k=l.xCall("sqlite3__wasm_enum_json");k||o("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),l.ctype=JSON.parse(l.cstrToJs(k));const T=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];l.bigIntEnabled&&T.push("serialize","session","vtab");for(const U of T)for(const A of Object.entries(l.ctype[U]))i[A[0]]=A[1];l.functionEntry(i.SQLITE_WASM_DEALLOC)||o("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+i.SQLITE_WASM_DEALLOC+").");const z=Object.create(null);for(const U of["resultCodes"])for(const A of Object.entries(l.ctype[U]))z[A[1]]=A[0];i.sqlite3_js_rc_str=U=>z[U];const R=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!u.isUIThread(),sqlite3_index_info:!l.bigIntEnabled,sqlite3_index_constraint:!l.bigIntEnabled,sqlite3_index_orderby:!l.bigIntEnabled,sqlite3_index_constraint_usage:!l.bigIntEnabled});for(const U of l.ctype.structs)R[U.name]||(i[U.name]=n.StructBinder(U));if(i.sqlite3_index_info){for(const U of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])i.sqlite3_index_info[U]=i[U],delete i[U];i.sqlite3_vtab_config=l.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const I=(k,T,z)=>u.sqlite3__wasm_db_error(k,i.SQLITE_MISUSE,T+"() requires "+z+" argument"+(z===1?"":"s")+"."),E=k=>u.sqlite3__wasm_db_error(k,i.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),C=k=>l.xWrap.argAdapter("sqlite3*")(k),W=k=>l.isPtr(k)?l.cstrToJs(k):k,P=(function(k,T){k=C(k);let z=this.dbMap.get(k);return T?(!z&&T>0&&this.dbMap.set(k,z=Object.create(null)),z):(this.dbMap.delete(k),z)}).bind(Object.assign(Object.create(null),{dbMap:new Map}));P.addCollation=function(k,T){const z=P(k,1);z.collation||(z.collation=new Set),z.collation.add(W(T).toLowerCase())},P._addUDF=function(k,T,z,R){T=W(T).toLowerCase();let U=R.get(T);U||R.set(T,U=new Set),U.add(z<0?-1:z)},P.addFunction=function(k,T,z){const R=P(k,1);R.udf||(R.udf=new Map),this._addUDF(k,T,z,R.udf)},P.addWindowFunc=function(k,T,z){const R=P(k,1);R.wudf||(R.wudf=new Map),this._addUDF(k,T,z,R.wudf)},P.cleanup=function(k){const T=[k=C(k)];for(const U of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const A=l.exports[U];T.length=A.length;try{i[U](...T)}catch(K){console.warn("close-time call of",U+"(",T,") threw:",K)}}const z=P(k,0);if(!z)return;if(z.collation){for(const U of z.collation)try{i.sqlite3_create_collation_v2(k,U,i.SQLITE_UTF8,0,0,0)}catch{}delete z.collation}let R;for(R=0;R<2;++R){const U=R?z.wudf:z.udf;if(!U)continue;const A=R?i.sqlite3_create_window_function:i.sqlite3_create_function_v2;for(const K of U){const g=K[0],h=K[1],a=[k,g,0,i.SQLITE_UTF8,0,0,0,0,0];R&&a.push(0);for(const f of h)try{a[2]=f,A.apply(null,a)}catch{}h.clear()}U.clear()}delete z.udf,delete z.wudf};{const k=l.xWrap("sqlite3_close_v2","int","sqlite3*");i.sqlite3_close_v2=function(T){if(arguments.length!==1)return I(T,"sqlite3_close_v2",1);if(T)try{P.cleanup(T)}catch{}return k(T)}}if(i.sqlite3session_table_filter){const k=l.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);i.sqlite3session_delete=function(T){if(arguments.length!==1)return I(pDb,"sqlite3session_delete",1);T&&i.sqlite3session_table_filter(T,0,0),k(T)}}{const k=(z,R)=>"argv["+R+"]:"+z[0]+":"+l.cstrToJs(z[1]).toLowerCase(),T=l.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new l.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:k}),new l.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:k})]);i.sqlite3_create_collation_v2=function(z,R,U,A,K,g){if(arguments.length!==6)return I(z,"sqlite3_create_collation_v2",6);if(15&U){if(i.SQLITE_UTF8!==(15&U))return E(z)}else U|=i.SQLITE_UTF8;try{const h=T(z,R,U,A,K,g);return h===0&&K instanceof Function&&P.addCollation(z,R),h}catch(h){return u.sqlite3__wasm_db_error(z,h)}},i.sqlite3_create_collation=(z,R,U,A,K)=>arguments.length===5?i.sqlite3_create_collation_v2(z,R,U,A,K,0):I(z,"sqlite3_create_collation",5)}{const k=function(U,A){return U[0]+":"+(U[2]<0?-1:U[2])+":"+A+":"+l.cstrToJs(U[1]).toLowerCase()},T=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:k,callProxy:U=>(A,K,g)=>{try{U(A,...i.sqlite3_values_to_js(K,g))}catch(h){i.sqlite3_result_error_js(A,h)}}},xFinalAndValue:{signature:"v(p)",contextKey:k,callProxy:U=>A=>{try{i.sqlite3_result_js(A,U(A))}catch(K){i.sqlite3_result_error_js(A,K)}}},xFunc:{signature:"v(pip)",contextKey:k,callProxy:U=>(A,K,g)=>{try{i.sqlite3_result_js(A,U(A,...i.sqlite3_values_to_js(K,g)))}catch(h){i.sqlite3_result_error_js(A,h)}}},xDestroy:{signature:"v(p)",contextKey:k,callProxy:U=>A=>{try{U(A)}catch(K){console.error("UDF xDestroy method threw:",K)}}}}),z=l.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new l.xWrap.FuncPtrAdapter({name:"xFunc",...T.xFunc}),new l.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new l.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new l.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]),R=l.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new l.xWrap.FuncPtrAdapter({name:"xStep",...T.xInverseAndStep}),new l.xWrap.FuncPtrAdapter({name:"xFinal",...T.xFinalAndValue}),new l.xWrap.FuncPtrAdapter({name:"xValue",...T.xFinalAndValue}),new l.xWrap.FuncPtrAdapter({name:"xInverse",...T.xInverseAndStep}),new l.xWrap.FuncPtrAdapter({name:"xDestroy",...T.xDestroy})]);i.sqlite3_create_function_v2=function U(A,K,g,h,a,f,m,y,F){if(U.length!==arguments.length)return I(A,"sqlite3_create_function_v2",U.length);if(15&h){if(i.SQLITE_UTF8!==(15&h))return E(A)}else h|=i.SQLITE_UTF8;try{const V=z(A,K,g,h,a,f,m,y,F);return V===0&&(f instanceof Function||m instanceof Function||y instanceof Function||F instanceof Function)&&P.addFunction(A,K,g),V}catch(V){return console.error("sqlite3_create_function_v2() setup threw:",V),u.sqlite3__wasm_db_error(A,V,"Creation of UDF threw: "+V)}},i.sqlite3_create_function=function U(A,K,g,h,a,f,m,y){return U.length===arguments.length?i.sqlite3_create_function_v2(A,K,g,h,a,f,m,y,0):I(A,"sqlite3_create_function",U.length)},i.sqlite3_create_window_function=function U(A,K,g,h,a,f,m,y,F,V){if(U.length!==arguments.length)return I(A,"sqlite3_create_window_function",U.length);if(15&h){if(i.SQLITE_UTF8!==(15&h))return E(A)}else h|=i.SQLITE_UTF8;try{const J=R(A,K,g,h,a,f,m,y,F,V);return J===0&&(f instanceof Function||m instanceof Function||y instanceof Function||F instanceof Function||V instanceof Function)&&P.addWindowFunc(A,K,g),J}catch(J){return console.error("sqlite3_create_window_function() setup threw:",J),u.sqlite3__wasm_db_error(A,J,"Creation of UDF threw: "+J)}},i.sqlite3_create_function_v2.udfSetResult=i.sqlite3_create_function.udfSetResult=i.sqlite3_create_window_function.udfSetResult=i.sqlite3_result_js,i.sqlite3_create_function_v2.udfConvertArgs=i.sqlite3_create_function.udfConvertArgs=i.sqlite3_create_window_function.udfConvertArgs=i.sqlite3_values_to_js,i.sqlite3_create_function_v2.udfSetError=i.sqlite3_create_function.udfSetError=i.sqlite3_create_window_function.udfSetError=i.sqlite3_result_error_js}{const k=(z,R)=>(typeof z=="string"?R=-1:u.isSQLableTypedArray(z)?(R=z.byteLength,z=u.typedArrayToString(z instanceof ArrayBuffer?new Uint8Array(z):z)):Array.isArray(z)&&(z=z.join(""),R=-1),[z,R]),T={basic:l.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:l.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};i.sqlite3_prepare_v3=function z(R,U,A,K,g,h){if(z.length!==arguments.length)return I(R,"sqlite3_prepare_v3",z.length);const[a,f]=k(U,A);switch(typeof a){case"string":return T.basic(R,a,f,K,g,null);case"number":return T.full(R,a,f,K,g,h);default:return u.sqlite3__wasm_db_error(R,i.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},i.sqlite3_prepare_v2=function z(R,U,A,K,g){return z.length===arguments.length?i.sqlite3_prepare_v3(R,U,A,0,K,g):I(R,"sqlite3_prepare_v2",z.length)}}{const k=l.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),T=l.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);i.sqlite3_bind_text=function z(R,U,A,K,g){if(z.length!==arguments.length)return I(i.sqlite3_db_handle(R),"sqlite3_bind_text",z.length);if(l.isPtr(A)||A===null)return k(R,U,A,K,g);let h,a;A instanceof ArrayBuffer?A=new Uint8Array(A):Array.isArray(pMem)&&(A=pMem.join(""));try{if(u.isSQLableTypedArray(A))h=l.allocFromTypedArray(A),a=A.byteLength;else{if(typeof A!="string")return u.sqlite3__wasm_db_error(i.sqlite3_db_handle(R),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");[h,a]=l.allocCString(A)}return k(R,U,h,a,i.SQLITE_WASM_DEALLOC)}catch(f){return l.dealloc(h),u.sqlite3__wasm_db_error(i.sqlite3_db_handle(R),f)}},i.sqlite3_bind_blob=function z(R,U,A,K,g){if(z.length!==arguments.length)return I(i.sqlite3_db_handle(R),"sqlite3_bind_blob",z.length);if(l.isPtr(A)||A===null)return T(R,U,A,K,g);let h,a;A instanceof ArrayBuffer?A=new Uint8Array(A):Array.isArray(A)&&(A=A.join(""));try{if(u.isBindableTypedArray(A))h=l.allocFromTypedArray(A),a=K>=0?K:A.byteLength;else{if(typeof A!="string")return u.sqlite3__wasm_db_error(i.sqlite3_db_handle(R),i.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");[h,a]=l.allocCString(A)}return T(R,U,h,a,i.SQLITE_WASM_DEALLOC)}catch(f){return l.dealloc(h),u.sqlite3__wasm_db_error(i.sqlite3_db_handle(R),f)}}}i.sqlite3_config=function(k,...T){if(arguments.length<2)return i.SQLITE_MISUSE;switch(k){case i.SQLITE_CONFIG_COVERING_INDEX_SCAN:case i.SQLITE_CONFIG_MEMSTATUS:case i.SQLITE_CONFIG_SMALL_MALLOC:case i.SQLITE_CONFIG_SORTERREF_SIZE:case i.SQLITE_CONFIG_STMTJRNL_SPILL:case i.SQLITE_CONFIG_URI:return l.exports.sqlite3__wasm_config_i(k,T[0]);case i.SQLITE_CONFIG_LOOKASIDE:return l.exports.sqlite3__wasm_config_ii(k,T[0],T[1]);case i.SQLITE_CONFIG_MEMDB_MAXSIZE:return l.exports.sqlite3__wasm_config_j(k,T[0]);case i.SQLITE_CONFIG_GETMALLOC:case i.SQLITE_CONFIG_GETMUTEX:case i.SQLITE_CONFIG_GETPCACHE2:case i.SQLITE_CONFIG_GETPCACHE:case i.SQLITE_CONFIG_HEAP:case i.SQLITE_CONFIG_LOG:case i.SQLITE_CONFIG_MALLOC:case i.SQLITE_CONFIG_MMAP_SIZE:case i.SQLITE_CONFIG_MULTITHREAD:case i.SQLITE_CONFIG_MUTEX:case i.SQLITE_CONFIG_PAGECACHE:case i.SQLITE_CONFIG_PCACHE2:case i.SQLITE_CONFIG_PCACHE:case i.SQLITE_CONFIG_PCACHE_HDRSZ:case i.SQLITE_CONFIG_PMASZ:case i.SQLITE_CONFIG_SERIALIZED:case i.SQLITE_CONFIG_SINGLETHREAD:case i.SQLITE_CONFIG_SQLLOG:case i.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return i.SQLITE_NOTFOUND}};{const k=new Set;i.sqlite3_auto_extension=function(T){if(T instanceof Function)T=l.installFunction("i(ppp)",T);else if(arguments.length!==1||!l.isPtr(T))return i.SQLITE_MISUSE;const z=l.exports.sqlite3_auto_extension(T);return T!==arguments[0]&&(z===0?k.add(T):l.uninstallFunction(T)),z},i.sqlite3_cancel_auto_extension=function(T){return T&&arguments.length===1&&l.isPtr(T)?l.exports.sqlite3_cancel_auto_extension(T):0},i.sqlite3_reset_auto_extension=function(){l.exports.sqlite3_reset_auto_extension();for(const T of k)l.uninstallFunction(T);k.clear()}}const L=i.sqlite3_vfs_find("kvvfs");if(L)if(u.isUIThread()){const k=new i.sqlite3_kvvfs_methods(l.exports.sqlite3__wasm_kvvfs_methods());delete i.sqlite3_kvvfs_methods;const T=l.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,z=l.pstack,R=A=>l.peek(A)===115?sessionStorage:localStorage,U={xRead:(A,K,g,h)=>{const a=z.pointer,f=l.scopedAllocPush();try{const m=T(A,K);if(!m)return-3;const y=l.cstrToJs(m),F=R(A).getItem(y);if(!F)return-1;const V=F.length;if(h<=0)return V;if(h===1)return l.poke(g,0),V;const J=l.scopedAllocCString(F);return h>V+1&&(h=V+1),l.heap8u().copyWithin(g,J,J+h-1),l.poke(g+h-1,0),h-1}catch(m){return console.error("kvstorageRead()",m),-2}finally{z.restore(a),l.scopedAllocPop(f)}},xWrite:(A,K,g)=>{const h=z.pointer;try{const a=T(A,K);if(!a)return 1;const f=l.cstrToJs(a);return R(A).setItem(f,l.cstrToJs(g)),0}catch(a){return console.error("kvstorageWrite()",a),i.SQLITE_IOERR}finally{z.restore(h)}},xDelete:(A,K)=>{const g=z.pointer;try{const h=T(A,K);return h?(R(A).removeItem(l.cstrToJs(h)),0):1}catch(h){return console.error("kvstorageDelete()",h),i.SQLITE_IOERR}finally{z.restore(g)}}};for(const A of Object.keys(U))k[k.memberKey(A)]=l.installFunction(k.memberSignature(A),U[A])}else i.sqlite3_vfs_unregister(L);l.xWrap.FuncPtrAdapter.warnOnUse=!0;const M=n.StructBinder,Q=function k(T,z,R,U=k.installMethodArgcCheck){if(T instanceof M.StructType?R instanceof Function||l.isPtr(R)||o("Usage errror: expecting a Function or WASM pointer to one."):o("Usage error: target object is-not-a StructType."),arguments.length===1)return(h,a)=>k(T,h,a,U);k.argcProxy||(k.argcProxy=function(h,a,f,m){return function(...y){return f.length!==arguments.length&&o("Argument mismatch for",h.structInfo.name+"::"+a+": Native signature is:",m),f.apply(this,y)}},k.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((h,a)=>{if(typeof h=="number")try{l.uninstallFunction(h)}catch{}}),delete this.ondispose.__removeFuncList)});const A=T.memberSignature(z);A.length<2&&o("Member",z,"does not have a function pointer signature:",A);const K=T.memberKey(z),g=U&&!l.isPtr(R)?k.argcProxy(T,K,R,A):R;if(l.isPtr(g))g&&!l.functionEntry(g)&&o("Pointer",g,"is not a WASM function table entry."),T[K]=g;else{const h=l.installFunction(g,T.memberSignature(z,!0));T[K]=h,T.ondispose&&T.ondispose.__removeFuncList||(T.addOnDispose("ondispose.__removeFuncList handler",k.removeFuncList),T.ondispose.__removeFuncList=[]),T.ondispose.__removeFuncList.push(K,h)}return(h,a)=>k(T,h,a,U)};Q.installMethodArgcCheck=!1;const $=function(k,T,z=Q.installMethodArgcCheck){const R=new Map;for(const U of Object.keys(T)){const A=T[U],K=R.get(A);if(K){const g=k.memberKey(U);k[g]=k[k.memberKey(K)]}else Q(k,U,A,z),R.set(A,U)}return k};M.StructType.prototype.installMethod=function(k,T,z=Q.installMethodArgcCheck){return arguments.length<3&&k&&typeof k=="object"?$(this,...arguments):Q(this,...arguments)},M.StructType.prototype.installMethods=function(k,T=Q.installMethodArgcCheck){return $(this,k,T)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(n){n.version={libVersion:"3.46.1",libVersionNumber:3046001,sourceId:"2024-08-13 09:16:08 c9c2ab54ba1f5f46360f1b4f35d849cd3f080e6fc2b6c60e91b16c63f69a1e33",downloadVersion:3460100}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(n){const o=(...a)=>{throw new n.SQLite3Error(...a)},i=n.capi,l=n.wasm,u=n.util,I=new WeakMap,E=new WeakMap,C=(a,f,m)=>{const y=Object.getOwnPropertyDescriptor(a,f);return y?y.value:m},W=function(a,f){return f&&(a instanceof Q&&(a=a.pointer),o(f,"sqlite3 result code",f+":",a?i.sqlite3_errmsg(a):i.sqlite3_errstr(f))),arguments[0]},P=l.installFunction("i(ippp)",(function(a,f,m,y){i.SQLITE_TRACE_STMT===a&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+f+":",l.cstrToJs(y))}).bind({counter:0})),L=Object.create(null),M=function a(...f){if(!a._name2vfs){a._name2vfs=Object.create(null);const ie=typeof importScripts=="function"&&(se=>o("The VFS for",se,"is only available in the main window thread."));a._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:ie||(()=>"local")},a._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:ie||(()=>"session")}}const m=a.normalizeArgs(...f);let y=m.filename,F=m.vfs,V=m.flags;(typeof y!="string"&&typeof y!="number"||typeof V!="string"||F&&typeof F!="string"&&typeof F!="number")&&(n.config.error("Invalid DB ctor args",m,arguments),o("Invalid arguments for DB constructor."));let J=typeof y=="number"?l.cstrToJs(y):y;const N=a._name2vfs[J];N&&(F=N.vfs,y=J=N.filename(J));let te,ae=0;V.indexOf("c")>=0&&(ae|=i.SQLITE_OPEN_CREATE|i.SQLITE_OPEN_READWRITE),V.indexOf("w")>=0&&(ae|=i.SQLITE_OPEN_READWRITE),ae===0&&(ae|=i.SQLITE_OPEN_READONLY),ae|=i.SQLITE_OPEN_EXRESCODE;const de=l.pstack.pointer;try{const ie=l.pstack.allocPtr();let se=i.sqlite3_open_v2(y,ie,ae,F||0);te=l.peekPtr(ie),W(te,se),i.sqlite3_extended_result_codes(te,1),V.indexOf("t")>=0&&i.sqlite3_trace_v2(te,i.SQLITE_TRACE_STMT,P,te)}catch(ie){throw te&&i.sqlite3_close_v2(te),ie}finally{l.pstack.restore(de)}this.filename=J,I.set(this,te),E.set(this,Object.create(null));try{const ie=i.sqlite3_js_db_vfs(te)||o("Internal error: cannot get VFS for new db handle."),se=L[ie];se&&(se instanceof Function?se(this,n):W(te,i.sqlite3_exec(te,se,0,0,0)))}catch(ie){throw this.close(),ie}};M.setVfsPostOpenSql=function(a,f){L[a]=f},M.normalizeArgs=function(a=":memory:",f="c",m=null){const y={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(y,arguments[0]),y.flags===void 0&&(y.flags="c"),y.vfs===void 0&&(y.vfs=null),y.filename===void 0&&(y.filename=":memory:")):(y.filename=a,y.flags=f,y.vfs=m),y};const Q=function(...a){M.apply(this,a)};Q.dbCtorHelper=M;const $={null:1,number:2,string:3,boolean:4,blob:5};l.bigIntEnabled&&($.bigint=$.number);const k=function(){$!==arguments[2]&&o(i.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],I.set(this,arguments[1]),this.parameterCount=i.sqlite3_bind_parameter_count(this.pointer)},T=function(a){return a.pointer||o("DB has been closed."),a},z=function(a,f){return(f!==(0|f)||f<0||f>=a.columnCount)&&o("Column index",f,"is out of range."),a},R=(a,f,m,...y)=>{const F=a.prepare(f);try{const V=F.bind(m).step()?F.get(...y):void 0;return F.reset(),V}finally{F.finalize()}},U=(a,f,m,y)=>a.exec({sql:f,bind:m,rowMode:y,returnValue:"resultRows"});Q.checkRc=(a,f)=>W(a,f),Q.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return T(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const a=this.pointer;if(Object.keys(E.get(this)).forEach((f,m)=>{if(m&&m.pointer)try{m.finalize()}catch{}}),I.delete(this),E.delete(this),i.sqlite3_close_v2(a),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(a=!1,f=!1){const m=T(this).pointer;return a?f?i.sqlite3_total_changes64(m):i.sqlite3_total_changes(m):f?i.sqlite3_changes64(m):i.sqlite3_changes(m)},dbFilename:function(a="main"){return i.sqlite3_db_filename(T(this).pointer,a)},dbName:function(a=0){return i.sqlite3_db_name(T(this).pointer,a)},dbVfsName:function(a=0){let f;const m=i.sqlite3_js_db_vfs(T(this).pointer,a);if(m){const y=new i.sqlite3_vfs(m);try{f=l.cstrToJs(y.$zName)}finally{y.dispose()}}return f},prepare:function(a){T(this);const f=l.pstack.pointer;let m,y;try{m=l.pstack.alloc(8),Q.checkRc(this,i.sqlite3_prepare_v2(this.pointer,a,-1,m,null)),y=l.peekPtr(m)}finally{l.pstack.restore(f)}y||o("Cannot prepare empty SQL.");const F=new k(this,y,$);return E.get(this)[y]=F,F},exec:function(){T(this);const a=function(ae,de){const ie=Object.create(null);switch(ie.opt=Object.create(null),de.length){case 1:typeof de[0]=="string"||u.isSQLableTypedArray(de[0])||Array.isArray(de[0])?ie.sql=de[0]:de[0]&&typeof de[0]=="object"&&(ie.opt=de[0],ie.sql=ie.opt.sql);break;case 2:ie.sql=de[0],ie.opt=de[1];break;default:o("Invalid argument count for exec().")}ie.sql=u.flexibleString(ie.sql),typeof ie.sql!="string"&&o("Missing SQL argument or unsupported SQL value type.");const se=ie.opt;switch(se.returnValue){case"resultRows":se.resultRows||(se.resultRows=[]),ie.returnVal=()=>se.resultRows;break;case"saveSql":se.saveSql||(se.saveSql=[]),ie.returnVal=()=>se.saveSql;break;case void 0:case"this":ie.returnVal=()=>ae;break;default:o("Invalid returnValue value:",se.returnValue)}if(se.callback||se.returnValue||se.rowMode===void 0||(se.resultRows||(se.resultRows=[]),ie.returnVal=()=>se.resultRows),se.callback||se.resultRows)switch(se.rowMode===void 0?"array":se.rowMode){case"object":ie.cbArg=(ce,pe)=>{pe.columnNames||(pe.columnNames=ce.getColumnNames([]));const Ie=ce.get([]),Se=Object.create(null);for(const B in pe.columnNames)Se[pe.columnNames[B]]=Ie[B];return Se};break;case"array":ie.cbArg=ce=>ce.get([]);break;case"stmt":Array.isArray(se.resultRows)&&o("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),ie.cbArg=ce=>ce;break;default:if(u.isInt32(se.rowMode)){ie.cbArg=ce=>ce.get(se.rowMode);break}if(typeof se.rowMode=="string"&&se.rowMode.length>1&&se.rowMode[0]==="$"){const ce=se.rowMode.substr(1);ie.cbArg=pe=>{const Ie=pe.get(Object.create(null))[ce];return Ie===void 0?o(i.SQLITE_NOTFOUND,"exec(): unknown result column:",ce):Ie};break}o("Invalid rowMode:",se.rowMode)}return ie}(this,arguments);if(!a.sql)return o("exec() requires an SQL string.");const f=a.opt,m=f.callback,y=Array.isArray(f.resultRows)?f.resultRows:void 0;let F,V=f.bind,J=!!(a.cbArg||f.columnNames||y);const N=l.scopedAllocPush(),te=Array.isArray(f.saveSql)?f.saveSql:void 0;try{const ae=u.isSQLableTypedArray(a.sql);let de=ae?a.sql.byteLength:l.jstrlen(a.sql);const ie=l.scopedAlloc(2*l.ptrSizeof+(de+1)),se=ie+l.ptrSizeof;let ce=se+l.ptrSizeof;const pe=ce+de;for(ae?l.heap8().set(a.sql,ce):l.jstrcpy(a.sql,l.heap8(),ce,de,!1),l.poke(ce+de,0);ce&&l.peek(ce,"i8");){l.pokePtr([ie,se],0),Q.checkRc(this,i.sqlite3_prepare_v3(this.pointer,ce,de,0,ie,se));const Ie=l.peekPtr(ie);if(ce=l.peekPtr(se),de=pe-ce,Ie){if(te&&te.push(i.sqlite3_sql(Ie).trim()),F=new k(this,Ie,$),V&&F.parameterCount&&(F.bind(V),V=null),J&&F.columnCount){let Se=Array.isArray(f.columnNames)?0:1;if(J=!1,a.cbArg||y){const B=Object.create(null);for(;F.step();F._lockedByExec=!1){Se++==0&&F.getColumnNames(B.columnNames=f.columnNames||[]),F._lockedByExec=!0;const S=a.cbArg(F,B);if(y&&y.push(S),m&&m.call(f,S,F)===!1)break}F._lockedByExec=!1}Se===0&&F.getColumnNames(f.columnNames)}else F.step();F.reset().finalize(),F=null}}}finally{l.scopedAllocPop(N),F&&(delete F._lockedByExec,F.finalize())}return a.returnVal()},createFunction:function(a,f,m){const y=Se=>Se instanceof Function;switch(arguments.length){case 1:a=(m=a).name,f=m.xFunc||0;break;case 2:y(f)||(f=(m=f).xFunc||0)}m||(m={}),typeof a!="string"&&o("Invalid arguments: missing function name.");let F=m.xStep||0,V=m.xFinal||0;const J=m.xValue||0,N=m.xInverse||0;let te;y(f)?(te=!1,(y(F)||y(V))&&o("Ambiguous arguments: scalar or aggregate?"),F=V=null):y(F)?(y(V)||o("Missing xFinal() callback for aggregate or window UDF."),f=null):y(V)?o("Missing xStep() callback for aggregate or window UDF."):o("Missing function-type properties."),te===!1?(y(J)||y(N))&&o("xValue and xInverse are not permitted for non-window UDFs."):y(J)?(y(N)||o("xInverse must be provided if xValue is."),te=!0):y(N)&&o("xValue must be provided if xInverse is.");const ae=m.pApp;ae==null||typeof ae=="number"&&u.isInt32(ae)||o("Invalid value for pApp property. Must be a legal WASM pointer value.");const de=m.xDestroy||0;de&&!y(de)&&o("xDestroy property must be a function.");let ie=0;C(m,"deterministic")&&(ie|=i.SQLITE_DETERMINISTIC),C(m,"directOnly")&&(ie|=i.SQLITE_DIRECTONLY),C(m,"innocuous")&&(ie|=i.SQLITE_INNOCUOUS),a=a.toLowerCase();const se=f||F,ce=C(m,"arity"),pe=typeof ce=="number"?ce:se.length?se.length-1:0;let Ie;return Ie=te?i.sqlite3_create_window_function(this.pointer,a,pe,i.SQLITE_UTF8|ie,ae||0,F,V,J,N,de):i.sqlite3_create_function_v2(this.pointer,a,pe,i.SQLITE_UTF8|ie,ae||0,f,F,V,de),Q.checkRc(this,Ie),this},selectValue:function(a,f,m){return R(this,a,f,0,m)},selectValues:function(a,f,m){const y=this.prepare(a),F=[];try{for(y.bind(f);y.step();)F.push(y.get(0,m));y.reset()}finally{y.finalize()}return F},selectArray:function(a,f){return R(this,a,f,[])},selectObject:function(a,f){return R(this,a,f,{})},selectArrays:function(a,f){return U(this,a,f,"array")},selectObjects:function(a,f){return U(this,a,f,"object")},openStatementCount:function(){return this.pointer?Object.keys(E.get(this)).length:0},transaction:function(a){let f="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&o(i.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),f+=" "+arguments[0],a=arguments[1]),T(this).exec(f);try{const m=a(this);return this.exec("COMMIT"),m}catch(m){throw this.exec("ROLLBACK"),m}},savepoint:function(a){T(this).exec("SAVEPOINT oo1");try{const f=a(this);return this.exec("RELEASE oo1"),f}catch(f){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),f}},checkRc:function(a){return W(this,a)}};const A=function(a){return a.pointer||o("Stmt has been closed."),a},K=function(a){return function(f){let m=$[f==null?"null":typeof f];switch(m){case $.boolean:case $.null:case $.number:case $.string:return m;case $.bigint:if(l.bigIntEnabled)return m;default:return u.isBindableTypedArray(f)?$.blob:void 0}}(a)||o("Unsupported bind() argument type:",typeof a)},g=function(a,f){return a._lockedByExec&&o("Operation is illegal when statement is locked:",f),a},h=function a(f,m,y,F){g(A(f),"bind()"),a._||(a._tooBigInt=J=>o("BigInt value is too big to store without precision loss:",J),a._={string:function(J,N,te,ae){const[de,ie]=l.allocCString(te,!0);return(ae?i.sqlite3_bind_blob:i.sqlite3_bind_text)(J.pointer,N,de,ie,i.SQLITE_WASM_DEALLOC)}}),K(F),m=function(J,N){const te=typeof N=="number"?N:i.sqlite3_bind_parameter_index(J.pointer,N);return te!==0&&u.isInt32(te)?(te<1||te>J.parameterCount)&&o("Bind index",N,"is out of range."):o("Invalid bind() parameter name: "+N),te}(f,m);let V=0;switch(F==null?$.null:y){case $.null:V=i.sqlite3_bind_null(f.pointer,m);break;case $.string:V=a._.string(f,m,F,!1);break;case $.number:{let J;u.isInt32(F)?J=i.sqlite3_bind_int:typeof F=="bigint"?u.bigIntFits64(F)?l.bigIntEnabled?J=i.sqlite3_bind_int64:u.bigIntFitsDouble(F)?(F=Number(F),J=i.sqlite3_bind_double):a._tooBigInt(F):a._tooBigInt(F):(F=Number(F),J=l.bigIntEnabled&&Number.isInteger(F)?i.sqlite3_bind_int64:i.sqlite3_bind_double),V=J(f.pointer,m,F);break}case $.boolean:V=i.sqlite3_bind_int(f.pointer,m,F?1:0);break;case $.blob:{if(typeof F=="string"){V=a._.string(f,m,F,!0);break}F instanceof ArrayBuffer?F=new Uint8Array(F):u.isBindableTypedArray(F)||o("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const J=l.alloc(F.byteLength||1);l.heap8().set(F.byteLength?F:[0],J),V=i.sqlite3_bind_blob(f.pointer,m,J,F.byteLength,i.SQLITE_WASM_DEALLOC);break}default:n.config.warn("Unsupported bind() argument type:",F),o("Unsupported bind() argument type: "+typeof F)}return V&&Q.checkRc(f.db.pointer,V),f._mayGet=!1,f};k.prototype={finalize:function(){if(this.pointer){g(this,"finalize()");const a=i.sqlite3_finalize(this.pointer);return delete E.get(this.db)[this.pointer],I.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,a}},clearBindings:function(){return g(A(this),"clearBindings()"),i.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(a){g(this,"reset()"),a&&this.clearBindings();const f=i.sqlite3_reset(A(this).pointer);return this._mayGet=!1,W(this.db,f),this},bind:function(){let a,f;switch(A(this),arguments.length){case 1:a=1,f=arguments[0];break;case 2:a=arguments[0],f=arguments[1];break;default:o("Invalid bind() arguments.")}return f===void 0?this:(this.parameterCount||o("This statement has no bindable parameters."),this._mayGet=!1,f===null?h(this,a,$.null,f):Array.isArray(f)?(arguments.length!==1&&o("When binding an array, an index argument is not permitted."),f.forEach((m,y)=>h(this,y+1,K(m),m)),this):(f instanceof ArrayBuffer&&(f=new Uint8Array(f)),typeof f!="object"||u.isBindableTypedArray(f)?h(this,a,K(f),f):(arguments.length!==1&&o("When binding an object, an index argument is not permitted."),Object.keys(f).forEach(m=>h(this,m,K(f[m]),f[m])),this)))},bindAsBlob:function(a,f){A(this),arguments.length===1&&(f=a,a=1);const m=K(f);return $.string!==m&&$.blob!==m&&$.null!==m&&o("Invalid value type for bindAsBlob()"),h(this,a,$.blob,f)},step:function(){g(this,"step()");const a=i.sqlite3_step(A(this).pointer);switch(a){case i.SQLITE_DONE:return this._mayGet=!1;case i.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,n.config.warn("sqlite3_step() rc=",a,i.sqlite3_js_rc_str(a),"SQL =",i.sqlite3_sql(this.pointer)),Q.checkRc(this.db.pointer,a)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const a=this.step();return this.reset(),a}finally{try{this.finalize()}catch{}}},get:function(a,f){if(A(this)._mayGet||o("Stmt.step() has not (recently) returned true."),Array.isArray(a)){let m=0;const y=this.columnCount;for(;m<y;)a[m]=this.get(m++);return a}if(a&&typeof a=="object"){let m=0;const y=this.columnCount;for(;m<y;)a[i.sqlite3_column_name(this.pointer,m)]=this.get(m++);return a}switch(z(this,a),f===void 0?i.sqlite3_column_type(this.pointer,a):f){case i.SQLITE_NULL:return null;case i.SQLITE_INTEGER:if(l.bigIntEnabled){const m=i.sqlite3_column_int64(this.pointer,a);return m>=Number.MIN_SAFE_INTEGER&&m<=Number.MAX_SAFE_INTEGER?Number(m).valueOf():m}{const m=i.sqlite3_column_double(this.pointer,a);return(m>Number.MAX_SAFE_INTEGER||m<Number.MIN_SAFE_INTEGER)&&o("Integer is out of range for JS integer range: "+m),u.isInt32(m)?0|m:m}case i.SQLITE_FLOAT:return i.sqlite3_column_double(this.pointer,a);case i.SQLITE_TEXT:return i.sqlite3_column_text(this.pointer,a);case i.SQLITE_BLOB:{const m=i.sqlite3_column_bytes(this.pointer,a),y=i.sqlite3_column_blob(this.pointer,a),F=new Uint8Array(m);return m&&F.set(l.heap8u().slice(y,y+m),0),m&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(F.buffer),F}default:o("Don't know how to translate","type of result column #"+a+".")}o("Not reached.")},getInt:function(a){return this.get(a,i.SQLITE_INTEGER)},getFloat:function(a){return this.get(a,i.SQLITE_FLOAT)},getString:function(a){return this.get(a,i.SQLITE_TEXT)},getBlob:function(a){return this.get(a,i.SQLITE_BLOB)},getJSON:function(a){const f=this.get(a,i.SQLITE_STRING);return f===null?f:JSON.parse(f)},getColumnName:function(a){return i.sqlite3_column_name(z(A(this),a).pointer,a)},getColumnNames:function(a=[]){z(A(this),0);const f=this.columnCount;for(let m=0;m<f;++m)a.push(i.sqlite3_column_name(this.pointer,m));return a},getParamIndex:function(a){return A(this).parameterCount?i.sqlite3_bind_parameter_index(this.pointer,a):void 0}};{const a={enumerable:!0,get:function(){return I.get(this)},set:()=>o("The pointer property is read-only.")};Object.defineProperty(k.prototype,"pointer",a),Object.defineProperty(Q.prototype,"pointer",a)}if(Object.defineProperty(k.prototype,"columnCount",{enumerable:!1,get:function(){return i.sqlite3_column_count(this.pointer)},set:()=>o("The columnCount property is read-only.")}),n.oo1={DB:Q,Stmt:k},u.isUIThread()){n.oo1.JsStorageDb=function(f="session"){const m=M.normalizeArgs(...arguments);(f=m.filename)!=="session"&&f!=="local"&&o("JsStorageDb db name must be one of 'session' or 'local'."),m.vfs="kvvfs",M.call(this,m)};const a=n.oo1.JsStorageDb;a.prototype=Object.create(Q.prototype),a.clearStorage=i.sqlite3_js_kvvfs_clear,a.prototype.clearStorage=function(){return a.clearStorage(T(this).filename)},a.storageSize=i.sqlite3_js_kvvfs_size,a.prototype.storageSize=function(){return a.storageSize(T(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(n){const o=n.util;n.initWorker1API=(function(){const i=(...P)=>{throw new Error(P.join(" "))};globalThis.WorkerGlobalScope instanceof Function||i("initWorker1API() must be run from a Worker thread.");const l=this.sqlite3||i("Missing this.sqlite3 object."),u=l.oo1.DB,I=function(P){let L=E.idMap.get(P);return L||(L="db#"+ ++E.idSeq+"@"+P.pointer,E.idMap.set(P,L),L)},E={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(P){const L=new u(P);return this.dbs[I(L)]=L,this.dbList.indexOf(L)<0&&this.dbList.push(L),L},close:function(P,L){if(P){delete this.dbs[I(P)];const M=P.filename,Q=o.sqlite3__wasm_db_vfs(P.pointer,0);P.close();const $=this.dbList.indexOf(P);$>=0&&this.dbList.splice($,1),L&&M&&Q&&o.sqlite3__wasm_vfs_unlink(Q,M)}},post:function(P,L){L&&L.length?(globalThis.postMessage(P,Array.from(L)),L.length=0):globalThis.postMessage(P)},dbs:Object.create(null),getDb:function(P,L=!0){return this.dbs[P]||(L?i("Unknown (or closed) DB ID:",P):void 0)}},C=function(P,L=!0){const M=E.getDb(P.dbId,!1)||E.dbList[0];return L?function(Q=E.dbList[0]){return Q&&Q.pointer?Q:i("DB is not opened.")}(M):M},W={open:function(P){const L=Object.create(null),M=P.args||Object.create(null);M.simulateError&&i("Throwing because of simulateError flag.");const Q=Object.create(null);L.vfs=M.vfs,L.filename=M.filename||"";const $=E.open(L);return Q.filename=$.filename,Q.persistent=!!l.capi.sqlite3_js_db_uses_vfs($.pointer,"opfs"),Q.dbId=I($),Q.vfs=$.dbVfsName(),Q},close:function(P){const L=C(P,!1),M={filename:L&&L.filename};if(L){const Q=!(!P.args||typeof P.args!="object"||!P.args.unlink);E.close(L,Q)}return M},exec:function(P){const L=typeof P.args=="string"?{sql:P.args}:P.args||Object.create(null);L.rowMode==="stmt"?i("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):L.sql||i("'exec' requires input SQL.");const M=C(P);(L.callback||Array.isArray(L.resultRows))&&(M._blobXfer=E.xfer);const Q=L.callback;let $=0;const k=!!L.columnNames;typeof Q=="string"&&(k||(L.columnNames=[]),L.callback=function(T,z){E.post({type:Q,columnNames:L.columnNames,rowNumber:++$,row:T},E.xfer)});try{const T=L.countChanges?M.changes(!0,L.countChanges===64):void 0;M.exec(L),T!==void 0&&(L.changeCount=M.changes(!0,L.countChanges===64)-T),L.callback instanceof Function&&(L.callback=Q,E.post({type:Q,columnNames:L.columnNames,rowNumber:null,row:void 0}))}finally{delete M._blobXfer,L.callback&&(L.callback=Q)}return L},"config-get":function(){const P=Object.create(null),L=l.config;return["bigIntEnabled"].forEach(function(M){Object.getOwnPropertyDescriptor(L,M)&&(P[M]=L[M])}),P.version=l.version,P.vfsList=l.capi.sqlite3_js_vfs_list(),P.opfsEnabled=!!l.opfs,P},export:function(P){const L=C(P),M={byteArray:l.capi.sqlite3_js_db_export(L.pointer),filename:L.filename,mimetype:"application/x-sqlite3"};return E.xfer.push(M.byteArray.buffer),M},toss:function(P){i("Testing worker exception")},"opfs-tree":async function(P){return l.opfs||i("OPFS support is unavailable."),await l.opfs.treeList()}};globalThis.onmessage=async function(P){let L,M=(P=P.data).dbId,Q=P.type;const $=performance.now();try{W.hasOwnProperty(Q)&&W[Q]instanceof Function?L=await W[Q](P):i("Unknown db worker message type:",P.type)}catch(k){Q="error",L={operation:P.type,message:k.message,errorClass:k.name,input:P},k.stack&&(L.stack=typeof k.stack=="string"?k.stack.split(/\n\s*/):k.stack)}M||(M=L.dbId||E.dbList[0]&&I(E.dbList[0])),E.post({type:Q,dbId:M,messageId:P.messageId,workerReceivedTime:$,workerRespondTime:performance.now(),departureTime:P.departureTime,result:L},E.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:n})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(n){const o=n.wasm,i=n.capi,l=n.util.toss3,u=Object.create(null);n.vfs=u,i.sqlite3_vfs.prototype.registerVfs=function(I=!1){this instanceof n.capi.sqlite3_vfs||l("Expecting a sqlite3_vfs-type argument.");const E=i.sqlite3_vfs_register(this,I?1:0);return E&&l("sqlite3_vfs_register(",this,") failed with rc",E),this.pointer!==i.sqlite3_vfs_find(this.$zName)&&l("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},u.installVfs=function(I){let E=0;const C=["io","vfs"];for(const W of C){const P=I[W];P&&(++E,P.struct.installMethods(P.methods,!!P.applyArgcCheck),W==="vfs"&&(P.struct.$zName||typeof P.name!="string"||P.struct.addOnDispose(P.struct.$zName=o.allocCString(P.name)),P.struct.registerVfs(!!P.asDefault)))}return E||l("Misuse: installVfs() options object requires at least","one of:",C),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(n){const o=n.wasm,i=n.capi,l=n.util.toss3,u=Object.create(null);n.vtab=u;const I=i.sqlite3_index_info;I.prototype.nthConstraint=function(C,W=!1){if(C<0||C>=this.$nConstraint)return!1;const P=this.$aConstraint+I.sqlite3_index_constraint.structInfo.sizeof*C;return W?P:new I.sqlite3_index_constraint(P)},I.prototype.nthConstraintUsage=function(C,W=!1){if(C<0||C>=this.$nConstraint)return!1;const P=this.$aConstraintUsage+I.sqlite3_index_constraint_usage.structInfo.sizeof*C;return W?P:new I.sqlite3_index_constraint_usage(P)},I.prototype.nthOrderBy=function(C,W=!1){if(C<0||C>=this.$nOrderBy)return!1;const P=this.$aOrderBy+I.sqlite3_index_orderby.structInfo.sizeof*C;return W?P:new I.sqlite3_index_orderby(P)};const E=function(C,W){const P=function(L,M){return(function(Q,$=!1){if(arguments.length===0&&(Q=new M),Q instanceof M)return this.set(Q.pointer,Q),Q;o.isPtr(Q)||n.SQLite3Error.toss("Invalid argument to",L+"()");let k=this.get(Q);return $&&this.delete(Q),k}).bind(new Map)}(C,W);return Object.assign(Object.create(null),{StructType:W,create:L=>{const M=P();return o.pokePtr(L,M.pointer),M},get:L=>P(L),unget:L=>P(L,!0),dispose:L=>{const M=P(L,!0);M&&M.dispose()}})};u.xVtab=E("xVtab",i.sqlite3_vtab),u.xCursor=E("xCursor",i.sqlite3_vtab_cursor),u.xIndexInfo=C=>new i.sqlite3_index_info(C),u.xError=function C(W,P,L){if(C.errorReporter instanceof Function)try{C.errorReporter("sqlite3_module::"+W+"(): "+P.message)}catch{}let M;return P instanceof n.WasmAllocError?M=i.SQLITE_NOMEM:arguments.length>2?M=L:P instanceof n.SQLite3Error&&(M=P.resultCode),M||i.SQLITE_ERROR},u.xError.errorReporter=console.error.bind(console),u.xRowid=(C,W)=>o.poke(C,W,"i64"),u.setupModule=function(C){let W=!1;const P=this instanceof i.sqlite3_module?this:C.struct||(W=new i.sqlite3_module);try{const L=C.methods||l("Missing 'methods' object.");for(const M of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const Q=M[0],$=M[1];L[Q]===!0?L[Q]=L[$]:L[$]===!0&&(L[$]=L[Q])}if(C.catchExceptions){const M=function(k,T){return["xConnect","xCreate"].indexOf(k)>=0?function(z,R,U,A,K,g){try{return T(...arguments)||0}catch(h){return h instanceof n.WasmAllocError||(o.dealloc(o.peekPtr(g)),o.pokePtr(g,o.allocCString(h.message))),u.xError(k,h)}}:function(...z){try{return T(...z)||0}catch(R){return u.xError(k,R)}}},Q=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],$=Object.create(null);for(const k of Q){const T=L[k];T instanceof Function&&(k==="xConnect"&&L.xCreate===T?$[k]=L.xCreate:k==="xCreate"&&L.xConnect===T?$[k]=L.xConnect:$[k]=M(k,T))}P.installMethods($,!1)}else P.installMethods(L,!!C.applyArgcCheck);if(P.$iVersion===0){let M;M=typeof C.iVersion=="number"?C.iVersion:P.$xShadowName?3:P.$xSavePoint||P.$xRelease||P.$xRollbackTo?2:1,P.$iVersion=M}}catch(L){throw W&&W.dispose(),L}return P},i.sqlite3_module.prototype.setupModule=function(C){return u.setupModule.call(this,C)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(n){const o=function i(l){var E;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!(globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((E=navigator==null?void 0:navigator.storage)!=null&&E.getDirectory)))return Promise.reject(new Error("Missing required OPFS APIs."));l&&typeof l=="object"||(l=Object.create(null));const u=new URL(globalThis.location.href).searchParams;return u.has("opfs-disable")?Promise.resolve(n):(l.verbose===void 0&&(l.verbose=u.has("opfs-verbose")?+u.get("opfs-verbose")||2:1),l.sanityChecks===void 0&&(l.sanityChecks=u.has("opfs-sanity-check")),l.proxyUri===void 0&&(l.proxyUri=i.defaultProxyUri),typeof l.proxyUri=="function"&&(l.proxyUri=l.proxyUri()),new Promise(function(C,W){const P=[n.config.error,n.config.warn,n.config.log],L=(B,...S)=>{l.verbose>B&&P[B]("OPFS syncer:",...S)},M=(...B)=>L(2,...B),Q=(...B)=>L(1,...B),$=(...B)=>L(0,...B),k=n.util.toss,T=n.capi,z=n.util,R=n.wasm,U=T.sqlite3_vfs,A=T.sqlite3_file,K=T.sqlite3_io_methods,g=Object.create(null);g.metrics={dump:function(){let B,S=0,x=0,b=0;for(B in N.opIds){const q=te[B];S+=q.count,x+=q.time,b+=q.wait,q.avgTime=q.count&&q.time?q.time/q.count:0,q.avgWait=q.count&&q.wait?q.wait/q.count:0}n.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",te,`
Total of`,S,"op(s) for",x,"ms (incl. "+b+" ms of waiting on the async side)"),n.config.log("Serialization metrics:",te.s11n),F.postMessage({type:"opfs-async-metrics"})},reset:function(){let B;for(B in N.opIds)(S=te[B]=Object.create(null)).count=S.time=S.wait=0;var S;let x=te.s11n=Object.create(null);x=x.serialize=Object.create(null),x.count=x.time=0,x=te.s11n.deserialize=Object.create(null),x.count=x.time=0}};const h=new K,a=new U().addOnDispose(()=>h.dispose());let f;const m=B=>(f=!0,a.dispose(),W(B)),y=()=>(f=!1,C(n)),F=new Worker(new URL("/app/assets/sqlite3-opfs-async-proxy-CvNWozl8.js",self.location.href));setTimeout(()=>{f===void 0&&m(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),F._originalOnError=F.onerror,F.onerror=function(B){$("Error initializing OPFS asyncer:",B),m(new Error("Loading OPFS async Worker failed for unknown reasons."))};const V=T.sqlite3_vfs_find(null),J=V?new U(V):null;h.$iVersion=1,a.$iVersion=2,a.$szOsFile=T.sqlite3_file.structInfo.sizeof,a.$mxPathname=1024,a.$zName=R.allocCString("opfs"),a.$xDlOpen=a.$xDlError=a.$xDlSym=a.$xDlClose=null,a.addOnDispose("$zName",a.$zName,"cleanup default VFS wrapper",()=>J?J.dispose():null);const N=Object.create(null);N.verbose=l.verbose,N.littleEndian=(()=>{const B=new ArrayBuffer(2);return new DataView(B).setInt16(0,256,!0),new Int16Array(B)[0]===256})(),N.asyncIdleWaitTime=150,N.asyncS11nExceptions=1,N.fileBufferSize=65536,N.sabS11nOffset=N.fileBufferSize,N.sabS11nSize=2*a.$mxPathname,N.sabIO=new SharedArrayBuffer(N.fileBufferSize+N.sabS11nSize),N.opIds=Object.create(null);const te=Object.create(null);{let B=0;N.opIds.whichOp=B++,N.opIds.rc=B++,N.opIds.xAccess=B++,N.opIds.xClose=B++,N.opIds.xDelete=B++,N.opIds.xDeleteNoWait=B++,N.opIds.xFileSize=B++,N.opIds.xLock=B++,N.opIds.xOpen=B++,N.opIds.xRead=B++,N.opIds.xSleep=B++,N.opIds.xSync=B++,N.opIds.xTruncate=B++,N.opIds.xUnlock=B++,N.opIds.xWrite=B++,N.opIds.mkdir=B++,N.opIds["opfs-async-metrics"]=B++,N.opIds["opfs-async-shutdown"]=B++,N.opIds.retry=B++,N.sabOP=new SharedArrayBuffer(4*B),g.metrics.reset()}N.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(B=>{(N.sq3Codes[B]=T[B])===void 0&&k("Maintenance required: not found:",B)}),N.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const ae=(B,...S)=>{const x=N.opIds[B]||k("Invalid op ID:",B);N.s11n.serialize(...S),Atomics.store(N.sabOPView,N.opIds.rc,-1),Atomics.store(N.sabOPView,N.opIds.whichOp,x),Atomics.notify(N.sabOPView,N.opIds.whichOp);const b=performance.now();for(;Atomics.wait(N.sabOPView,N.opIds.rc,-1)!=="not-equal";);const q=Atomics.load(N.sabOPView,N.opIds.rc);if(te[B].wait+=performance.now()-b,q&&N.asyncS11nExceptions){const O=N.s11n.deserialize();O&&$(B+"() async error:",...O)}return q};g.debug={asyncShutdown:()=>{Q("Shutting down OPFS async listener. The OPFS VFS will no longer work."),ae("opfs-async-shutdown")},asyncRestart:()=>{Q("Attempting to restart OPFS VFS async listener. Might work, might not."),F.postMessage({type:"opfs-async-restart"})}};const de=function B(S=16){B._chars||(B._n=(B._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789").length);const x=[];let b=0;for(;b<S;++b){const q=Math.random()*(64*B._n)%B._n|0;x[b]=B._chars[q]}return x.join("")},ie=Object.create(null),se=Object.create(null);se.op=void 0,se.start=void 0;const ce=B=>{se.start=performance.now(),se.op=B,++te[B].count},pe=()=>te[se.op].time+=performance.now()-se.start,Ie={xCheckReservedLock:function(B,S){return R.poke(S,0,"i32"),0},xClose:function(B){ce("xClose");let S=0;const x=ie[B];return x&&(delete ie[B],S=ae("xClose",B),x.sq3File&&x.sq3File.dispose()),pe(),S},xDeviceCharacteristics:function(B){return T.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(B,S,x){return T.SQLITE_NOTFOUND},xFileSize:function(B,S){ce("xFileSize");let x=ae("xFileSize",B);if(x==0)try{const b=N.s11n.deserialize()[0];R.poke(S,b,"i64")}catch(b){$("Unexpected error reading xFileSize() result:",b),x=N.sq3Codes.SQLITE_IOERR}return pe(),x},xLock:function(B,S){ce("xLock");const x=ie[B];let b=0;return x.lockType?x.lockType=S:(b=ae("xLock",B,S),b===0&&(x.lockType=S)),pe(),b},xRead:function(B,S,x,b){ce("xRead");const q=ie[B];let O;try{O=ae("xRead",B,x,Number(b)),O!==0&&T.SQLITE_IOERR_SHORT_READ!==O||R.heap8u().set(q.sabView.subarray(0,x),S)}catch(D){$("xRead(",arguments,") failed:",D,q),O=T.SQLITE_IOERR_READ}return pe(),O},xSync:function(B,S){ce("xSync"),++te.xSync.count;const x=ae("xSync",B,S);return pe(),x},xTruncate:function(B,S){ce("xTruncate");const x=ae("xTruncate",B,Number(S));return pe(),x},xUnlock:function(B,S){ce("xUnlock");const x=ie[B];let b=0;return T.SQLITE_LOCK_NONE===S&&x.lockType&&(b=ae("xUnlock",B,S)),b===0&&(x.lockType=S),pe(),b},xWrite:function(B,S,x,b){ce("xWrite");const q=ie[B];let O;try{q.sabView.set(R.heap8u().subarray(S,S+x)),O=ae("xWrite",B,x,Number(b))}catch(D){$("xWrite(",arguments,") failed:",D,q),O=T.SQLITE_IOERR_WRITE}return pe(),O}},Se={xAccess:function(B,S,x,b){ce("xAccess");const q=ae("xAccess",R.cstrToJs(S));return R.poke(b,q?0:1,"i32"),pe(),0},xCurrentTime:function(B,S){return R.poke(S,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(B,S){return R.poke(S,21086676e7+new Date().getTime(),"i64"),0},xDelete:function(B,S,x){ce("xDelete");const b=ae("xDelete",R.cstrToJs(S),x,!1);return pe(),b},xFullPathname:function(B,S,x,b){return R.cstrncpy(b,S,x)<x?0:T.SQLITE_CANTOPEN},xGetLastError:function(B,S,x){return Q("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(B,S,x,b,q){ce("xOpen");let O=0;S===0?S=de():R.isPtr(S)&&(T.sqlite3_uri_boolean(S,"opfs-unlock-asap",0)&&(O|=N.opfsFlags.OPFS_UNLOCK_ASAP),T.sqlite3_uri_boolean(S,"delete-before-open",0)&&(O|=N.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),S=R.cstrToJs(S));const D=Object.create(null);D.fid=x,D.filename=S,D.sab=new SharedArrayBuffer(N.fileBufferSize),D.flags=b;const H=ae("xOpen",x,S,b,O);return H||(D.readOnly&&R.poke(q,T.SQLITE_OPEN_READONLY,"i32"),ie[x]=D,D.sabView=N.sabFileBufView,D.sq3File=new A(x),D.sq3File.$pMethods=h.pointer,D.lockType=T.SQLITE_LOCK_NONE),pe(),H}};if(J&&(a.$xRandomness=J.$xRandomness,a.$xSleep=J.$xSleep),a.$xRandomness||(Se.xRandomness=function(B,S,x){const b=R.heap8u();let q=0;for(;q<S;++q)b[x+q]=255e3*Math.random()&255;return q}),a.$xSleep||(Se.xSleep=function(B,S){return Atomics.wait(N.sabOPView,N.opIds.xSleep,0,S),0}),g.getResolvedPath=function(B,S){const x=new URL(B,"file://irrelevant").pathname;return S?x.split("/").filter(b=>!!b):x},g.getDirForFilename=async function(B,S=!1){const x=g.getResolvedPath(B,!0),b=x.pop();let q=g.rootDirectory;for(const O of x)O&&(q=await q.getDirectoryHandle(O,{create:!!S}));return[q,b]},g.mkdir=async function(B){try{return await g.getDirForFilename(B+"/filepart",!0),!0}catch{return!1}},g.entryExists=async function(B){try{const[S,x]=await g.getDirForFilename(B);return await S.getFileHandle(x),!0}catch{return!1}},g.randomFilename=de,g.treeList=async function(){const B=Object.create(null);return await async function S(x,b){b.name=x.name,b.dirs=[],b.files=[];for await(const q of x.values())if(q.kind==="directory"){const O=Object.create(null);b.dirs.push(O),await S(q,O)}else b.files.push(q.name)}(g.rootDirectory,B),B},g.rmfr=async function(){const B=g.rootDirectory,S={recurse:!0};for await(const x of B.values())B.removeEntry(x.name,S)},g.unlink=async function(B,S=!1,x=!1){try{const[b,q]=await g.getDirForFilename(B,!1);return await b.removeEntry(q,{recursive:S}),!0}catch(b){if(x)throw new Error("unlink(",arguments[0],") failed: "+b.message,{cause:b});return!1}},g.traverse=async function(B){const S={recursive:!0,directory:g.rootDirectory};typeof B=="function"&&(B={callback:B}),async function x(b,q){for await(const O of b.values()){if(B.callback(O,b,q)===!1)return!1;if(B.recursive&&O.kind==="directory"&&await x(O,q+1)===!1)break}}((B=Object.assign(S,B||{})).directory,0)},g.importDb=async function(B,S){if(S instanceof Function)return async function(H,ee){const[Z,Le]=await g.getDirForFilename(H,!0),ke=await Z.getFileHandle(Le,{create:!0});let fe,Ce=await ke.createSyncAccessHandle(),De=0,Me=!1;try{for(Ce.truncate(0);(fe=await ee())!==void 0;)fe instanceof ArrayBuffer&&(fe=new Uint8Array(fe)),De===0&&fe.byteLength>=15&&(z.affirmDbHeader(fe),Me=!0),Ce.write(fe,{at:De}),De+=fe.byteLength;if((De<512||De%512!=0)&&k("Input size",De,"is not correct for an SQLite database."),!Me){const je=new Uint8Array(20);Ce.read(je,{at:0}),z.affirmDbHeader(je)}return Ce.write(new Uint8Array([1,1]),{at:18}),De}catch(je){throw await Ce.close(),Ce=void 0,await Z.removeEntry(Le).catch(()=>{}),je}finally{Ce&&await Ce.close()}}(B,S);S instanceof ArrayBuffer&&(S=new Uint8Array(S)),z.affirmIsDb(S);const x=S.byteLength,[b,q]=await g.getDirForFilename(B,!0);let O,D=0;try{return O=await(await b.getFileHandle(q,{create:!0})).createSyncAccessHandle(),O.truncate(0),D=O.write(S,{at:0}),D!=x&&k("Expected to write "+x+" bytes but wrote "+D+"."),O.write(new Uint8Array([1,1]),{at:18}),D}catch(H){throw O&&(await O.close(),O=void 0),await b.removeEntry(q).catch(()=>{}),H}finally{O&&await O.close()}},n.oo1){const B=function(...S){const x=n.oo1.DB.dbCtorHelper.normalizeArgs(...S);x.vfs=a.$zName,n.oo1.DB.dbCtorHelper.call(this,x)};B.prototype=Object.create(n.oo1.DB.prototype),n.oo1.OpfsDb=B,B.importDb=g.importDb,n.oo1.DB.dbCtorHelper.setVfsPostOpenSql(a.pointer,function(S,x){x.capi.sqlite3_busy_timeout(S,1e4),x.capi.sqlite3_exec(S,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}F.onmessage=function({data:B}){var S;switch(B.type){case"opfs-unavailable":m(new Error(B.payload.join(" ")));break;case"opfs-async-loaded":F.postMessage({type:"opfs-async-init",args:N});break;case"opfs-async-inited":if(f===!0)break;try{n.vfs.installVfs({io:{struct:h,methods:Ie},vfs:{struct:a,methods:Se}}),N.sabOPView=new Int32Array(N.sabOP),N.sabFileBufView=new Uint8Array(N.sabIO,0,N.fileBufferSize),N.sabS11nView=new Uint8Array(N.sabIO,N.sabS11nOffset,N.sabS11nSize),(()=>{if(N.s11n)return N.s11n;const x=new TextDecoder,b=new TextEncoder("utf-8"),q=new Uint8Array(N.sabIO,N.sabS11nOffset,N.sabS11nSize),O=new DataView(N.sabIO,N.sabS11nOffset,N.sabS11nSize);N.s11n=Object.create(null);const D=Object.create(null);D.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},D.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},D.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},D.string={id:4};const H=Z=>D[typeof Z]||k("Maintenance required: this value type cannot be serialized.",Z),ee=Z=>{switch(Z){case D.number.id:return D.number;case D.bigint.id:return D.bigint;case D.boolean.id:return D.boolean;case D.string.id:return D.string;default:k("Invalid type ID:",Z)}};N.s11n.deserialize=function(Z=!1){++te.s11n.deserialize.count;const Le=performance.now(),ke=q[0],fe=ke?[]:null;if(ke){const Ce=[];let De,Me,je,Je=1;for(De=0;De<ke;++De,++Je)Ce.push(ee(q[Je]));for(De=0;De<ke;++De){const ft=Ce[De];ft.getter?(je=O[ft.getter](Je,N.littleEndian),Je+=ft.size):(Me=O.getInt32(Je,N.littleEndian),Je+=4,je=x.decode(q.slice(Je,Je+Me)),Je+=Me),fe.push(je)}}return Z&&(q[0]=0),te.s11n.deserialize.time+=performance.now()-Le,fe},N.s11n.serialize=function(...Z){const Le=performance.now();if(++te.s11n.serialize.count,Z.length){const ke=[];let fe=0,Ce=1;for(q[0]=255&Z.length;fe<Z.length;++fe,++Ce)ke.push(H(Z[fe])),q[Ce]=ke[fe].id;for(fe=0;fe<Z.length;++fe){const De=ke[fe];if(De.setter)O[De.setter](Ce,Z[fe],N.littleEndian),Ce+=De.size;else{const Me=b.encode(Z[fe]);O.setInt32(Ce,Me.byteLength,N.littleEndian),Ce+=4,q.set(Me,Ce),Ce+=Me.byteLength}}}else q[0]=0;te.s11n.serialize.time+=performance.now()-Le},N.s11n})(),l.sanityChecks&&(Q("Running sanity checks because of opfs-sanity-check URL arg..."),function(){const x=R.scopedAllocPush(),b=new A;try{const q=b.pointer,O=T.SQLITE_OPEN_CREATE|T.SQLITE_OPEN_READWRITE|T.SQLITE_OPEN_MAIN_DB,D=R.scopedAlloc(8),H="/sanity/check/file"+de(8),ee=R.scopedAllocCString(H);let Z;if(N.s11n.serialize("This is ä string."),Z=N.s11n.deserialize(),M("deserialize() says:",Z),Z[0]!=="This is ä string."&&k("String d13n error."),Se.xAccess(a.pointer,ee,0,D),Z=R.peek(D,"i32"),M("xAccess(",H,") exists ?=",Z),Z=Se.xOpen(a.pointer,ee,q,O,D),M("open rc =",Z,"state.sabOPView[xOpen] =",N.sabOPView[N.opIds.xOpen]),Z!==0)return void $("open failed with code",Z);Se.xAccess(a.pointer,ee,0,D),Z=R.peek(D,"i32"),Z||k("xAccess() failed to detect file."),Z=Ie.xSync(b.pointer,0),Z&&k("sync failed w/ rc",Z),Z=Ie.xTruncate(b.pointer,1024),Z&&k("truncate failed w/ rc",Z),R.poke(D,0,"i64"),Z=Ie.xFileSize(b.pointer,D),Z&&k("xFileSize failed w/ rc",Z),M("xFileSize says:",R.peek(D,"i64")),Z=Ie.xWrite(b.pointer,ee,10,1),Z&&k("xWrite() failed!");const Le=R.scopedAlloc(16);Z=Ie.xRead(b.pointer,Le,6,2),R.poke(Le+6,0);let ke=R.cstrToJs(Le);M("xRead() got:",ke),ke!=="sanity"&&k("Unexpected xRead() value."),Se.xSleep&&(M("xSleep()ing before close()ing..."),Se.xSleep(a.pointer,2e3),M("waking up from xSleep()")),Z=Ie.xClose(q),M("xClose rc =",Z,"sabOPView =",N.sabOPView),M("Deleting file:",H),Se.xDelete(a.pointer,ee,4660),Se.xAccess(a.pointer,ee,0,D),Z=R.peek(D,"i32"),Z&&k("Expecting 0 from xAccess(",H,") after xDelete()."),Q("End of OPFS sanity checks.")}finally{b.dispose(),R.scopedAllocPop(x)}}()),globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((S=navigator==null?void 0:navigator.storage)!=null&&S.getDirectory)?navigator.storage.getDirectory().then(x=>{F.onerror=F._originalOnError,delete F._originalOnError,n.opfs=g,g.rootDirectory=x,M("End of OPFS sqlite3_vfs setup.",a),y()}).catch(m):y()}catch(x){$(x),m(x)}break;default:{const x="Unexpected message from the OPFS async worker: "+JSON.stringify(B);$(x),m(new Error(x));break}}}}))};o.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async i=>{try{let l=o.defaultProxyUri;return i.scriptInfo.sqlite3Dir&&(o.defaultProxyUri=i.scriptInfo.sqlite3Dir+l),o().catch(u=>{i.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",u.message)})}catch(l){return i.config.error("installOpfsVfs() exception:",l),Promise.reject(l)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(n){var V,J,N,te,ae,de,ie,se,ce,pe,Ie,Se,zt,S;const o=n.util.toss,i=n.util.toss3,l=Object.create(null),u=n.capi,I=n.util,E=n.wasm,C=512,W=4096,P=u.SQLITE_OPEN_MAIN_DB|u.SQLITE_OPEN_MAIN_JOURNAL|u.SQLITE_OPEN_SUPER_JOURNAL|u.SQLITE_OPEN_WAL,L=".opaque",M=()=>Math.random().toString(36).slice(2),Q=new TextDecoder,$=new TextEncoder,k=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),T=[n.config.error,n.config.warn,n.config.log],z=n.config.warn,R=new Map,U=x=>R.get(x),A=(x,b)=>{b?R.set(x,b):R.delete(x)},K=new Map,g=x=>K.get(x),h=(x,b)=>{b?K.set(x,b):K.delete(x)},a={xCheckReservedLock:function(x,b){const q=g(x);return q.log("xCheckReservedLock"),q.storeErr(),E.poke32(b,1),0},xClose:function(x){const b=g(x);b.storeErr();const q=b.getOFileForS3File(x);if(q)try{b.log(`xClose ${q.path}`),b.mapS3FileToOFile(x,!1),q.sah.flush(),q.flags&u.SQLITE_OPEN_DELETEONCLOSE&&b.deletePath(q.path)}catch(O){return b.storeErr(O,u.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(x){return u.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(x,b,q){return u.SQLITE_NOTFOUND},xFileSize:function(x,b){const q=g(x);q.log("xFileSize");const O=q.getOFileForS3File(x).sah.getSize()-W;return E.poke64(b,BigInt(O)),0},xLock:function(x,b){const q=g(x);return q.log(`xLock ${b}`),q.storeErr(),q.getOFileForS3File(x).lockType=b,0},xRead:function(x,b,q,O){const D=g(x);D.storeErr();const H=D.getOFileForS3File(x);D.log(`xRead ${H.path} ${q} @ ${O}`);try{const ee=H.sah.read(E.heap8u().subarray(b,b+q),{at:W+Number(O)});return ee<q?(E.heap8u().fill(0,b+ee,b+q),u.SQLITE_IOERR_SHORT_READ):0}catch(ee){return D.storeErr(ee,u.SQLITE_IOERR)}},xSectorSize:function(x){return 4096},xSync:function(x,b){const q=g(x);q.log(`xSync ${b}`),q.storeErr();const O=q.getOFileForS3File(x);try{return O.sah.flush(),0}catch(D){return q.storeErr(D,u.SQLITE_IOERR)}},xTruncate:function(x,b){const q=g(x);q.log(`xTruncate ${b}`),q.storeErr();const O=q.getOFileForS3File(x);try{return O.sah.truncate(W+Number(b)),0}catch(D){return q.storeErr(D,u.SQLITE_IOERR)}},xUnlock:function(x,b){const q=g(x);return q.log("xUnlock"),q.getOFileForS3File(x).lockType=b,0},xWrite:function(x,b,q,O){const D=g(x);D.storeErr();const H=D.getOFileForS3File(x);D.log(`xWrite ${H.path} ${q} ${O}`);try{return q===H.sah.write(E.heap8u().subarray(b,b+q),{at:W+Number(O)})?0:o("Unknown write() failure.")}catch(ee){return D.storeErr(ee,u.SQLITE_IOERR)}}},f=new u.sqlite3_io_methods;f.$iVersion=1,n.vfs.installVfs({io:{struct:f,methods:a}});const m={xAccess:function(x,b,q,O){const D=U(x);D.storeErr();try{const H=D.getPath(b);E.poke32(O,D.hasFilename(H)?1:0)}catch{E.poke32(O,0)}return 0},xCurrentTime:function(x,b){return E.poke(b,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(x,b){return E.poke(b,21086676e7+new Date().getTime(),"i64"),0},xDelete:function(x,b,q){const O=U(x);O.log(`xDelete ${E.cstrToJs(b)}`),O.storeErr();try{return O.deletePath(O.getPath(b)),0}catch(D){return O.storeErr(D),u.SQLITE_IOERR_DELETE}},xFullPathname:function(x,b,q,O){return E.cstrncpy(O,b,q)<q?0:u.SQLITE_CANTOPEN},xGetLastError:function(x,b,q){const O=U(x),D=O.popErr();if(O.log(`xGetLastError ${b} e =`,D),D){const H=E.scopedAllocPush();try{const[ee,Z]=E.scopedAllocCString(D.message,!0);E.cstrncpy(q,ee,b),Z>b&&E.poke8(q+b-1,0)}catch{return u.SQLITE_NOMEM}finally{E.scopedAllocPop(H)}}return D?D.sqlite3Rc||u.SQLITE_IOERR:0},xOpen:function(x,b,q,O,D){const H=U(x);try{H.log(`xOpen ${E.cstrToJs(b)} ${O}`);const ee=b&&E.peek8(b)?H.getPath(b):M();let Z=H.getSAHForPath(ee);!Z&&O&u.SQLITE_OPEN_CREATE&&(H.getFileCount()<H.getCapacity()?(Z=H.nextAvailableSAH(),H.setAssociatedPath(Z,ee,O)):o("SAH pool is full. Cannot create file",ee)),Z||o("file not found:",ee);const Le={path:ee,flags:O,sah:Z};H.mapS3FileToOFile(q,Le),Le.lockType=u.SQLITE_LOCK_NONE;const ke=new u.sqlite3_file(q);return ke.$pMethods=f.pointer,ke.dispose(),E.poke32(D,O),0}catch(ee){return H.storeErr(ee),u.SQLITE_CANTOPEN}}};class y{constructor(b=Object.create(null)){Pe(this,Se);yt(this,"vfsDir");Pe(this,V);Pe(this,J);Pe(this,N);Pe(this,te,new Map);Pe(this,ae,new Map);Pe(this,de,new Set);Pe(this,ie,new Map);Pe(this,se,new Uint8Array(516));Pe(this,ce);Pe(this,pe);Pe(this,Ie);ze(this,Ie,b.verbosity??k.verbosity),this.vfsName=b.name||k.name,ze(this,pe,function(q){n.capi.sqlite3_vfs_find(q)&&i("VFS name is already registered:",q);const O=new u.sqlite3_vfs,D=u.sqlite3_vfs_find(null),H=D?new u.sqlite3_vfs(D):null;return O.$iVersion=2,O.$szOsFile=u.sqlite3_file.structInfo.sizeof,O.$mxPathname=C,O.addOnDispose(O.$zName=E.allocCString(q),()=>A(O.pointer,0)),H&&(O.$xRandomness=H.$xRandomness,O.$xSleep=H.$xSleep,H.dispose()),O.$xRandomness||m.xRandomness||(m.xRandomness=function(ee,Z,Le){const ke=E.heap8u();let fe=0;for(;fe<Z;++fe)ke[Le+fe]=255e3*Math.random()&255;return fe}),O.$xSleep||m.xSleep||(m.xSleep=(ee,Z)=>0),n.vfs.installVfs({vfs:{struct:O,methods:m}}),O}(this.vfsName)),A(j(this,pe).pointer,this),this.vfsDir=b.directory||"."+this.vfsName,ze(this,ce,new DataView(j(this,se).buffer,j(this,se).byteOffset)),this.isReady=this.reset(!!(b.clearOnInit??k.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(b.initialCapacity||k.initialCapacity)})}log(...b){Bt(this,Se,zt).call(this,2,...b)}warn(...b){Bt(this,Se,zt).call(this,1,...b)}error(...b){Bt(this,Se,zt).call(this,0,...b)}getVfs(){return j(this,pe)}getCapacity(){return j(this,te).size}getFileCount(){return j(this,ae).size}getFileNames(){const b=[],q=j(this,ae).keys();for(const O of q)b.push(O);return b}async addCapacity(b){for(let q=0;q<b;++q){const O=M(),D=await j(this,J).getFileHandle(O,{create:!0}),H=await D.createSyncAccessHandle();j(this,te).set(H,O),this.setAssociatedPath(H,"",0)}return this.getCapacity()}async reduceCapacity(b){let q=0;for(const O of Array.from(j(this,de))){if(q===b||this.getFileCount()===this.getCapacity())break;const D=j(this,te).get(O);O.close(),await j(this,J).removeEntry(D),j(this,te).delete(O),j(this,de).delete(O),++q}return q}releaseAccessHandles(){for(const b of j(this,te).keys())b.close();j(this,te).clear(),j(this,ae).clear(),j(this,de).clear()}async acquireAccessHandles(b){const q=[];for await(const[O,D]of j(this,J))D.kind==="file"&&q.push([O,D]);return Promise.all(q.map(async([O,D])=>{try{const H=await D.createSyncAccessHandle();if(j(this,te).set(H,O),b)H.truncate(W),this.setAssociatedPath(H,"",0);else{const ee=this.getAssociatedPath(H);ee?j(this,ae).set(ee,H):j(this,de).add(H)}}catch(H){throw this.storeErr(H),this.releaseAccessHandles(),H}}))}getAssociatedPath(b){b.read(j(this,se),{at:0});const q=j(this,ce).getUint32(512);if(j(this,se)[0]&&(q&u.SQLITE_OPEN_DELETEONCLOSE||!(q&P)))return z(`Removing file with unexpected flags ${q.toString(16)}`,j(this,se)),this.setAssociatedPath(b,"",0),"";const O=new Uint32Array(2);b.read(O,{at:516});const D=this.computeDigest(j(this,se));if(O.every((H,ee)=>H===D[ee])){const H=j(this,se).findIndex(ee=>ee===0);return H===0&&b.truncate(W),H?Q.decode(j(this,se).subarray(0,H)):""}return z("Disassociating file with bad digest."),this.setAssociatedPath(b,"",0),""}setAssociatedPath(b,q,O){const D=$.encodeInto(q,j(this,se));C<=D.written+1&&o("Path too long:",q),j(this,se).fill(0,D.written,C),j(this,ce).setUint32(512,O);const H=this.computeDigest(j(this,se));b.write(j(this,se),{at:0}),b.write(H,{at:516}),b.flush(),q?(j(this,ae).set(q,b),j(this,de).delete(b)):(b.truncate(W),j(this,de).add(b))}computeDigest(b){let q=3735928559,O=1103547991;for(const D of b)q=31*q+307*D,O=31*O+307*D;return new Uint32Array([q>>>0,O>>>0])}async reset(b){await this.isReady;let q,O=await navigator.storage.getDirectory();for(const D of this.vfsDir.split("/"))D&&(q=O,O=await O.getDirectoryHandle(D,{create:!0}));return ze(this,V,O),ze(this,N,q),ze(this,J,await j(this,V).getDirectoryHandle(L,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(b)}getPath(b){return E.isPtr(b)&&(b=E.cstrToJs(b)),(b instanceof URL?b:new URL(b,"file://localhost/")).pathname}deletePath(b){const q=j(this,ae).get(b);return q&&(j(this,ae).delete(b),this.setAssociatedPath(q,"",0)),!!q}storeErr(b,q){return b&&(b.sqlite3Rc=q||u.SQLITE_IOERR,this.error(b)),this.$error=b,q}popErr(){const b=this.$error;return this.$error=void 0,b}nextAvailableSAH(){const[b]=j(this,de).keys();return b}getOFileForS3File(b){return j(this,ie).get(b)}mapS3FileToOFile(b,q){q?(j(this,ie).set(b,q),h(b,this)):(j(this,ie).delete(b),h(b,!1))}hasFilename(b){return j(this,ae).has(b)}getSAHForPath(b){return j(this,ae).get(b)}async removeVfs(){if(!j(this,pe).pointer||!j(this,J))return!1;u.sqlite3_vfs_unregister(j(this,pe).pointer),j(this,pe).dispose();try{this.releaseAccessHandles(),await j(this,V).removeEntry(L,{recursive:!0}),ze(this,J,void 0),await j(this,N).removeEntry(j(this,V).name,{recursive:!0}),ze(this,V,ze(this,N,void 0))}catch(b){n.config.error(this.vfsName,"removeVfs() failed:",b)}return!0}exportFile(b){const q=j(this,ae).get(b)||o("File not found:",b),O=q.getSize()-W,D=new Uint8Array(O>0?O:0);if(O>0){const H=q.read(D,{at:W});H!=O&&o("Expected to read "+O+" bytes but read "+H+".")}return D}async importDbChunked(b,q){const O=j(this,ae).get(b)||this.nextAvailableSAH()||o("No available handles to import to.");O.truncate(0);let D,H=0,ee=!1;try{for(;(D=await q())!==void 0;)D instanceof ArrayBuffer&&(D=new Uint8Array(D)),H===0&&D.byteLength>=15&&(I.affirmDbHeader(D),ee=!0),O.write(D,{at:W+H}),H+=D.byteLength;if((H<512||H%512!=0)&&o("Input size",H,"is not correct for an SQLite database."),!ee){const Z=new Uint8Array(20);O.read(Z,{at:0}),I.affirmDbHeader(Z)}O.write(new Uint8Array([1,1]),{at:4114})}catch(Z){throw this.setAssociatedPath(O,"",0),Z}return this.setAssociatedPath(O,b,u.SQLITE_OPEN_MAIN_DB),H}importDb(b,q){if(q instanceof ArrayBuffer)q=new Uint8Array(q);else if(q instanceof Function)return this.importDbChunked(b,q);const O=j(this,ae).get(b)||this.nextAvailableSAH()||o("No available handles to import to."),D=q.byteLength;(D<512||D%512!=0)&&o("Byte array size is invalid for an SQLite db.");const H="SQLite format 3";for(let Z=0;Z<15;++Z)H.charCodeAt(Z)!==q[Z]&&o("Input does not contain an SQLite database header.");const ee=O.write(q,{at:W});return ee!=D?(this.setAssociatedPath(O,"",0),o("Expected to write "+D+" bytes but wrote "+ee+".")):(O.write(new Uint8Array([1,1]),{at:4114}),this.setAssociatedPath(O,b,u.SQLITE_OPEN_MAIN_DB)),ee}}V=new WeakMap,J=new WeakMap,N=new WeakMap,te=new WeakMap,ae=new WeakMap,de=new WeakMap,ie=new WeakMap,se=new WeakMap,ce=new WeakMap,pe=new WeakMap,Ie=new WeakMap,Se=new WeakSet,zt=function(b,...q){j(this,Ie)>b&&T[b](this.vfsName+":",...q)};class F{constructor(b){Pe(this,S);ze(this,S,b),this.vfsName=b.vfsName}async addCapacity(b){return j(this,S).addCapacity(b)}async reduceCapacity(b){return j(this,S).reduceCapacity(b)}getCapacity(){return j(this,S).getCapacity(j(this,S))}getFileCount(){return j(this,S).getFileCount()}getFileNames(){return j(this,S).getFileNames()}async reserveMinimumCapacity(b){const q=j(this,S).getCapacity();return q<b?j(this,S).addCapacity(b-q):q}exportFile(b){return j(this,S).exportFile(b)}importDb(b,q){return j(this,S).importDb(b,q)}async wipeFiles(){return j(this,S).reset(!0)}unlink(b){return j(this,S).deletePath(b)}async removeVfs(){return j(this,S).removeVfs()}}S=new WeakMap,n.installOpfsSAHPoolVfs=async function(x=Object.create(null)){var q;const b=x.name||k.name;return l[b]?l[b]:globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((q=navigator==null?void 0:navigator.storage)!=null&&q.getDirectory)?l[b]=(async()=>{const O=await navigator.storage.getDirectory(),D=".opfs-sahpool-sync-check-"+M(),H=await O.getFileHandle(D,{create:!0}),ee=(await H.createSyncAccessHandle()).close();return await ee,await O.removeEntry(D),ee!=null&&ee.then&&o("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0})().then(async function(){if(x.$testThrowInInit)throw x.$testThrowInInit;const O=new y(x);return O.isReady.then(async()=>{const D=new F(O);if(n.oo1){const H=n.oo1,ee=O.getVfs(),Z=function(...Le){const ke=H.DB.dbCtorHelper.normalizeArgs(...Le);ke.vfs=ee.$zName,H.DB.dbCtorHelper.call(this,ke)};Z.prototype=Object.create(H.DB.prototype),D.OpfsSAHPoolDb=Z,H.DB.dbCtorHelper.setVfsPostOpenSql(ee.pointer,function(Le,ke){ke.capi.sqlite3_exec(Le,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return O.log("VFS initialized."),D}).catch(async D=>{throw await O.removeVfs().catch(()=>{}),D})}).catch(O=>l[b]=Promise.reject(O)):l[b]=Promise.reject(new Error("Missing required OPFS APIs."))}}),s!==void 0){const n=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?s.asm:wasmExports,memory:s.wasmMemory},globalThis.sqlite3ApiConfig||{});let o;globalThis.sqlite3ApiConfig=n;try{o=globalThis.sqlite3ApiBootstrap()}catch(i){throw console.error("sqlite3ApiBootstrap() error:",i),i}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}s.sqlite3=o}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),_.ready});Ne=function(){var r,_;const p=Ne;if(!p)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(r=globalThis==null?void 0:globalThis.document)==null?void 0:r.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(_=globalThis==null?void 0:globalThis.location)!=null&&_.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...t)=>console.warn("sqlite3.debugModule:",...t):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const t=e.moduleScript.src.split("/");t.pop(),e.sqlite3Dir=t.join("/")+"/"}if(globalThis.sqlite3InitModule=function t(...w){return p(...w).then(G=>{const X=G.sqlite3;X.scriptInfo=e,t.__isUnderTest&&(X.__isUnderTest=!0);const he=X.asyncPostInit;return delete X.asyncPostInit,he()}).catch(G=>{throw console.error("Exception loading sqlite3 module:",G),G})},globalThis.sqlite3InitModule.ready=p.ready,globalThis.sqlite3InitModuleState.moduleScript){const t=globalThis.sqlite3InitModuleState;let w=t.moduleScript.src.split("/");w.pop(),t.scriptDir=w.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();const qt=console.log,cr=console.error;class hn{constructor(e){Pe(this,on);Pe(this,an);if(e===void 0)throw new Error("`sqliteObject` must be defined before calling constructor");this.sqlite3=e}static async init_module(e){return await Ne({print:qt,printErr:cr,...e})}version(){return this.sqlite3.version}filename(e,r){return this.sqlite3.capi.sqlite3_db_filename(e,r)}extended_errcode(e){return this.sqlite3.capi.sqlite3_extended_errcode(e)}errstr(e){return this.sqlite3.capi.sqlite3_errstr(e)}errmsg(e){return this.sqlite3.capi.sqlite3_errmsg(e)}result_js(e,r){return this.sqlite3.capi.sqlite3_result_js(e,r)}result_text(e,r){return this.sqlite3.capi.sqlite3_result_text(e,r)}result_int(e,r){return this.sqlite3.capi.sqlite3_result_int(e,r)}result_int64(e,r){return this.sqlite3.capi.sqlite3_result_int64(e,r)}result_double(e,r){return this.sqlite3.capi.sqlite3_result_double(e,r)}result_blob(e,r){return this.sqlite3.capi.sqlite3_result_blob(e,r)}result_null(e){return this.sqlite3.capi.sqlite3_result_null(e)}bind_blob(e,r,_,t,w){return this.sqlite3.capi.sqlite3_bind_blob(e,r,_,t,w)}bind_text(e,r,_,t,w){return this.sqlite3.capi.sqlite3_bind_text(e,r,_,t,w)}bind_double(e,r,_){return this.sqlite3.capi.sqlite3_bind_double(e,r,_)}bind_int(e,r,_){return this.sqlite3.capi.sqlite3_bind_int(e,r,_)}bind_int64(e,r,_){return this.sqlite3.capi.sqlite3_bind_int64(e,r,_)}bind_null(e,r){return this.sqlite3.capi.sqlite3_bind_null(e,r),this.sqlite3.capi.SQLITE_OK}bind_parameter_count(e){return this.sqlite3.capi.sqlite3_bind_parameter_count(e)}bind_parameter_name(e,r){return this.sqlite3.capi.sqlite3_bind_paramater_name(e,it)}value_dup(e){return this.sqlite3.capi.sqlite3_value_dup(e)}value_blob(e){return this.sqlite3.capi.sqlite3_value_blob(e)}value_bytes(e){return this.sqlite3.capi.sqlite3_value_bytes(e)}value_double(e){return this.sqlite3.capi.sqlite3_value_double(e)}value_int(e){return this.sqlite3.capi.sqlite3_value_int(e)}value_int64(e){return this.sqlite3.capi.sqlite3_value_int64(e)}value_text(e){return this.sqlite3.capi.sqlite3_value_text(e)}value_type(e){return this.sqlite3.capi.sqlite3_value_type(e)}open(e,r){try{return new this.sqlite3.oo1.OpfsDb(e)}catch(_){throw console.log("OPFS open error",_),_}}exec(e,r){try{return e.exec(r,{callback:_=>{}})}catch(_){throw _}}finalize(e){return this.sqlite3.capi.sqlite3_finalize(e)}changes(e){return this.sqlite3.capi.sqlite3_changes(e)}clear_bindings(e){return this.sqlite3.capi.sqlite3_clear_bindings(e)}reset(e){return this.sqlite3.capi.sqlite3_reset(e)}close(e){return this.sqlite3.capi.sqlite3_close_v2(e.pointer)}db_handle(e){return this.sqlite3.capi.sqlite3_db_handle(e)}prepare_v3(e,r,_,t,w,G){return this.sqlite3.capi.sqlite3_prepare_v3(e.pointer,r,_,t,w,G)}step(e){return this.sqlite3.capi.sqlite3_step(e)}column_value(e,r){return this.sqlite3.capi.sqlite3_column_value(e,r)}column_name(e,r){return this.sqlite3.capi.sqlite3_column_name(e,r)}column_count(e){return this.sqlite3.capi.sqlite3_column_count(e)}create_function(e,r,_,t,w,G,X,he){try{this.sqlite3.capi.sqlite3_create_function(e,r,_,t,w,G,X,he),console.log("create function")}catch(Oe){throw console.log("create function err"),Oe}}register_diesel_sql_functions(e){try{this.sqlite3.capi.sqlite3_create_function(e,"diesel_manage_updated_at",1,this.sqlite3.capi.SQLITE_UTF8,0,async(r,_)=>{const t=this.sqlite3.value_text(_[0]);e.exec(r,`CREATE TRIGGER __diesel_manage_updated_at_${t}
            AFTER UPDATE ON ${t}
            FOR EACH ROW WHEN
              old.updated_at IS NULL AND
              new.updated_at IS NULL OR
              old.updated_at == new.updated_at
            BEGIN
            UPDATE ${t}
            SET updated_at = CURRENT_TIMESTAMP
            WHERE ROWID = new.ROWID;
            END`,w=>{qt("------------------------------------"),qt(`Created trigger for ${t}`),qt(w),qt("------------------------------------")})})}catch(r){throw console.log("error creating diesel trigger"),r}}value_free(e){return this.sqlite3.capi.sqlite3_value_free(e)}sqlite3_serialize(e,r,_,t){try{return this.sqlite3.capi.sqlite3_serialize(e,r,_,t)}catch(w){throw console.log("error serializing"),w}}sqlite3_deserialize(e,r,_,t,w,G){try{return this.sqlite3.capi.sqlite3_deserialize(e,r,_,t,w,G)}catch(X){throw console.log("error deserializing"),X}}sqlite3_free(e,r){return this.sqlite3.capi.sqlite3_free(r)}}on=new WeakMap,an=new WeakMap;let d;const wn=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&wn.decode();let vt=null;function Ot(){return(vt===null||vt.byteLength===0)&&(vt=new Uint8Array(d.memory.buffer)),vt}function _e(p,e){return p=p>>>0,wn.decode(Ot().subarray(p,p+e))}function ne(p){return p==null}let _t=null;function Te(){return(_t===null||_t.buffer.detached===!0||_t.buffer.detached===void 0&&_t.buffer!==d.memory.buffer)&&(_t=new DataView(d.memory.buffer)),_t}let Y=0;const Pt=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ur=typeof Pt.encodeInto=="function"?function(p,e){return Pt.encodeInto(p,e)}:function(p,e){const r=Pt.encode(p);return e.set(r),{read:p.length,written:r.length}};function re(p,e,r){if(r===void 0){const X=Pt.encode(p),he=e(X.length,1)>>>0;return Ot().subarray(he,he+X.length).set(X),Y=X.length,he}let _=p.length,t=e(_,1)>>>0;const w=Ot();let G=0;for(;G<_;G++){const X=p.charCodeAt(G);if(X>127)break;w[t+G]=X}if(G!==_){G!==0&&(p=p.slice(G)),t=r(t,_,_=G+p.length*3,1)>>>0;const X=Ot().subarray(t+G,t+_),he=ur(p,X);G+=he.written,t=r(t,_,G,1)>>>0}return Y=G,t}function Qt(p){const e=typeof p;if(e=="number"||e=="boolean"||p==null)return`${p}`;if(e=="string")return`"${p}"`;if(e=="symbol"){const t=p.description;return t==null?"Symbol":`Symbol(${t})`}if(e=="function"){const t=p.name;return typeof t=="string"&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(p)){const t=p.length;let w="[";t>0&&(w+=Qt(p[0]));for(let G=1;G<t;G++)w+=", "+Qt(p[G]);return w+="]",w}const r=/\[object ([^\]]+)\]/.exec(toString.call(p));let _;if(r.length>1)_=r[1];else return toString.call(p);if(_=="Object")try{return"Object("+JSON.stringify(p)+")"}catch{return"Object"}return p instanceof Error?`${p.name}: ${p.message}
${p.stack}`:_}const yn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>{d.__wbindgen_export_3.get(p.dtor)(p.a,p.b)});function qn(p,e,r,_){const t={a:p,b:e,cnt:1,dtor:r},w=(...G)=>{t.cnt++;const X=t.a;t.a=0;try{return _(X,t.b,...G)}finally{--t.cnt===0?(d.__wbindgen_export_3.get(t.dtor)(X,t.b),yn.unregister(t)):t.a=X}};return w.original=t,yn.register(w,t,t),w}function dr(p,e){d._dyn_core__ops__function__FnMut_____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__ha602f13c6f6f57bd(p,e)}function pr(p,e,r){d.closure2327_externref_shim(p,e,r)}function ve(p){const e=d.__wbindgen_export_2.get(p);return d.__externref_table_dealloc(p),e}function Et(p){const e=d.__externref_table_alloc();return d.__wbindgen_export_2.set(e,p),e}function $e(p,e){if(!(p instanceof e))throw new Error(`expected instance of ${e.name}`);return p.ptr}function fr(p,e,r,_,t,w,G){const X=re(p,d.__wbindgen_malloc,d.__wbindgen_realloc),he=Y,Oe=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),We=Y,Ke=re(r,d.__wbindgen_malloc,d.__wbindgen_realloc),et=Y;var He=ne(_)?0:re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),Ue=Y,tt=ne(w)?0:re(w,d.__wbindgen_malloc,d.__wbindgen_realloc),nt=Y;let ut=0;return ne(G)||($e(G,Cn),ut=G.__destroy_into_raw()),d.createClient(X,he,Oe,We,Ke,et,He,Ue,ne(t)?0:Et(t),tt,nt,ut)}function Ge(p,e){const r=e(p.length*4,4)>>>0,_=Te();for(let t=0;t<p.length;t++)_.setUint32(r+4*t,Et(p[t]),!0);return Y=p.length,r}function gr(p,e){const r=re(p,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y,t=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),w=Y;return d.getInboxIdForAddress(r,_,t,w)}function mr(p){let e,r;try{const w=re(p,d.__wbindgen_malloc,d.__wbindgen_realloc),G=Y,X=d.generateInboxId(w,G);var _=X[0],t=X[1];if(X[3])throw _=0,t=0,ve(X[2]);return e=_,r=t,_e(_,t)}finally{d.__wbindgen_free(e,r,1)}}function br(p,e,r){const _=re(p,d.__wbindgen_malloc,d.__wbindgen_realloc),t=Y,w=d.verifySignedWithPublicKey(_,t,e,r);if(w[1])throw ve(w[0])}function gt(p,e){p=p>>>0;const r=Te(),_=[];for(let t=p;t<p+4*e;t+=4)_.push(d.__wbindgen_export_2.get(r.getUint32(t,!0)));return d.__externref_drop_slice(p,e),_}function ye(p,e){try{return p.apply(this,e)}catch(r){const _=Et(r);d.__wbindgen_exn_store(_)}}function Xe(p){return()=>{throw new Error(`${p} is not defined`)}}function hr(p,e,r,_){d.closure3395_externref_shim(p,e,r,_)}const Wt=["off","error","warn","info","debug","trace"],wr=["omit","same-origin","include"],yr=["same-origin","no-cors","cors","navigate"],vn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_client_free(p>>>0,1));class Gt{static __wrap(e){e=e>>>0;const r=Object.create(Gt.prototype);return r.__wbg_ptr=e,vn.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,vn.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_client_free(e,0)}get accountAddress(){let e,r;try{const _=d.client_accountAddress(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}get inboxId(){let e,r;try{const _=d.client_inboxId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}get isRegistered(){return d.client_isRegistered(this.__wbg_ptr)!==0}get installationId(){let e,r;try{const _=d.client_installationId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}get installationIdBytes(){return d.client_installationIdBytes(this.__wbg_ptr)}canMessage(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;return d.client_canMessage(this.__wbg_ptr,r,_)}registerIdentity(){return d.client_registerIdentity(this.__wbg_ptr)}sendHistorySyncRequest(){return d.client_sendHistorySyncRequest(this.__wbg_ptr)}sendConsentSyncRequest(){return d.client_sendConsentSyncRequest(this.__wbg_ptr)}findInboxIdByAddress(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.client_findInboxIdByAddress(this.__wbg_ptr,r,_)}conversations(){const e=d.client_conversations(this.__wbg_ptr);return Vt.__wrap(e)}createInboxSignatureText(){return d.client_createInboxSignatureText(this.__wbg_ptr)}addWalletSignatureText(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.client_addWalletSignatureText(this.__wbg_ptr,r,_)}revokeWalletSignatureText(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.client_revokeWalletSignatureText(this.__wbg_ptr,r,_)}revokeInstallationsSignatureText(){return d.client_revokeInstallationsSignatureText(this.__wbg_ptr)}addSignature(e,r){return d.client_addSignature(this.__wbg_ptr,e,r)}addScwSignature(e,r,_,t){return d.client_addScwSignature(this.__wbg_ptr,e,r,_,!ne(t),ne(t)?BigInt(0):t)}applySignatureRequests(){return d.client_applySignatureRequests(this.__wbg_ptr)}signWithInstallationKey(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y,t=d.client_signWithInstallationKey(this.__wbg_ptr,r,_);if(t[2])throw ve(t[1]);return ve(t[0])}verifySignedWithInstallationKey(e,r){const _=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),t=Y,w=d.client_verifySignedWithInstallationKey(this.__wbg_ptr,_,t,r);if(w[1])throw ve(w[0])}setConsentStates(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;return d.client_setConsentStates(this.__wbg_ptr,r,_)}getConsentState(e,r){const _=re(r,d.__wbindgen_malloc,d.__wbindgen_realloc),t=Y;return d.client_getConsentState(this.__wbg_ptr,e,_,t)}inboxState(e){return d.client_inboxState(this.__wbg_ptr,e)}getLatestInboxState(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.client_getLatestInboxState(this.__wbg_ptr,r,_)}}const En=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_consent_free(p>>>0,1));class Lt{static __unwrap(e){return e instanceof Lt?e.__destroy_into_raw():0}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,En.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_consent_free(e,0)}get entityType(){return d.__wbg_get_consent_entityType(this.__wbg_ptr)}set entityType(e){d.__wbg_set_consent_entityType(this.__wbg_ptr,e)}get state(){return d.__wbg_get_consent_state(this.__wbg_ptr)}set state(e){d.__wbg_set_consent_state(this.__wbg_ptr,e)}get entity(){let e,r;try{const _=d.__wbg_get_consent_entity(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set entity(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_consent_entity(this.__wbg_ptr,r,_)}constructor(e,r,_){const t=re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),w=Y,G=d.consent_new(e,r,t,w);return this.__wbg_ptr=G>>>0,En.register(this,this.__wbg_ptr,this),this}}const Ht=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_contenttypeid_free(p>>>0,1));class mt{static __wrap(e){e=e>>>0;const r=Object.create(mt.prototype);return r.__wbg_ptr=e,Ht.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Ht.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_contenttypeid_free(e,0)}get authorityId(){let e,r;try{const _=d.__wbg_get_contenttypeid_authorityId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set authorityId(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_consent_entity(this.__wbg_ptr,r,_)}get typeId(){let e,r;try{const _=d.__wbg_get_contenttypeid_typeId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set typeId(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_contenttypeid_typeId(this.__wbg_ptr,r,_)}get versionMajor(){return d.__wbg_get_contenttypeid_versionMajor(this.__wbg_ptr)>>>0}set versionMajor(e){d.__wbg_set_contenttypeid_versionMajor(this.__wbg_ptr,e)}get versionMinor(){return d.__wbg_get_contenttypeid_versionMinor(this.__wbg_ptr)>>>0}set versionMinor(e){d.__wbg_set_contenttypeid_versionMinor(this.__wbg_ptr,e)}constructor(e,r,_,t){const w=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),G=Y,X=re(r,d.__wbindgen_malloc,d.__wbindgen_realloc),he=Y,Oe=d.contenttypeid_new(w,G,X,he,_,t);return this.__wbg_ptr=Oe>>>0,Ht.register(this,this.__wbg_ptr,this),this}}const In=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_conversation_free(p>>>0,1));class It{static __wrap(e){e=e>>>0;const r=Object.create(It.prototype);return r.__wbg_ptr=e,In.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,In.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_conversation_free(e,0)}consentState(){const e=d.conversation_consentState(this.__wbg_ptr);if(e[2])throw ve(e[1]);return e[0]}updateConsentState(e){const r=d.conversation_updateConsentState(this.__wbg_ptr,e);if(r[1])throw ve(r[0])}id(){let e,r;try{const _=d.conversation_id(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}send(e){$e(e,at);var r=e.__destroy_into_raw();return d.conversation_send(this.__wbg_ptr,r)}sendOptimistic(e){let r,_;try{$e(e,at);var t=e.__destroy_into_raw();const X=d.conversation_sendOptimistic(this.__wbg_ptr,t);var w=X[0],G=X[1];if(X[3])throw w=0,G=0,ve(X[2]);return r=w,_=G,_e(w,G)}finally{d.__wbindgen_free(r,_,1)}}publishMessages(){return d.conversation_publishMessages(this.__wbg_ptr)}sync(){return d.conversation_sync(this.__wbg_ptr)}findMessages(e){let r=0;ne(e)||($e(e,Pn),r=e.__destroy_into_raw());const _=d.conversation_findMessages(this.__wbg_ptr,r);if(_[3])throw ve(_[2]);var t=gt(_[0],_[1]).slice();return d.__wbindgen_free(_[0],_[1]*4,4),t}listMembers(){return d.conversation_listMembers(this.__wbg_ptr)}adminList(){const e=d.conversation_adminList(this.__wbg_ptr);if(e[3])throw ve(e[2]);var r=gt(e[0],e[1]).slice();return d.__wbindgen_free(e[0],e[1]*4,4),r}superAdminList(){const e=d.conversation_superAdminList(this.__wbg_ptr);if(e[3])throw ve(e[2]);var r=gt(e[0],e[1]).slice();return d.__wbindgen_free(e[0],e[1]*4,4),r}isAdmin(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y,t=d.conversation_isAdmin(this.__wbg_ptr,r,_);if(t[2])throw ve(t[1]);return t[0]!==0}isSuperAdmin(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y,t=d.conversation_isSuperAdmin(this.__wbg_ptr,r,_);if(t[2])throw ve(t[1]);return t[0]!==0}addMembers(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;return d.conversation_addMembers(this.__wbg_ptr,r,_)}addAdmin(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_addAdmin(this.__wbg_ptr,r,_)}removeAdmin(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_removeAdmin(this.__wbg_ptr,r,_)}addSuperAdmin(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_addSuperAdmin(this.__wbg_ptr,r,_)}removeSuperAdmin(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_removeSuperAdmin(this.__wbg_ptr,r,_)}groupPermissions(){const e=d.conversation_groupPermissions(this.__wbg_ptr);if(e[2])throw ve(e[1]);return Jt.__wrap(e[0])}addMembersByInboxId(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;return d.conversation_addMembersByInboxId(this.__wbg_ptr,r,_)}removeMembers(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;return d.conversation_removeMembers(this.__wbg_ptr,r,_)}removeMembersByInboxId(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;return d.conversation_removeMembersByInboxId(this.__wbg_ptr,r,_)}updateGroupName(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_updateGroupName(this.__wbg_ptr,r,_)}groupName(){let e,r;try{const w=d.conversation_groupName(this.__wbg_ptr);var _=w[0],t=w[1];if(w[3])throw _=0,t=0,ve(w[2]);return e=_,r=t,_e(_,t)}finally{d.__wbindgen_free(e,r,1)}}updateGroupImageUrlSquare(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_updateGroupImageUrlSquare(this.__wbg_ptr,r,_)}groupImageUrlSquare(){let e,r;try{const w=d.conversation_groupImageUrlSquare(this.__wbg_ptr);var _=w[0],t=w[1];if(w[3])throw _=0,t=0,ve(w[2]);return e=_,r=t,_e(_,t)}finally{d.__wbindgen_free(e,r,1)}}updateGroupDescription(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_updateGroupDescription(this.__wbg_ptr,r,_)}groupDescription(){let e,r;try{const w=d.conversation_groupDescription(this.__wbg_ptr);var _=w[0],t=w[1];if(w[3])throw _=0,t=0,ve(w[2]);return e=_,r=t,_e(_,t)}finally{d.__wbindgen_free(e,r,1)}}updateGroupPinnedFrameUrl(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversation_updateGroupPinnedFrameUrl(this.__wbg_ptr,r,_)}groupPinnedFrameUrl(){let e,r;try{const w=d.conversation_groupPinnedFrameUrl(this.__wbg_ptr);var _=w[0],t=w[1];if(w[3])throw _=0,t=0,ve(w[2]);return e=_,r=t,_e(_,t)}finally{d.__wbindgen_free(e,r,1)}}createdAtNs(){return d.conversation_createdAtNs(this.__wbg_ptr)}isActive(){const e=d.conversation_isActive(this.__wbg_ptr);if(e[2])throw ve(e[1]);return e[0]!==0}addedByInboxId(){let e,r;try{const w=d.conversation_addedByInboxId(this.__wbg_ptr);var _=w[0],t=w[1];if(w[3])throw _=0,t=0,ve(w[2]);return e=_,r=t,_e(_,t)}finally{d.__wbindgen_free(e,r,1)}}groupMetadata(){const e=d.conversation_groupMetadata(this.__wbg_ptr);if(e[2])throw ve(e[1]);return Kt.__wrap(e[0])}dmPeerInboxId(){let e,r;try{const w=d.conversation_dmPeerInboxId(this.__wbg_ptr);var _=w[0],t=w[1];if(w[3])throw _=0,t=0,ve(w[2]);return e=_,r=t,_e(_,t)}finally{d.__wbindgen_free(e,r,1)}}}const Sn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_conversations_free(p>>>0,1));class Vt{static __wrap(e){e=e>>>0;const r=Object.create(Vt.prototype);return r.__wbg_ptr=e,Sn.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Sn.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_conversations_free(e,0)}createGroup(e,r){const _=Ge(e,d.__wbindgen_malloc),t=Y;let w=0;return ne(r)||($e(r,An),w=r.__destroy_into_raw()),d.conversations_createGroup(this.__wbg_ptr,_,t,w)}createDm(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;return d.conversations_createDm(this.__wbg_ptr,r,_)}findGroupById(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y,t=d.conversations_findGroupById(this.__wbg_ptr,r,_);if(t[2])throw ve(t[1]);return It.__wrap(t[0])}findDmByTargetInboxId(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y,t=d.conversations_findDmByTargetInboxId(this.__wbg_ptr,r,_);if(t[2])throw ve(t[1]);return It.__wrap(t[0])}findMessageById(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y,t=d.conversations_findMessageById(this.__wbg_ptr,r,_);if(t[2])throw ve(t[1]);return Nt.__wrap(t[0])}sync(){return d.conversations_sync(this.__wbg_ptr)}syncAllConversations(){return d.conversations_syncAllConversations(this.__wbg_ptr)}list(e){let r=0;return ne(e)||($e(e,Ct),r=e.__destroy_into_raw()),d.conversations_list(this.__wbg_ptr,r)}listGroups(e){let r=0;return ne(e)||($e(e,Ct),r=e.__destroy_into_raw()),d.conversations_listGroups(this.__wbg_ptr,r)}listDms(e){let r=0;return ne(e)||($e(e,Ct),r=e.__destroy_into_raw()),d.conversations_listDms(this.__wbg_ptr,r)}}const xn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_creategroupoptions_free(p>>>0,1));class An{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,xn.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_creategroupoptions_free(e,0)}get permissions(){const e=d.__wbg_get_creategroupoptions_permissions(this.__wbg_ptr);return e===3?void 0:e}set permissions(e){d.__wbg_set_creategroupoptions_permissions(this.__wbg_ptr,ne(e)?3:e)}get groupName(){const e=d.__wbg_get_creategroupoptions_groupName(this.__wbg_ptr);let r;return e[0]!==0&&(r=_e(e[0],e[1]).slice(),d.__wbindgen_free(e[0],e[1]*1,1)),r}set groupName(e){var r=ne(e)?0:re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_creategroupoptions_groupName(this.__wbg_ptr,r,_)}get groupImageUrlSquare(){const e=d.__wbg_get_creategroupoptions_groupImageUrlSquare(this.__wbg_ptr);let r;return e[0]!==0&&(r=_e(e[0],e[1]).slice(),d.__wbindgen_free(e[0],e[1]*1,1)),r}set groupImageUrlSquare(e){var r=ne(e)?0:re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_creategroupoptions_groupImageUrlSquare(this.__wbg_ptr,r,_)}get groupDescription(){const e=d.__wbg_get_creategroupoptions_groupDescription(this.__wbg_ptr);let r;return e[0]!==0&&(r=_e(e[0],e[1]).slice(),d.__wbindgen_free(e[0],e[1]*1,1)),r}set groupDescription(e){var r=ne(e)?0:re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_creategroupoptions_groupDescription(this.__wbg_ptr,r,_)}get groupPinnedFrameUrl(){const e=d.__wbg_get_creategroupoptions_groupPinnedFrameUrl(this.__wbg_ptr);let r;return e[0]!==0&&(r=_e(e[0],e[1]).slice(),d.__wbindgen_free(e[0],e[1]*1,1)),r}set groupPinnedFrameUrl(e){var r=ne(e)?0:re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_creategroupoptions_groupPinnedFrameUrl(this.__wbg_ptr,r,_)}constructor(e,r,_,t,w){var G=ne(r)?0:re(r,d.__wbindgen_malloc,d.__wbindgen_realloc),X=Y,he=ne(_)?0:re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),Oe=Y,We=ne(t)?0:re(t,d.__wbindgen_malloc,d.__wbindgen_realloc),Ke=Y,et=ne(w)?0:re(w,d.__wbindgen_malloc,d.__wbindgen_realloc),He=Y;const Ue=d.creategroupoptions_new(ne(e)?3:e,G,X,he,Oe,We,Ke,et,He);return this.__wbg_ptr=Ue>>>0,xn.register(this,this.__wbg_ptr,this),this}}const $t=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_encodedcontent_free(p>>>0,1));class at{static __wrap(e){e=e>>>0;const r=Object.create(at.prototype);return r.__wbg_ptr=e,$t.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,$t.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_encodedcontent_free(e,0)}get type(){const e=d.__wbg_get_encodedcontent_type(this.__wbg_ptr);return e===0?void 0:mt.__wrap(e)}set type(e){let r=0;ne(e)||($e(e,mt),r=e.__destroy_into_raw()),d.__wbg_set_encodedcontent_type(this.__wbg_ptr,r)}get parameters(){return d.__wbg_get_encodedcontent_parameters(this.__wbg_ptr)}set parameters(e){d.__wbg_set_encodedcontent_parameters(this.__wbg_ptr,e)}get fallback(){const e=d.__wbg_get_encodedcontent_fallback(this.__wbg_ptr);let r;return e[0]!==0&&(r=_e(e[0],e[1]).slice(),d.__wbindgen_free(e[0],e[1]*1,1)),r}set fallback(e){var r=ne(e)?0:re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_encodedcontent_fallback(this.__wbg_ptr,r,_)}get compression(){const e=d.__wbg_get_encodedcontent_compression(this.__wbg_ptr);return e[0]===0?void 0:e[1]}set compression(e){d.__wbg_set_encodedcontent_compression(this.__wbg_ptr,!ne(e),ne(e)?0:e)}get content(){return d.__wbg_get_encodedcontent_content(this.__wbg_ptr)}set content(e){d.__wbg_set_encodedcontent_content(this.__wbg_ptr,e)}constructor(e,r,_,t,w){let G=0;ne(e)||($e(e,mt),G=e.__destroy_into_raw());var X=ne(_)?0:re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),he=Y;const Oe=d.encodedcontent_new(G,r,X,he,!ne(t),ne(t)?0:t,w);return this.__wbg_ptr=Oe>>>0,$t.register(this,this.__wbg_ptr,this),this}}typeof FinalizationRegistry>"u"||new FinalizationRegistry(p=>d.__wbg_groupmember_free(p>>>0,1));const Tn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_groupmetadata_free(p>>>0,1));class Kt{static __wrap(e){e=e>>>0;const r=Object.create(Kt.prototype);return r.__wbg_ptr=e,Tn.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Tn.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_groupmetadata_free(e,0)}creatorInboxId(){let e,r;try{const _=d.groupmetadata_creatorInboxId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}conversationType(){let e,r;try{const _=d.groupmetadata_conversationType(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}}const kn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_grouppermissions_free(p>>>0,1));class Jt{static __wrap(e){e=e>>>0;const r=Object.create(Jt.prototype);return r.__wbg_ptr=e,kn.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,kn.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_grouppermissions_free(e,0)}policyType(){const e=d.grouppermissions_policyType(this.__wbg_ptr);if(e[2])throw ve(e[1]);return e[0]}policySet(){const e=d.grouppermissions_policySet(this.__wbg_ptr);if(e[2])throw ve(e[1]);return nn.__wrap(e[0])}}const Xt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_inboxstate_free(p>>>0,1));class Yt{static __wrap(e){e=e>>>0;const r=Object.create(Yt.prototype);return r.__wbg_ptr=e,Xt.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Xt.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_inboxstate_free(e,0)}get inboxId(){let e,r;try{const _=d.__wbg_get_inboxstate_inboxId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set inboxId(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_groupmember_inboxId(this.__wbg_ptr,r,_)}get recoveryAddress(){let e,r;try{const _=d.__wbg_get_inboxstate_recoveryAddress(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set recoveryAddress(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_inboxstate_recoveryAddress(this.__wbg_ptr,r,_)}get installations(){const e=d.__wbg_get_inboxstate_installations(this.__wbg_ptr);var r=gt(e[0],e[1]).slice();return d.__wbindgen_free(e[0],e[1]*4,4),r}set installations(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;d.__wbg_set_inboxstate_installations(this.__wbg_ptr,r,_)}get accountAddresses(){const e=d.__wbg_get_inboxstate_accountAddresses(this.__wbg_ptr);var r=gt(e[0],e[1]).slice();return d.__wbindgen_free(e[0],e[1]*4,4),r}set accountAddresses(e){const r=Ge(e,d.__wbindgen_malloc),_=Y;d.__wbg_set_inboxstate_accountAddresses(this.__wbg_ptr,r,_)}constructor(e,r,_,t){const w=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),G=Y,X=re(r,d.__wbindgen_malloc,d.__wbindgen_realloc),he=Y,Oe=Ge(_,d.__wbindgen_malloc),We=Y,Ke=Ge(t,d.__wbindgen_malloc),et=Y,He=d.inboxstate_new(w,G,X,he,Oe,We,Ke,et);return this.__wbg_ptr=He>>>0,Xt.register(this,this.__wbg_ptr,this),this}}const Zt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_installation_free(p>>>0,1));class St{static __wrap(e){e=e>>>0;const r=Object.create(St.prototype);return r.__wbg_ptr=e,Zt.register(r,r.__wbg_ptr,r),r}static __unwrap(e){return e instanceof St?e.__destroy_into_raw():0}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Zt.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_installation_free(e,0)}get id(){let e,r;try{const _=d.__wbg_get_installation_id(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set id(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_installation_id(this.__wbg_ptr,r,_)}get clientTimestampNs(){const e=d.__wbg_get_installation_clientTimestampNs(this.__wbg_ptr);return e[0]===0?void 0:BigInt.asUintN(64,e[1])}set clientTimestampNs(e){d.__wbg_set_installation_clientTimestampNs(this.__wbg_ptr,!ne(e),ne(e)?BigInt(0):e)}constructor(e,r){const _=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),t=Y,w=d.installation_new(_,t,!ne(r),ne(r)?BigInt(0):r);return this.__wbg_ptr=w>>>0,Zt.register(this,this.__wbg_ptr,this),this}}typeof FinalizationRegistry>"u"||new FinalizationRegistry(p=>d.__wbg_intounderlyingbytesource_free(p>>>0,1)),typeof FinalizationRegistry>"u"||new FinalizationRegistry(p=>d.__wbg_intounderlyingsink_free(p>>>0,1)),typeof FinalizationRegistry>"u"||new FinalizationRegistry(p=>d.__wbg_intounderlyingsource_free(p>>>0,1));const Fn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_listconversationsoptions_free(p>>>0,1));class Ct{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Fn.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_listconversationsoptions_free(e,0)}get allowedStates(){const e=d.__wbg_get_listconversationsoptions_allowedStates(this.__wbg_ptr);let r;return e[0]!==0&&(r=gt(e[0],e[1]).slice(),d.__wbindgen_free(e[0],e[1]*4,4)),r}set allowedStates(e){var r=ne(e)?0:Ge(e,d.__wbindgen_malloc),_=Y;d.__wbg_set_listconversationsoptions_allowedStates(this.__wbg_ptr,r,_)}get conversationType(){const e=d.__wbg_get_listconversationsoptions_conversationType(this.__wbg_ptr);return e===3?void 0:e}set conversationType(e){d.__wbg_set_listconversationsoptions_conversationType(this.__wbg_ptr,ne(e)?3:e)}get createdAfterNs(){const e=d.__wbg_get_listconversationsoptions_createdAfterNs(this.__wbg_ptr);return e[0]===0?void 0:e[1]}set createdAfterNs(e){d.__wbg_set_listconversationsoptions_createdAfterNs(this.__wbg_ptr,!ne(e),ne(e)?BigInt(0):e)}get createdBeforeNs(){const e=d.__wbg_get_listconversationsoptions_createdBeforeNs(this.__wbg_ptr);return e[0]===0?void 0:e[1]}set createdBeforeNs(e){d.__wbg_set_listconversationsoptions_createdBeforeNs(this.__wbg_ptr,!ne(e),ne(e)?BigInt(0):e)}get limit(){const e=d.__wbg_get_listconversationsoptions_limit(this.__wbg_ptr);return e[0]===0?void 0:e[1]}set limit(e){d.__wbg_set_listconversationsoptions_limit(this.__wbg_ptr,!ne(e),ne(e)?BigInt(0):e)}constructor(e,r,_,t,w){var G=ne(e)?0:Ge(e,d.__wbindgen_malloc),X=Y;const he=d.listconversationsoptions_new(G,X,ne(r)?3:r,!ne(_),ne(_)?BigInt(0):_,!ne(t),ne(t)?BigInt(0):t,!ne(w),ne(w)?BigInt(0):w);return this.__wbg_ptr=he>>>0,Fn.register(this,this.__wbg_ptr,this),this}}const On=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_listmessagesoptions_free(p>>>0,1));class Pn{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,On.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_listmessagesoptions_free(e,0)}get sentBeforeNs(){const e=d.__wbg_get_listmessagesoptions_sentBeforeNs(this.__wbg_ptr);return e[0]===0?void 0:e[1]}set sentBeforeNs(e){d.__wbg_set_listconversationsoptions_createdAfterNs(this.__wbg_ptr,!ne(e),ne(e)?BigInt(0):e)}get sentAfterNs(){const e=d.__wbg_get_listmessagesoptions_sentAfterNs(this.__wbg_ptr);return e[0]===0?void 0:e[1]}set sentAfterNs(e){d.__wbg_set_listconversationsoptions_createdBeforeNs(this.__wbg_ptr,!ne(e),ne(e)?BigInt(0):e)}get limit(){const e=d.__wbg_get_listmessagesoptions_limit(this.__wbg_ptr);return e[0]===0?void 0:e[1]}set limit(e){d.__wbg_set_listconversationsoptions_limit(this.__wbg_ptr,!ne(e),ne(e)?BigInt(0):e)}get deliveryStatus(){const e=d.__wbg_get_listmessagesoptions_deliveryStatus(this.__wbg_ptr);return e===3?void 0:e}set deliveryStatus(e){d.__wbg_set_listmessagesoptions_deliveryStatus(this.__wbg_ptr,ne(e)?3:e)}get direction(){const e=d.__wbg_get_listmessagesoptions_direction(this.__wbg_ptr);return e===2?void 0:e}set direction(e){d.__wbg_set_listmessagesoptions_direction(this.__wbg_ptr,ne(e)?2:e)}constructor(e,r,_,t,w){const G=d.listmessagesoptions_new(!ne(e),ne(e)?BigInt(0):e,!ne(r),ne(r)?BigInt(0):r,!ne(_),ne(_)?BigInt(0):_,ne(t)?3:t,ne(w)?2:w);return this.__wbg_ptr=G>>>0,On.register(this,this.__wbg_ptr,this),this}}const Ln=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_logoptions_free(p>>>0,1));class Cn{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Ln.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_logoptions_free(e,0)}get structured(){return d.__wbg_get_logoptions_structured(this.__wbg_ptr)!==0}set structured(e){d.__wbg_set_logoptions_structured(this.__wbg_ptr,e)}get performance(){return d.__wbg_get_logoptions_performance(this.__wbg_ptr)!==0}set performance(e){d.__wbg_set_logoptions_performance(this.__wbg_ptr,e)}get level(){const e=d.__wbg_get_logoptions_level(this.__wbg_ptr);return Wt[e]}set level(e){d.__wbg_set_logoptions_level(this.__wbg_ptr,e==null?7:(Wt.indexOf(e)+1||7)-1)}constructor(e,r,_){const t=d.logoptions_new(e,r,_==null?7:(Wt.indexOf(_)+1||7)-1);return this.__wbg_ptr=t>>>0,Ln.register(this,this.__wbg_ptr,this),this}}const en=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_message_free(p>>>0,1));class Nt{static __wrap(e){e=e>>>0;const r=Object.create(Nt.prototype);return r.__wbg_ptr=e,en.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,en.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_message_free(e,0)}get id(){let e,r;try{const _=d.__wbg_get_message_id(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set id(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_message_id(this.__wbg_ptr,r,_)}get sentAtNs(){return d.__wbg_get_message_sentAtNs(this.__wbg_ptr)}set sentAtNs(e){d.__wbg_set_message_sentAtNs(this.__wbg_ptr,e)}get convoId(){let e,r;try{const _=d.__wbg_get_message_convoId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set convoId(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_message_convoId(this.__wbg_ptr,r,_)}get senderInboxId(){let e,r;try{const _=d.__wbg_get_message_senderInboxId(this.__wbg_ptr);return e=_[0],r=_[1],_e(_[0],_[1])}finally{d.__wbindgen_free(e,r,1)}}set senderInboxId(e){const r=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),_=Y;d.__wbg_set_message_senderInboxId(this.__wbg_ptr,r,_)}get content(){const e=d.__wbg_get_message_content(this.__wbg_ptr);return at.__wrap(e)}set content(e){$e(e,at);var r=e.__destroy_into_raw();d.__wbg_set_message_content(this.__wbg_ptr,r)}get kind(){return d.__wbg_get_message_kind(this.__wbg_ptr)}set kind(e){d.__wbg_set_message_kind(this.__wbg_ptr,e)}get deliveryStatus(){return d.__wbg_get_message_deliveryStatus(this.__wbg_ptr)}set deliveryStatus(e){d.__wbg_set_message_deliveryStatus(this.__wbg_ptr,e)}constructor(e,r,_,t,w,G,X){const he=re(e,d.__wbindgen_malloc,d.__wbindgen_realloc),Oe=Y,We=re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),Ke=Y,et=re(t,d.__wbindgen_malloc,d.__wbindgen_realloc),He=Y;$e(w,at);var Ue=w.__destroy_into_raw();const tt=d.message_new(he,Oe,r,We,Ke,et,He,Ue,G,X);return this.__wbg_ptr=tt>>>0,en.register(this,this.__wbg_ptr,this),this}}const tn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(p=>d.__wbg_permissionpolicyset_free(p>>>0,1));class nn{static __wrap(e){e=e>>>0;const r=Object.create(nn.prototype);return r.__wbg_ptr=e,tn.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,tn.unregister(this),e}free(){const e=this.__destroy_into_raw();d.__wbg_permissionpolicyset_free(e,0)}get addMemberPolicy(){return d.__wbg_get_permissionpolicyset_addMemberPolicy(this.__wbg_ptr)}set addMemberPolicy(e){d.__wbg_set_permissionpolicyset_addMemberPolicy(this.__wbg_ptr,e)}get removeMemberPolicy(){return d.__wbg_get_permissionpolicyset_removeMemberPolicy(this.__wbg_ptr)}set removeMemberPolicy(e){d.__wbg_set_permissionpolicyset_removeMemberPolicy(this.__wbg_ptr,e)}get addAdminPolicy(){return d.__wbg_get_permissionpolicyset_addAdminPolicy(this.__wbg_ptr)}set addAdminPolicy(e){d.__wbg_set_permissionpolicyset_addAdminPolicy(this.__wbg_ptr,e)}get removeAdminPolicy(){return d.__wbg_get_permissionpolicyset_removeAdminPolicy(this.__wbg_ptr)}set removeAdminPolicy(e){d.__wbg_set_permissionpolicyset_removeAdminPolicy(this.__wbg_ptr,e)}get updateGroupNamePolicy(){return d.__wbg_get_permissionpolicyset_updateGroupNamePolicy(this.__wbg_ptr)}set updateGroupNamePolicy(e){d.__wbg_set_permissionpolicyset_updateGroupNamePolicy(this.__wbg_ptr,e)}get updateGroupDescriptionPolicy(){return d.__wbg_get_permissionpolicyset_updateGroupDescriptionPolicy(this.__wbg_ptr)}set updateGroupDescriptionPolicy(e){d.__wbg_set_permissionpolicyset_updateGroupDescriptionPolicy(this.__wbg_ptr,e)}get updateGroupImageUrlSquarePolicy(){return d.__wbg_get_permissionpolicyset_updateGroupImageUrlSquarePolicy(this.__wbg_ptr)}set updateGroupImageUrlSquarePolicy(e){d.__wbg_set_permissionpolicyset_updateGroupImageUrlSquarePolicy(this.__wbg_ptr,e)}get updateGroupPinnedFrameUrlPolicy(){return d.__wbg_get_permissionpolicyset_updateGroupPinnedFrameUrlPolicy(this.__wbg_ptr)}set updateGroupPinnedFrameUrlPolicy(e){d.__wbg_set_permissionpolicyset_updateGroupPinnedFrameUrlPolicy(this.__wbg_ptr,e)}constructor(e,r,_,t,w,G,X,he){const Oe=d.permissionpolicyset_new(e,r,_,t,w,G,X,he);return this.__wbg_ptr=Oe>>>0,tn.register(this,this.__wbg_ptr,this),this}}typeof FinalizationRegistry>"u"||new FinalizationRegistry(p=>d.__wbg_version_free(p>>>0,1));async function qr(p,e){if(typeof Response=="function"&&p instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(p,e)}catch(_){if(p.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}const r=await p.arrayBuffer();return await WebAssembly.instantiate(r,e)}else{const r=await WebAssembly.instantiate(p,e);return r instanceof WebAssembly.Instance?{instance:r,module:p}:r}}function vr(){const p={};return p.wbg={},p.wbg.__wbg_initmodule_63b167b4c2952e1b=function(e){return hn.init_module(e)},p.wbg.__wbindgen_error_new=function(e,r){return new Error(_e(e,r))},p.wbg.__wbindgen_number_new=function(e){return e},p.wbg.__wbg_conversation_new=function(e){return It.__wrap(e)},p.wbg.__wbg_message_new=function(e){return Nt.__wrap(e)},p.wbg.__wbg_installation_new=function(e){return St.__wrap(e)},p.wbg.__wbg_client_new=function(e){return Gt.__wrap(e)},p.wbg.__wbg_inboxstate_new=function(e){return Yt.__wrap(e)},p.wbg.__wbindgen_try_into_number=function(e){let r;try{r=+e}catch(t){r=t}return r},p.wbg.__wbindgen_number_get=function(e,r){const _=r,t=typeof _=="number"?_:void 0;Te().setFloat64(e+8*1,ne(t)?0:t,!0),Te().setInt32(e+4*0,!ne(t),!0)},p.wbg.__wbindgen_is_undefined=function(e){return e===void 0},p.wbg.__wbindgen_in=function(e,r){return e in r},p.wbg.__wbindgen_string_get=function(e,r){const _=r,t=typeof _=="string"?_:void 0;var w=ne(t)?0:re(t,d.__wbindgen_malloc,d.__wbindgen_realloc),G=Y;Te().setInt32(e+4*1,G,!0),Te().setInt32(e+4*0,w,!0)},p.wbg.__wbindgen_is_object=function(e){const r=e;return typeof r=="object"&&r!==null},p.wbg.__wbindgen_as_number=function(e){return+e},p.wbg.__wbindgen_string_new=function(e,r){return _e(e,r)},p.wbg.__wbg_consent_unwrap=function(e){return Lt.__unwrap(e)},p.wbg.__wbg_installation_unwrap=function(e){return St.__unwrap(e)},p.wbg.__wbg_performance_72f95fe5952939b5=function(){return globalThis.performance},p.wbg.__wbg_mark_6045ef1772587264=function(){return ye(function(e,r,_){e.mark(_e(r,_))},arguments)},p.wbg.__wbg_mark_bad820680b8580c2=function(){return ye(function(e,r,_,t){e.mark(_e(r,_),t)},arguments)},p.wbg.__wbg_measure_1d846b814d43d7e1=function(){return ye(function(e,r,_,t,w,G,X){e.measure(_e(r,_),_e(t,w),_e(G,X))},arguments)},p.wbg.__wbg_measure_7ca0e5cfef892340=function(){return ye(function(e,r,_,t){e.measure(_e(r,_),t)},arguments)},p.wbg.__wbindgen_cb_drop=function(e){const r=e.original;return r.cnt--==1?(r.a=0,!0):!1},p.wbg.__wbg_clearTimeout_541ac0980ffcef74=typeof clearTimeout=="function"?clearTimeout:Xe("clearTimeout"),p.wbg.__wbg_setTimeout_7d81d052875b0f4f=function(){return ye(function(e,r){return setTimeout(e,r)},arguments)},p.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},p.wbg.__wbg_stack_658279fe44541cf6=function(e,r){const _=r.stack,t=re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),w=Y;Te().setInt32(e+4*1,w,!0),Te().setInt32(e+4*0,t,!0)},p.wbg.__wbg_error_f851667af71bcfc6=function(e,r){let _,t;try{_=e,t=r,console.error(_e(e,r))}finally{d.__wbindgen_free(_,t,1)}},p.wbg.__wbg_sqlite3_94709d525395f0e0=function(e){return e.sqlite3},p.wbg.__wbg_wasm_493cb9116b24d2ed=function(e){return e.wasm},p.wbg.__wbg_pstack_fc77b7165420650a=function(e){return e.pstack},p.wbg.__wbg_pointer_d3c7ebff6fec1c91=function(e){return e.pointer},p.wbg.__wbg_alloc_3dc7f2dcc7f32fdb=function(e,r){return e.alloc(r>>>0)},p.wbg.__wbg_alloc_412cbdfb204df090=function(e,r){return e.alloc(r>>>0)},p.wbg.__wbg_preparev3_439afd649e006ca8=function(e,r,_,t,w,G,X){return e.prepare_v3(r,_>>>0,t,w>>>0,G,X)},p.wbg.__wbg_peekPtr_a3eb6c43e8226b33=function(e,r){return e.peekPtr(r)},p.wbg.__wbg_restore_f0dcf7e42f529814=function(e,r){e.restore(r)},p.wbg.__wbindgen_is_null=function(e){return e===null},p.wbg.__wbg_alloc_12d3472bbd917658=function(e){return e.alloc},p.wbg.__wbg_allocPtr_a9d5b0a7a6dfb5ab=function(e,r,_){return e.allocPtr(r>>>0,_!==0)},p.wbg.__wbg_impl_3c42f6bcb7b4c19c=function(e,r){return e.impl(r>>>0)},p.wbg.__wbg_bindnull_bb548bfb7e51d9f6=function(e,r,_){return e.bind_null(r,_)},p.wbg.__wbg_bindtext_ea5e136c4ac4c21f=function(e,r,_,t,w,G){return e.bind_text(r,_,t>>>0,w,G)},p.wbg.__wbg_bindint_1ad9b7c92c66451b=function(e,r,_,t){return e.bind_int(r,_,t)},p.wbg.__wbg_bindint64_4f6d503abe851224=function(e,r,_,t){return e.bind_int64(r,_,t)},p.wbg.__wbg_binddouble_b0a91f37239ee4b0=function(e,r,_,t){return e.bind_double(r,_,t)},p.wbg.__wbg_bindblob_5a17f213fdf1908e=function(e,r,_,t,w,G){return e.bind_blob(r,_,t>>>0,w,G)},p.wbg.__wbg_dbhandle_ab50bfd9245494b7=function(e,r){return e.db_handle(r)},p.wbg.__wbg_dealloc_351653c7fd6f869c=function(e,r){e.dealloc(r>>>0)},p.wbg.__wbg_finalize_238aae75fb871c94=function(){return ye(function(e,r){e.finalize(r)},arguments)},p.wbg.__wbg_reset_0be27bd2c5c25e78=function(e,r){return e.reset(r)},p.wbg.__wbg_step_a58b1066c566c122=function(e,r){return e.step(r)},p.wbg.__wbg_columncount_a12965551470fb42=function(e,r){return e.column_count(r)},p.wbg.__wbg_columnvalue_49c1ea5d732bde1c=function(e,r,_){return e.column_value(r,_)},p.wbg.__wbg_capi_ca06542c83b93175=function(e){return e.capi},p.wbg.__wbg_SQLITECONSTRAINTCHECK_7b54e6702b2e57ba=function(e){return e.SQLITE_CONSTRAINT_CHECK},p.wbg.__wbg_SQLITEROW_a21779e78155c8ad=function(e){return e.SQLITE_ROW},p.wbg.__wbg_SQLITEPREPAREPERSISTENT_d81d553ffa5c038c=function(e){return e.SQLITE_PREPARE_PERSISTENT},p.wbg.__wbg_SQLITEINTEGER_9031dce8e01c166c=function(e){return e.SQLITE_INTEGER},p.wbg.__wbg_SQLITEDONE_fbfe18ce23a3b6da=function(e){return e.SQLITE_DONE},p.wbg.__wbg_SQLITETEXT_727e78d48f532f23=function(e){return e.SQLITE_TEXT},p.wbg.__wbg_SQLITENULL_00f5eb33b5b89690=function(e){return e.SQLITE_NULL},p.wbg.__wbg_SQLITECONSTRAINTUNIQUE_1dea04a977c1e377=function(e){return e.SQLITE_CONSTRAINT_UNIQUE},p.wbg.__wbg_SQLITECONSTRAINTPRIMARYKEY_3e2ad26d848575a2=function(e){return e.SQLITE_CONSTRAINT_PRIMARYKEY},p.wbg.__wbg_SQLITEBLOB_394b61ff6fc173a6=function(e){return e.SQLITE_BLOB},p.wbg.__wbg_SQLITESTATIC_b98299c993e94d35=function(e){return e.SQLITE_STATIC},p.wbg.__wbg_SQLITEFLOAT_e0da134da12d25d0=function(e){return e.SQLITE_FLOAT},p.wbg.__wbg_SQLITECONSTRAINTNOTNULL_0f87885933517ad3=function(e){return e.SQLITE_CONSTRAINT_NOTNULL},p.wbg.__wbg_SQLITEOK_2d09a4e691645e98=function(e){return e.SQLITE_OK},p.wbg.__wbg_SQLITECONSTRAINTFOREIGNKEY_741a343b3482effc=function(e){return e.SQLITE_CONSTRAINT_FOREIGNKEY},p.wbg.__wbg_SQLITEOPENREADWRITE_a83b4615e4d0f3ab=function(e){return e.SQLITE_OPEN_READWRITE},p.wbg.__wbg_SQLITEOPENCREATE_9de5b9e000c4b114=function(e){return e.SQLITE_OPEN_CREATE},p.wbg.__wbg_SQLITEOPENURI_553652ff6391f5f3=function(e){return e.SQLITE_OPEN_URI},p.wbg.__wbg_changes_ad25c054690f6c2c=function(e,r){return e.changes(r)},p.wbg.__wbg_close_91b1f36e8a68490f=function(e,r){return e.close(r)},p.wbg.__wbindgen_link_42e73067c99cbdba=function(e){const r=new URL("/app/assets/sqlite3-opfs-async-proxy-D3F3v_U-.js",self.location.href).toString(),_=re(r,d.__wbindgen_malloc,d.__wbindgen_realloc),t=Y;Te().setInt32(e+4*1,t,!0),Te().setInt32(e+4*0,_,!0)},p.wbg.__wbg_heap8u_e5e9645d146c39a3=function(e){return e.heap8u()},p.wbg.__wbg_new_a4c99de148de264c=function(e){return new hn(e)},p.wbg.__wbg_version_5f48815bb1d8b346=function(e){return e.version()},p.wbg.__wbg_filename_144613ea2a1b3e89=function(e,r,_,t,w){let G,X;try{G=t,X=w;const he=r.filename(_,_e(t,w)),Oe=re(he,d.__wbindgen_malloc,d.__wbindgen_realloc),We=Y;Te().setInt32(e+4*1,We,!0),Te().setInt32(e+4*0,Oe,!0)}finally{d.__wbindgen_free(G,X,1)}},p.wbg.__wbg_errstr_bb38008691932700=function(e,r,_){const t=r.errstr(_),w=re(t,d.__wbindgen_malloc,d.__wbindgen_realloc),G=Y;Te().setInt32(e+4*1,G,!0),Te().setInt32(e+4*0,w,!0)},p.wbg.__wbg_errmsg_89bcbfbe76b14cf4=function(e,r,_){const t=r.errmsg(_),w=re(t,d.__wbindgen_malloc,d.__wbindgen_realloc),G=Y;Te().setInt32(e+4*1,G,!0),Te().setInt32(e+4*0,w,!0)},p.wbg.__wbg_extendederrcode_2b31e0b528da9bbb=function(e,r){return e.extended_errcode(r)},p.wbg.__wbg_valuedup_b0df8ddba19f1b98=function(e,r){return e.value_dup(r>>>0)},p.wbg.__wbg_valueblob_3f74b376b132f8b5=function(e,r){return e.value_blob(r>>>0)},p.wbg.__wbg_valuebytes_4694dcd27c345742=function(e,r){return e.value_bytes(r>>>0)},p.wbg.__wbg_valuefree_bb58ed981c1df68f=function(e,r){e.value_free(r>>>0)},p.wbg.__wbg_valueint_69cbd5211d849273=function(e,r){return e.value_int(r>>>0)},p.wbg.__wbg_valueint64_64bd43aa58b87911=function(e,r){return e.value_int64(r>>>0)},p.wbg.__wbg_valuetext_92c3345d82a9ca0c=function(e,r,_){const t=r.value_text(_>>>0),w=re(t,d.__wbindgen_malloc,d.__wbindgen_realloc),G=Y;Te().setInt32(e+4*1,G,!0),Te().setInt32(e+4*0,w,!0)},p.wbg.__wbg_valuetype_cfed2bfc3d2b9ffe=function(e,r){return e.value_type(r>>>0)},p.wbg.__wbg_open_d821a8bd5c12df12=function(){return ye(function(e,r,_,t,w){return e.open(_e(r,_),t===0?void 0:w)},arguments)},p.wbg.__wbg_exec_06c0a88959122598=function(){return ye(function(e,r,_,t){e.exec(r,_e(_,t))},arguments)},p.wbg.__wbg_columnname_f60d10fff22a7705=function(e,r,_,t){const w=r.column_name(_,t),G=re(w,d.__wbindgen_malloc,d.__wbindgen_realloc),X=Y;Te().setInt32(e+4*1,X,!0),Te().setInt32(e+4*0,G,!0)},p.wbg.__wbg_registerdieselsqlfunctions_af501c8fa4b13f74=function(){return ye(function(e,r){e.register_diesel_sql_functions(r)},arguments)},p.wbg.__wbg_allocCString_42f27a0af479f779=function(e,r,_){let t,w;try{return t=r,w=_,e.allocCString(_e(r,_))}finally{d.__wbindgen_free(t,w,1)}},p.wbg.__wbindgen_jsval_loose_eq=function(e,r){return e==r},p.wbg.__wbindgen_boolean_get=function(e){const r=e;return typeof r=="boolean"?r?1:0:2},p.wbg.__wbg_String_b9412f8799faab3e=function(e,r){const _=String(r),t=re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),w=Y;Te().setInt32(e+4*1,w,!0),Te().setInt32(e+4*0,t,!0)},p.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(e,r){return e[r]},p.wbg.__wbg_set_f975102236d3c502=function(e,r,_){e[r]=_},p.wbg.__wbg_fetch_9b133f5ec268a7b8=typeof fetch=="function"?fetch:Xe("fetch"),p.wbg.__wbg_queueMicrotask_848aa4969108a57e=function(e){return e.queueMicrotask},p.wbg.__wbindgen_is_function=function(e){return typeof e=="function"},p.wbg.__wbg_queueMicrotask_c5419c06eab41e73=typeof queueMicrotask=="function"?queueMicrotask:Xe("queueMicrotask"),p.wbg.__wbg_crypto_1d1f22824a6a080c=function(e){return e.crypto},p.wbg.__wbg_process_4a72847cc503995b=function(e){return e.process},p.wbg.__wbg_versions_f686565e586dd935=function(e){return e.versions},p.wbg.__wbg_node_104a2ff8d6ea03a2=function(e){return e.node},p.wbg.__wbindgen_is_string=function(e){return typeof e=="string"},p.wbg.__wbg_require_cca90b1a94a0255b=function(){return ye(function(){return module.require},arguments)},p.wbg.__wbg_msCrypto_eb05e62b530a1508=function(e){return e.msCrypto},p.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return ye(function(e,r){e.getRandomValues(r)},arguments)},p.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return ye(function(e,r){e.randomFillSync(r)},arguments)},p.wbg.__wbg_debug_69675dd374e2c249=typeof console.debug=="function"?console.debug:Xe("console.debug"),p.wbg.__wbg_debug_a0b6c2c5ac9a4bfd=typeof console.debug=="function"?console.debug:Xe("console.debug"),p.wbg.__wbg_error_53abcd6a461f73d8=typeof console.error=="function"?console.error:Xe("console.error"),p.wbg.__wbg_error_4d17c5bb1ca90c94=typeof console.error=="function"?console.error:Xe("console.error"),p.wbg.__wbg_info_f073b719c8035bbf=typeof console.info=="function"?console.info:Xe("console.info"),p.wbg.__wbg_info_1c7fba7da21072d1=typeof console.info=="function"?console.info:Xe("console.info"),p.wbg.__wbg_warn_41503a1c2194de89=typeof console.warn=="function"?console.warn:Xe("console.warn"),p.wbg.__wbg_warn_2e2787d40aad9a81=typeof console.warn=="function"?console.warn:Xe("console.warn"),p.wbg.__wbg_fetch_1fdc4448ed9eec00=function(e,r){return e.fetch(r)},p.wbg.__wbg_close_cfd08d9cf9f36856=function(){return ye(function(e){e.close()},arguments)},p.wbg.__wbg_enqueue_e693a6fb4f3261c1=function(){return ye(function(e,r){e.enqueue(r)},arguments)},p.wbg.__wbg_instanceof_Response_3c0e210a57ff751d=function(e){let r;try{r=e instanceof Response}catch{r=!1}return r},p.wbg.__wbg_url_58af972663531d16=function(e,r){const _=r.url,t=re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),w=Y;Te().setInt32(e+4*1,w,!0),Te().setInt32(e+4*0,t,!0)},p.wbg.__wbg_status_5f4e900d22140a18=function(e){return e.status},p.wbg.__wbg_headers_1b9bf90c73fae600=function(e){return e.headers},p.wbg.__wbg_arrayBuffer_144729e09879650e=function(){return ye(function(e){return e.arrayBuffer()},arguments)},p.wbg.__wbg_byobRequest_86ac467c94924d3c=function(e){const r=e.byobRequest;return ne(r)?0:Et(r)},p.wbg.__wbg_close_7cda9dd901230214=function(){return ye(function(e){e.close()},arguments)},p.wbg.__wbg_signal_9acfcec9e7dffc22=function(e){return e.signal},p.wbg.__wbg_new_75169ae5a9683c55=function(){return ye(function(){return new AbortController},arguments)},p.wbg.__wbg_abort_c57daab47a6c1215=function(e){e.abort()},p.wbg.__wbg_view_de0e81c5c00d2129=function(e){const r=e.view;return ne(r)?0:Et(r)},p.wbg.__wbg_respond_ffb6928cd9b79c32=function(){return ye(function(e,r){e.respond(r>>>0)},arguments)},p.wbg.__wbg_newwithstrandinit_4b92c89af0a8e383=function(){return ye(function(e,r,_){return new Request(_e(e,r),_)},arguments)},p.wbg.__wbg_setbody_aa8b691bec428bf4=function(e,r){e.body=r},p.wbg.__wbg_setcredentials_a4e661320cdb9738=function(e,r){e.credentials=wr[r]},p.wbg.__wbg_setheaders_f5205d36e423a544=function(e,r){e.headers=r},p.wbg.__wbg_setmethod_ce2da76000b02f6a=function(e,r,_){e.method=_e(r,_)},p.wbg.__wbg_setmode_4919fd636102c586=function(e,r){e.mode=yr[r]},p.wbg.__wbg_setsignal_812ccb8269a7fd90=function(e,r){e.signal=r},p.wbg.__wbg_new_a9ae04a5200606a5=function(){return ye(function(){return new Headers},arguments)},p.wbg.__wbg_append_8b3e7f74a47ea7d5=function(){return ye(function(e,r,_,t,w){e.append(_e(r,_),_e(t,w))},arguments)},p.wbg.__wbg_get_5419cf6b954aa11d=function(e,r){return e[r>>>0]},p.wbg.__wbg_length_f217bbbf7e8e4df4=function(e){return e.length},p.wbg.__wbg_new_034f913e7636e987=function(){return new Array},p.wbg.__wbg_newnoargs_1ede4bf2ebbaaf43=function(e,r){return new Function(_e(e,r))},p.wbg.__wbg_new_7a87a0376e40533b=function(){return new Map},p.wbg.__wbg_next_13b477da1eaa3897=function(e){return e.next},p.wbg.__wbg_next_b06e115d1b01e10b=function(){return ye(function(e){return e.next()},arguments)},p.wbg.__wbg_done_983b5ffcaec8c583=function(e){return e.done},p.wbg.__wbg_value_2ab8a198c834c26a=function(e){return e.value},p.wbg.__wbg_iterator_695d699a44d6234c=function(){return Symbol.iterator},p.wbg.__wbg_get_ef828680c64da212=function(){return ye(function(e,r){return Reflect.get(e,r)},arguments)},p.wbg.__wbg_call_a9ef466721e824f2=function(){return ye(function(e,r){return e.call(r)},arguments)},p.wbg.__wbg_new_e69b5f66fda8f13c=function(){return new Object},p.wbg.__wbg_self_bf91bf94d9e04084=function(){return ye(function(){return self.self},arguments)},p.wbg.__wbg_window_52dd9f07d03fd5f8=function(){return ye(function(){return window.window},arguments)},p.wbg.__wbg_globalThis_05c129bf37fcf1be=function(){return ye(function(){return globalThis.globalThis},arguments)},p.wbg.__wbg_global_3eca19bb09e9c484=function(){return ye(function(){return global.global},arguments)},p.wbg.__wbg_set_425e70f7c64ac962=function(e,r,_){e[r>>>0]=_},p.wbg.__wbg_push_36cf4d81d7da33d1=function(e,r){return e.push(r)},p.wbg.__wbg_instanceof_ArrayBuffer_74945570b4a62ec7=function(e){let r;try{r=e instanceof ArrayBuffer}catch{r=!1}return r},p.wbg.__wbg_new_70a2f23d1565c04c=function(e,r){return new Error(_e(e,r))},p.wbg.__wbg_call_3bfa248576352471=function(){return ye(function(e,r,_){return e.call(r,_)},arguments)},p.wbg.__wbg_set_277a63e77c89279f=function(e,r,_){return e.set(r,_)},p.wbg.__wbg_isSafeInteger_b9dff570f01a9100=function(e){return Number.isSafeInteger(e)},p.wbg.__wbg_now_70af4fe37a792251=function(){return Date.now()},p.wbg.__wbg_create_70ef5302cb22a5c4=function(e){return Object.create(e)},p.wbg.__wbg_entries_c02034de337d3ee2=function(e){return Object.entries(e)},p.wbg.__wbg_new_1073970097e5a420=function(e,r){try{var _={a:e,b:r},t=(G,X)=>{const he=_.a;_.a=0;try{return hr(he,_.b,G,X)}finally{_.a=he}};return new Promise(t)}finally{_.a=_.b=0}},p.wbg.__wbg_resolve_0aad7c1484731c99=function(e){return Promise.resolve(e)},p.wbg.__wbg_then_748f75edfb032440=function(e,r){return e.then(r)},p.wbg.__wbg_then_4866a7d9f55d8f3e=function(e,r,_){return e.then(r,_)},p.wbg.__wbg_buffer_ccaed51a635d8a2d=function(e){return e.buffer},p.wbg.__wbg_newwithbyteoffsetandlength_7e3eb787208af730=function(e,r,_){return new Uint8Array(e,r>>>0,_>>>0)},p.wbg.__wbg_new_fec2611eb9180f95=function(e){return new Uint8Array(e)},p.wbg.__wbg_set_ec2fcf81bc573fd9=function(e,r,_){e.set(r,_>>>0)},p.wbg.__wbg_length_9254c4bd3b9f23c4=function(e){return e.length},p.wbg.__wbg_instanceof_Uint8Array_df0761410414ef36=function(e){let r;try{r=e instanceof Uint8Array}catch{r=!1}return r},p.wbg.__wbg_newwithlength_76462a666eca145f=function(e){return new Uint8Array(e>>>0)},p.wbg.__wbg_buffer_95102df5554646dc=function(e){return e.buffer},p.wbg.__wbg_subarray_975a06f9dbd16995=function(e,r,_){return e.subarray(r>>>0,_>>>0)},p.wbg.__wbg_byteLength_5d623ba3d92a3a9c=function(e){return e.byteLength},p.wbg.__wbg_byteOffset_ec0928143c619cd7=function(e){return e.byteOffset},p.wbg.__wbg_has_bd717f25f195f23d=function(){return ye(function(e,r){return Reflect.has(e,r)},arguments)},p.wbg.__wbg_set_e864d25d9b399c9f=function(){return ye(function(e,r,_){return Reflect.set(e,r,_)},arguments)},p.wbg.__wbg_new_fddd2773b9888ac9=function(){return ye(function(e){return new WebAssembly.Memory(e)},arguments)},p.wbg.__wbg_stringify_eead5648c09faaf8=function(){return ye(function(e){return JSON.stringify(e)},arguments)},p.wbg.__wbindgen_debug_string=function(e,r){const _=Qt(r),t=re(_,d.__wbindgen_malloc,d.__wbindgen_realloc),w=Y;Te().setInt32(e+4*1,w,!0),Te().setInt32(e+4*0,t,!0)},p.wbg.__wbindgen_throw=function(e,r){throw new Error(_e(e,r))},p.wbg.__wbindgen_memory=function(){return d.memory},p.wbg.__wbindgen_closure_wrapper7541=function(e,r,_){return qn(e,r,1813,dr)},p.wbg.__wbindgen_closure_wrapper10067=function(e,r,_){return qn(e,r,2328,pr)},p.wbg.__wbindgen_init_externref_table=function(){const e=d.__wbindgen_export_2,r=e.grow(4);e.set(0,void 0),e.set(r+0,void 0),e.set(r+1,null),e.set(r+2,!0),e.set(r+3,!1)},p}function Er(p,e){return d=p.exports,Nn.__wbindgen_wasm_module=e,_t=null,vt=null,d.__wbindgen_start(),d}async function Nn(p){if(d!==void 0)return d;typeof p<"u"&&(Object.getPrototypeOf(p)===Object.prototype?{module_or_path:p}=p:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof p>"u"&&(p=new URL("/app/assets/bindings_wasm_bg-DeFHVJAR.wasm",self.location.href));const e=vr();(typeof p=="string"||typeof Request=="function"&&p instanceof Request||typeof URL=="function"&&p instanceof URL)&&(p=fetch(p));const{instance:r,module:_}=await qr(await p,e);return Er(r,_)}const Rn=p=>{return new at((e=p.type,new mt(e.authorityId,e.typeId,e.versionMajor,e.versionMinor)),new Map(Object.entries(p.parameters)),p.fallback,p.compression,p.content);var e},Ir=p=>{return{type:(e=p.type,{authorityId:e.authorityId,typeId:e.typeId,versionMajor:e.versionMajor,versionMinor:e.versionMinor}),parameters:p.parameters,fallback:p.fallback,compression:p.compression,content:p.content};var e},Dn=p=>{return{type:(e=p.type,new xe({authorityId:e.authorityId,typeId:e.typeId,versionMajor:e.versionMajor,versionMinor:e.versionMinor})),parameters:p.parameters,fallback:p.fallback,compression:p.compression,content:p.content};var e},Mn=p=>{return{content:Ir((e=p.content,{type:(r=e.type,new xe({authorityId:r.authorityId,typeId:r.typeId,versionMajor:r.versionMajor,versionMinor:r.versionMinor})),parameters:Object.fromEntries(e.parameters),fallback:e.fallback,compression:e.compression,content:e.content})),convoId:p.convoId,deliveryStatus:p.deliveryStatus,id:p.id,kind:p.kind,senderInboxId:p.senderInboxId,sentAtNs:p.sentAtNs};var e,r},rn=p=>new Ct(p.allowedStates,p.conversationType,p.createdAfterNs,p.createdBeforeNs,p.limit),lt=p=>({id:p.id,name:p.name,imageUrl:p.imageUrl,description:p.description,pinnedFrameUrl:p.pinnedFrameUrl,permissions:{policyType:p.permissions.policyType,policySet:{addAdminPolicy:p.permissions.policySet.addAdminPolicy,addMemberPolicy:p.permissions.policySet.addMemberPolicy,removeAdminPolicy:p.permissions.policySet.removeAdminPolicy,removeMemberPolicy:p.permissions.policySet.removeMemberPolicy,updateGroupDescriptionPolicy:p.permissions.policySet.updateGroupDescriptionPolicy,updateGroupImageUrlSquarePolicy:p.permissions.policySet.updateGroupImageUrlSquarePolicy,updateGroupNamePolicy:p.permissions.policySet.updateGroupNamePolicy,updateGroupPinnedFrameUrlPolicy:p.permissions.policySet.updateGroupPinnedFrameUrlPolicy}},isActive:p.isActive,addedByInboxId:p.addedByInboxId,metadata:p.metadata,admins:p.admins,superAdmins:p.superAdmins,createdAtNs:p.createdAtNs}),Sr=p=>({id:p.id,clientTimestampNs:p.clientTimestampNs}),jn=p=>({accountAddresses:p.accountAddresses,inboxId:p.inboxId,installations:p.installations.map(Sr),recoveryAddress:p.recoveryAddress}),xr=p=>new Lt(p.entityType,p.state,p.entity),Ar={local:"http://localhost:5555",dev:"https://dev.xmtp.network",production:"https://production.xmtp.network"};class ct{constructor(e,r){Pe(this,Rt);Pe(this,me);ze(this,Rt,e),ze(this,me,r)}get id(){return j(this,me).id()}get name(){return j(this,me).groupName()}async updateName(e){return j(this,me).updateGroupName(e)}get imageUrl(){return j(this,me).groupImageUrlSquare()}async updateImageUrl(e){return j(this,me).updateGroupImageUrlSquare(e)}get description(){return j(this,me).groupDescription()}async updateDescription(e){return j(this,me).updateGroupDescription(e)}get pinnedFrameUrl(){return j(this,me).groupPinnedFrameUrl()}async updatePinnedFrameUrl(e){return j(this,me).updateGroupPinnedFrameUrl(e)}get isActive(){return j(this,me).isActive()}get addedByInboxId(){return j(this,me).addedByInboxId()}get createdAtNs(){return j(this,me).createdAtNs()}get metadata(){const e=j(this,me).groupMetadata();return{creatorInboxId:e.creatorInboxId(),conversationType:e.conversationType()}}async members(){return(await j(this,me).listMembers()).map(e=>(r=>({accountAddresses:r.accountAddresses,consentState:r.consentState,inboxId:r.inboxId,installationIds:r.installationIds,permissionLevel:r.permissionLevel}))(e))}get admins(){return j(this,me).adminList()}get superAdmins(){return j(this,me).superAdminList()}get permissions(){const e=j(this,me).groupPermissions();return{policyType:e.policyType(),policySet:e.policySet()}}isAdmin(e){return j(this,me).isAdmin(e)}isSuperAdmin(e){return j(this,me).isSuperAdmin(e)}async sync(){return j(this,me).sync()}async addMembers(e){return j(this,me).addMembers(e)}async addMembersByInboxId(e){return j(this,me).addMembersByInboxId(e)}async removeMembers(e){return j(this,me).removeMembers(e)}async removeMembersByInboxId(e){return j(this,me).removeMembersByInboxId(e)}async addAdmin(e){return j(this,me).addAdmin(e)}async removeAdmin(e){return j(this,me).removeAdmin(e)}async addSuperAdmin(e){return j(this,me).addSuperAdmin(e)}async removeSuperAdmin(e){return j(this,me).removeSuperAdmin(e)}async publishMessages(){return j(this,me).publishMessages()}sendOptimistic(e){return j(this,me).sendOptimistic(e)}async send(e){return j(this,me).send(e)}messages(e){return j(this,me).findMessages(e?(r=>new Pn(r.sentBeforeNs,r.sentAfterNs,r.limit,r.deliveryStatus,r.direction))(e):void 0)}get consentState(){return j(this,me).consentState()}updateConsentState(e){j(this,me).updateConsentState(e)}dmPeerInboxId(){return j(this,me).dmPeerInboxId()}}Rt=new WeakMap,me=new WeakMap;class Tr{constructor(e,r){Pe(this,Ye);Pe(this,Qe);ze(this,Ye,e),ze(this,Qe,r)}async sync(){return j(this,Qe).sync()}async syncAll(){return j(this,Qe).syncAllConversations()}getConversationById(e){try{const r=j(this,Qe).findGroupById(e);return new ct(j(this,Ye),r)}catch{return}}getMessageById(e){try{const r=j(this,Qe).findMessageById(e);return Mn(r)}catch{return}}getDmByInboxId(e){try{const r=j(this,Qe).findDmByTargetInboxId(e);return new ct(j(this,Ye),r)}catch{return}}async list(e){return(await j(this,Qe).list(e?rn(e):void 0)).map(r=>new ct(j(this,Ye),r))}async listGroups(e){return(await j(this,Qe).listGroups(e?rn(e):void 0)).map(r=>new ct(j(this,Ye),r))}async listDms(e){return(await j(this,Qe).listDms(e?rn(e):void 0)).map(r=>new ct(j(this,Ye),r))}async newGroup(e,r){const _=await j(this,Qe).createGroup(e,r?(t=>new An(t.permissions,t.name,t.imageUrlSquare,t.description,t.pinnedFrameUrl))(r):void 0);return new ct(j(this,Ye),_)}async newDm(e){const r=await j(this,Qe).createDm(e);return new ct(j(this,Ye),r)}}Ye=new WeakMap,Qe=new WeakMap;const ln=class ln{constructor(e){Pe(this,Fe);Pe(this,xt);Pe(this,At);ze(this,Fe,e),ze(this,At,e.accountAddress),ze(this,xt,new Tr(this,e.conversations()))}static async create(e,r,_){const t=await(async(w,G,X)=>{await Nn();const he=(X==null?void 0:X.apiUrl)??Ar[(X==null?void 0:X.env)??"dev"],Oe=(X==null?void 0:X.dbPath)??`xmtp-${(X==null?void 0:X.env)??"dev"}-${w}.db3`,We=await gr(he,w)||mr(w),Ke=X&&(X.loggingLevel!==void 0||X.structuredLogging||X.performanceLogging);return fr(he,We,w,Oe,G,void 0,Ke?new Cn(X.structuredLogging??!1,X.performanceLogging??!1,X.loggingLevel):void 0)})(e,r,_);return new ln(t)}get accountAddress(){return j(this,At)}get inboxId(){return j(this,Fe).inboxId}get installationId(){return j(this,Fe).installationId}get installationIdBytes(){return j(this,Fe).installationIdBytes}get isRegistered(){return j(this,Fe).isRegistered}async createInboxSignatureText(){try{return await j(this,Fe).createInboxSignatureText()}catch{return}}async addAccountSignatureText(e){try{return await j(this,Fe).addWalletSignatureText(e)}catch{return}}async removeAccountSignatureText(e){try{return await j(this,Fe).revokeWalletSignatureText(e)}catch{return}}async revokeInstallationsSignatureText(){try{return await j(this,Fe).revokeInstallationsSignatureText()}catch{return}}async addSignature(e,r){return j(this,Fe).addSignature(e,r)}async addScwSignature(e,r,_,t){return j(this,Fe).addScwSignature(e,r,_,t)}async applySignatures(){return j(this,Fe).applySignatureRequests()}async canMessage(e){return j(this,Fe).canMessage(e)}async registerIdentity(){return j(this,Fe).registerIdentity()}async findInboxIdByAddress(e){return j(this,Fe).findInboxIdByAddress(e)}async inboxState(e){return j(this,Fe).inboxState(e)}async getLatestInboxState(e){return j(this,Fe).getLatestInboxState(e)}async setConsentStates(e){return j(this,Fe).setConsentStates(e.map(xr))}async getConsentState(e,r){return j(this,Fe).getConsentState(e,r)}get conversations(){return j(this,xt)}signWithInstallationKey(e){return j(this,Fe).signWithInstallationKey(e)}verifySignedWithInstallationKey(e,r){try{return j(this,Fe).verifySignedWithInstallationKey(e,r),!0}catch{return!1}}verifySignedWithPublicKey(e,r,_){try{return br(e,r,_),!0}catch{return!1}}};Fe=new WeakMap,xt=new WeakMap,At=new WeakMap;let sn=ln,oe,Bn=!1;const le=p=>{self.postMessage(p)},Ee=p=>{self.postMessage(p)};self.onmessage=async p=>{var t;const{action:e,id:r,data:_}=p.data;if(Bn&&console.log("client worker received event data",p.data),e==="init"||oe)try{switch(e){case"init":oe=await sn.create(_.address,_.encryptionKey,_.options),Bn=((t=_.options)==null?void 0:t.loggingLevel)!==void 0&&_.options.loggingLevel!=="off",le({id:r,action:e,result:{inboxId:oe.inboxId,installationId:oe.installationId,installationIdBytes:oe.installationIdBytes}});break;case"createInboxSignatureText":{const w=await oe.createInboxSignatureText();le({id:r,action:e,result:w});break}case"addAccountSignatureText":{const w=await oe.addAccountSignatureText(_.newAccountAddress);le({id:r,action:e,result:w});break}case"removeAccountSignatureText":{const w=await oe.removeAccountSignatureText(_.accountAddress);le({id:r,action:e,result:w});break}case"revokeInstallationsSignatureText":{const w=await oe.revokeInstallationsSignatureText();le({id:r,action:e,result:w});break}case"addSignature":await oe.addSignature(_.type,_.bytes),le({id:r,action:e,result:void 0});break;case"addScwSignature":await oe.addScwSignature(_.type,_.bytes,_.chainId,_.blockNumber),le({id:r,action:e,result:void 0});break;case"applySignatures":await oe.applySignatures(),le({id:r,action:e,result:void 0});break;case"registerIdentity":await oe.registerIdentity(),le({id:r,action:e,result:void 0});break;case"isRegistered":{const w=oe.isRegistered;le({id:r,action:e,result:w});break}case"canMessage":{const w=await oe.canMessage(_.accountAddresses);le({id:r,action:e,result:w});break}case"inboxState":{const w=await oe.inboxState(_.refreshFromNetwork);le({id:r,action:e,result:jn(w)});break}case"getLatestInboxState":{const w=await oe.getLatestInboxState(_.inboxId);le({id:r,action:e,result:jn(w)});break}case"setConsentStates":await oe.setConsentStates(_.records),le({id:r,action:e,result:void 0});break;case"getConsentState":{const w=await oe.getConsentState(_.entityType,_.entity);le({id:r,action:e,result:w});break}case"findInboxIdByAddress":{const w=await oe.findInboxIdByAddress(_.address);le({id:r,action:e,result:w});break}case"signWithInstallationKey":{const w=oe.signWithInstallationKey(_.signatureText);le({id:r,action:e,result:w});break}case"verifySignedWithInstallationKey":{const w=oe.verifySignedWithInstallationKey(_.signatureText,_.signatureBytes);le({id:r,action:e,result:w});break}case"verifySignedWithPublicKey":{const w=oe.verifySignedWithPublicKey(_.signatureText,_.signatureBytes,_.publicKey);le({id:r,action:e,result:w});break}case"getConversations":{const w=await oe.conversations.list(_.options);le({id:r,action:e,result:w.map(G=>lt(G))});break}case"getGroups":{const w=await oe.conversations.listGroups(_.options);le({id:r,action:e,result:w.map(G=>lt(G))});break}case"getDms":{const w=await oe.conversations.listDms(_.options);le({id:r,action:e,result:w.map(G=>lt(G))});break}case"newGroup":{const w=await oe.conversations.newGroup(_.accountAddresses,_.options);le({id:r,action:e,result:lt(w)});break}case"newDm":{const w=await oe.conversations.newDm(_.accountAddress);le({id:r,action:e,result:lt(w)});break}case"syncConversations":await oe.conversations.sync(),le({id:r,action:e,result:void 0});break;case"syncAllConversations":await oe.conversations.syncAll(),le({id:r,action:e,result:void 0});break;case"getConversationById":{const w=oe.conversations.getConversationById(_.id);le({id:r,action:e,result:w?lt(w):void 0});break}case"getMessageById":{const w=oe.conversations.getMessageById(_.id);le({id:r,action:e,result:w});break}case"getDmByInboxId":{const w=oe.conversations.getDmByInboxId(_.inboxId);le({id:r,action:e,result:w?lt(w):void 0});break}case"syncGroup":{const w=oe.conversations.getConversationById(_.id);w?(await w.sync(),le({id:r,action:e,result:lt(w)})):Ee({id:r,action:e,error:"Group not found"});break}case"updateGroupName":{const w=oe.conversations.getConversationById(_.id);w?(await w.updateName(_.name),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"updateGroupDescription":{const w=oe.conversations.getConversationById(_.id);w?(await w.updateDescription(_.description),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"updateGroupImageUrlSquare":{const w=oe.conversations.getConversationById(_.id);w?(await w.updateImageUrl(_.imageUrl),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"updateGroupPinnedFrameUrl":{const w=oe.conversations.getConversationById(_.id);w?(await w.updatePinnedFrameUrl(_.pinnedFrameUrl),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"sendGroupMessage":{const w=oe.conversations.getConversationById(_.id);if(w){const G=await w.send(Rn(Dn(_.content)));le({id:r,action:e,result:G})}else Ee({id:r,action:e,error:"Group not found"});break}case"sendOptimisticGroupMessage":{const w=oe.conversations.getConversationById(_.id);if(w){const G=w.sendOptimistic(Rn(Dn(_.content)));le({id:r,action:e,result:G})}else Ee({id:r,action:e,error:"Group not found"});break}case"publishGroupMessages":{const w=oe.conversations.getConversationById(_.id);w?(await w.publishMessages(),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"getGroupMessages":{const w=oe.conversations.getConversationById(_.id);if(w){const G=w.messages(_.options);le({id:r,action:e,result:G.map(X=>Mn(X))})}else Ee({id:r,action:e,error:"Group not found"});break}case"getGroupMembers":{const w=oe.conversations.getConversationById(_.id);if(w){const G=await w.members();le({id:r,action:e,result:G})}else Ee({id:r,action:e,error:"Group not found"});break}case"getGroupAdmins":{const w=oe.conversations.getConversationById(_.id);w?le({id:r,action:e,result:w.admins}):Ee({id:r,action:e,error:"Group not found"});break}case"getGroupSuperAdmins":{const w=oe.conversations.getConversationById(_.id);w?le({id:r,action:e,result:w.superAdmins}):Ee({id:r,action:e,error:"Group not found"});break}case"getGroupConsentState":{const w=oe.conversations.getConversationById(_.id);w?le({id:r,action:e,result:w.consentState}):Ee({id:r,action:e,error:"Group not found"});break}case"updateGroupConsentState":{const w=oe.conversations.getConversationById(_.id);w?(w.updateConsentState(_.state),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"addGroupAdmin":{const w=oe.conversations.getConversationById(_.id);w?(await w.addAdmin(_.inboxId),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"removeGroupAdmin":{const w=oe.conversations.getConversationById(_.id);w?(await w.removeAdmin(_.inboxId),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"addGroupSuperAdmin":{const w=oe.conversations.getConversationById(_.id);w?(await w.addSuperAdmin(_.inboxId),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"removeGroupSuperAdmin":{const w=oe.conversations.getConversationById(_.id);w?(await w.removeSuperAdmin(_.inboxId),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"addGroupMembers":{const w=oe.conversations.getConversationById(_.id);w?(await w.addMembers(_.accountAddresses),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"removeGroupMembers":{const w=oe.conversations.getConversationById(_.id);w?(await w.removeMembers(_.accountAddresses),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"addGroupMembersByInboxId":{const w=oe.conversations.getConversationById(_.id);w?(await w.addMembersByInboxId(_.inboxIds),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"removeGroupMembersByInboxId":{const w=oe.conversations.getConversationById(_.id);w?(await w.removeMembersByInboxId(_.inboxIds),le({id:r,action:e,result:void 0})):Ee({id:r,action:e,error:"Group not found"});break}case"isGroupAdmin":{const w=oe.conversations.getConversationById(_.id);if(w){const G=w.isAdmin(_.inboxId);le({id:r,action:e,result:G})}else Ee({id:r,action:e,error:"Group not found"});break}case"isGroupSuperAdmin":{const w=oe.conversations.getConversationById(_.id);if(w){const G=w.isSuperAdmin(_.inboxId);le({id:r,action:e,result:G})}else Ee({id:r,action:e,error:"Group not found"});break}case"getDmPeerInboxId":{const w=oe.conversations.getConversationById(_.id);if(w){const G=w.dmPeerInboxId();le({id:r,action:e,result:G})}else Ee({id:r,action:e,error:"Group not found"});break}}}catch(w){Ee({id:r,action:e,error:w.message})}else Ee({id:r,action:e,error:"Client not initialized"})}})();
